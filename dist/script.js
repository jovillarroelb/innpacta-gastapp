const a0_0x27e8d5=a0_0x2dd6;(function(_0x2a0bdc,_0x3523d8){const _0x51c0f1=a0_0x2dd6,_0x1a80c4=_0x2a0bdc();while(!![]){try{const _0x559b29=-parseInt(_0x51c0f1(0x179))/0x1+parseInt(_0x51c0f1(0x1d1))/0x2+parseInt(_0x51c0f1(0x1b7))/0x3*(parseInt(_0x51c0f1(0x19b))/0x4)+-parseInt(_0x51c0f1(0x1dc))/0x5+parseInt(_0x51c0f1(0xfe))/0x6+parseInt(_0x51c0f1(0x109))/0x7+-parseInt(_0x51c0f1(0x13b))/0x8*(parseInt(_0x51c0f1(0x168))/0x9);if(_0x559b29===_0x3523d8)break;else _0x1a80c4['push'](_0x1a80c4['shift']());}catch(_0x6604e4){_0x1a80c4['push'](_0x1a80c4['shift']());}}}(a0_0x40f8,0xbb1af));function displayMonth(_0x165e52){const _0x2e3366=a0_0x2dd6,_0x35b8f9=['Enero',_0x2e3366(0x1f9),_0x2e3366(0xf3),'Abril',_0x2e3366(0x12d),'Junio','Julio',_0x2e3366(0x235),_0x2e3366(0x12e),'Octubre',_0x2e3366(0x1ba),_0x2e3366(0x1a0)];return _0x35b8f9[_0x165e52['getMonth']()];}function formatCurrency(_0x119a12){const _0x589051=a0_0x2dd6,_0x20939a=parseFloat(_0x119a12)||0x0,_0x2ea0ae=Math['round'](_0x20939a);return'$'+_0x2ea0ae[_0x589051(0x180)]('es-CL',{'minimumFractionDigits':0x0,'maximumFractionDigits':0x0});}function a0_0x40f8(){const _0x2576d9=['Error\x20al\x20cerrar\x20sesión','Categoría\x20eliminada','expenses-chart','register-submit','close-profile-modal-btn','month-selector','Presupuesto\x20mensual\x20encontrado:','replace','income-chart','[deleteTransaction]\x20Error:','current-month-display','setupModalCloseEvents','[editTransaction]\x20Error\x20al\x20obtener\x20categorías:','role','charts-section','¿Seguro\x20que\x20deseas\x20eliminar\x20esta\x20transacción?\x20Esta\x20acción\x20no\x20se\x20puede\x20deshacer.','¡Registro\x20exitoso!\x20Ya\x20puedes\x20usar\x20la\x20app.','remaining-budget','/api/budgets','annual-chart','¿Estás\x20seguro?','Error\x20al\x20cargar\x20presupuestos','Error\x20al\x20agregar\x20categoría','Marzo','trim','style','</span>','Error\x20al\x20actualizar\x20presupuestos','sub','Transacción\x20agregada\x20exitosamente','sort','#0f766e','user-avatar','✅\x20Botón\x20de\x20gestión\x20de\x20categorías\x20encontrado','426810JpgQsu','reload','Abril','[editTransaction]\x20transactionId\x20inválido:','profile-modal','Error\x20al\x20obtener\x20transacciones:','Error\x20al\x20refrescar\x20presupuestos:','confirm-modal-title','preventDefault','mousedown','hidden','7392840UYAbXM','filter','Transacción\x20eliminada','register-email','La\x20contraseña\x20debe\x20tener\x20al\x20menos\x206\x20caracteres','#eab308','Transacción\x20actualizada','category_name','#app-version','Error\x20al\x20refrescar\x20categorías:','profile-password-repeat','edit-transaction-form','toLocaleDateString','es-CL','body','message','[editTransactionForm]\x20Error\x20inesperado:','reset','close-edit-transaction-btn','edit-description','edit-comments','Sin\x20categoría','text-red-600','success','#22c55e','year-selector','Error\x20al\x20obtener\x20categorías','✅\x20Formulario\x20de\x20transacciones\x20encontrado','Por\x20favor\x20completa\x20todos\x20los\x20campos','height','statusText','description','Error\x20al\x20verificar\x20sesión:','nav-monthly','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteCategory(\x27','Categorías\x20obtenidas\x20para\x20usuario','Mayo','Septiembre','register','welcome-message','Por\x20favor\x20ingresa\x20un\x20nombre\x20para\x20la\x20categoría','fixed\x20top-4\x20right-4\x20p-4\x20rounded-lg\x20shadow-lg\x20z-50\x20transition-all\x20duration-300\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22text-sm\x20font-medium\x20text-gray-700\x20mb-1\x22>','edit-category','month','startsWith','Categoría\x20agregada\x20exitosamente','opacity','doughnut','getElementById','10573856EremNN','localeCompare','#047857','/api/categories','text-white','transactions-loading','from-blue-600','category-modal','Error\x20al\x20agregar\x20categoría:','bg-gradient-to-r','length','#2563eb','#065f46','<div\x20class=\x22flex\x20justify-center\x22><div\x20class=\x22animate-spin\x20rounded-full\x20h-6\x20w-6\x20border-b-2\x20border-blue-600\x22></div></div>','#3b82f6','token','removeEventListener','POST','getItem','input','text-green-600','to-purple-500','confirm-modal-message','Error\x20al\x20eliminar\x20categoría','login-email','Sesión\x20cerrada\x20exitosamente','<p\x20class=\x22text-xs\x20text-gray-400\x20mt-1\x22>','toUpperCase','createElement','width','#current-year','¿Seguro\x20que\x20deseas\x20eliminar\x20esta\x20categoría?\x20Esta\x20acción\x20no\x20se\x20puede\x20deshacer.','\x22\x20class=\x22annual-budget-input\x20px-3\x20py-2\x20rounded-lg\x20border\x20border-gray-300\x20focus:ring-2\x20focus:ring-blue-500\x22\x20required\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','❌\x20Botón\x20de\x20logout\x20no\x20encontrado','Gastapp\x20:\x20Control\x20de\x20Finanzas','Debes\x20seleccionar\x20una\x20categoría','first_name','Error\x20de\x20conexión.\x20Intenta\x20nuevamente.','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20space-x-1\x20mt-2\x20sm:mt-0\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-edit\x22\x20onclick=\x22editTransaction(\x27','application/json','text-gray-500','\x27)\x22\x20class=\x22text-red-500\x20hover:text-red-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22w-5\x20h-5\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M19\x207l-.867\x2012.142A2\x202\x200\x200116.138\x2021H7.862a2\x202\x200\x2001-1.995-1.858L5\x207m5\x204v6m4-6v6m1-10V4a1\x201\x200\x2000-1-1h-4a1\x201\x200\x2000-1\x201v3M4\x207h16\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','toLowerCase','reassign-modal','json','9TnlUGo','<option\x20value=\x22','Error\x20al\x20obtener\x20datos\x20de\x20gráficos:','all','Error\x20en\x20fetchWithAuth:','charts-loading','🔧\x20Configurando\x20event\x20listeners...','editTransaction','getMonth','Transacción\x20no\x20encontrada','slice','p-3\x20my-4\x20rounded-lg\x20text-center\x20','clearRect','Error\x20al\x20actualizar\x20perfil','getContext','querySelectorAll','Error\x20al\x20agregar\x20transacción:','482531yOpUMD','map','#022c22','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','setSelectionRange','stringify','No\x20hay\x20sesión\x20activa','toLocaleString','innerHTML','Bienvenido/a,\x20','confirm-modal','showCategoryModal','total-income','Error\x20al\x20actualizar\x20transacción','value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x20sm:items-center\x20sm:flex-row\x20sm:text-right\x20mt-2\x20sm:mt-0\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mr-0\x20sm:mr-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20','El\x20monto\x20debe\x20ser\x20mayor\x20a\x200','created_at','profile-password','Presupuestos\x20actualizados','<p\x20class=\x22text-gray-500\x20text-center\x20py-4\x22>No\x20hay\x20categorías\x20definidas</p>','push','profile-lastname','Error\x20al\x20refrescar\x20gráficos:','🚀\x20Inicializando\x20aplicación...','<span\x20class=\x22text-gray-500\x22>','category','next-month-btn','className','split','click','confirm-modal-cancel','auth-message','#14b8a6','4Bevvzz','register-last-name','fill','true','disabled','Diciembre','[editTransaction]\x20transactionId:','profile-form','close-category-modal-btn','categories-list','budgets-loading','❌\x20Formulario\x20de\x20transacciones\x20no\x20encontrado','keydown','Error\x20en\x20el\x20registro','addEventListener','No\x20se\x20encontró\x20el\x20contenedor\x20de\x20la\x20lista\x20de\x20categorías','login-submit','display','Error\x20en\x20el\x20inicio\x20de\x20sesión','remove','getFullYear','Error\x20al\x20cargar\x20categorías','manage-categories-btn','categories-loading','removeItem','edit-annual-budgets-btn','/api/admin/users/','submit','2442714Mtymaw','NFC','Lista\x20de\x20categorías\x20renderizada:','Noviembre','bg-red-100\x20text-red-700','Error\x20al\x20refrescar\x20transacciones:','HTTP\x20error!\x20status:\x20','Error\x20al\x20obtener\x20presupuestos:','input[type=\x22number\x22]','admin.html','headers','❌\x20Error\x20al\x20inicializar\x20la\x20aplicación:','Junio','padStart','keys','comments','location','hidden\x20p-3\x20text-center\x20rounded-lg','profile-firstname','❌\x20No\x20hay\x20sesión\x20activa,\x20redirigiendo\x20a\x20/','<span\x20class=\x22font-bold\x20text-yellow-500\x22>Sin\x20categoría</span>','loading-indicator','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20min=\x220\x22\x20name=\x22','destroy','[editTransaction]\x20Error\x20al\x20obtener\x20transacción:','income','2554410neQUIW','Error\x20al\x20cargar\x20la\x20aplicación','focus','sidebar-nav','find','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-400\x22>','#84cc16','login-form','normalize','#042f2e','new-category-name','3240260unKADF','/app.html','option','version','tab-login','1.0.0','Octubre','#f97316','edit-annual-year','Las\x20contraseñas\x20no\x20coinciden','classList','none','appendChild','¡Inicio\x20de\x20sesión\x20exitoso!','Error\x20al\x20eliminar\x20transacción','❌\x20Botón\x20de\x20gestión\x20de\x20categorías\x20no\x20encontrado','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-between\x20p-3\x20bg-gray-50\x20rounded-lg\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x20text-gray-800\x22>','name','<p\x20class=\x22text-red-500\x20text-center\x20py-4\x22>Error\x20al\x20cargar\x20categorías</p>','user','expense','email','onclick','[editTransactionForm]\x20Error\x20al\x20actualizar\x20transacción:','Bearer\x20','\x22\x20value=\x22','</p>','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-lg\x20font-semibold\x20text-gray-800\x20mb-4\x22>Gestionar\x20Categorías</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22categories-list\x22\x20class=\x22mb-4\x20max-h-60\x20overflow-y-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22add-category-form\x22\x20class=\x22space-y-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22new-category-name\x22\x20placeholder=\x22Nueva\x20Categoría\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20px-4\x20py-2\x20bg-gray-100\x20border-transparent\x20rounded-lg\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20space-x-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22flex-1\x20bg-blue-600\x20text-white\x20font-semibold\x20py-2\x20rounded-lg\x20hover:bg-blue-700\x20transition\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Agregar\x20Categoría\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22close-category-modal-btn\x22\x20class=\x22px-4\x20py-2\x20bg-gray-300\x20text-gray-700\x20rounded-lg\x20hover:bg-gray-400\x20transition\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Cerrar\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','Enero','Febrero','La\x20descripción\x20no\x20puede\x20estar\x20vacía','DELETE','querySelector','profile-email','PATCH','change','#admin-menu-item\x20a','type','href','app-container','<option\x20value=\x22\x22>Seleccionar\x20categoría</option>','test','Funcionalidad\x20de\x20reasignación\x20en\x20desarrollo','Error\x20al\x20cargar\x20gráficos','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20sm:flex-row\x20sm:items-center\x20justify-between\x20p-4\x20bg-gray-50\x20rounded-lg\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22font-semibold\x20text-gray-800\x22>','Error\x20al\x20cargar\x20transacciones','key','bg-white','rgba(16,185,129,0.7)','login','rgba(37,99,235,0.1)','Presupuestos\x20cargados:','/api/transactions','main-title','log','bottom','div','nav-annual','target','login-password','add-category-form','admin','edit-annual-budgets-form','monthly-dashboard-view','selected','Balance','expenses','Error\x20al\x20obtener\x20datos\x20anuales:','setItem','Error\x20al\x20obtener\x20presupuestos','amount','last_name','admin-menu-item','status','forEach','Por\x20favor\x20completa\x20todos\x20los\x20campos\x20requeridos','parse','_cleanup','bg-green-100\x20text-green-700','edit-transaction-modal','values','join','category_id','bar','textContent','register-password','text-gray-800','edit-amount','expense-form','Agosto','PUT','Error\x20al\x20obtener\x20transacciones','jwt_token','info','Presupuestos\x20disponibles:','No\x20se\x20pudo\x20eliminar\x20la\x20categoría','total-expenses','active','line','</option>','register-form','bg-blue-500\x20text-white','top','.annual-budget-input','✅\x20Botón\x20de\x20logout\x20encontrado','annual-dashboard-view','isAdminAuthenticated','Error\x20al\x20cargar\x20categorías\x20en\x20el\x20modal:','add','edit-annual-budgets-modal','block','function','/auth/login','deleteCategory','✅\x20Aplicación\x20inicializada\x20correctamente','✅\x20Sesión\x20activa\x20encontrada','removeChild','Julio','expense-list-container','#064e3b','📊\x20Renderizando\x20gráficos\x20con\x20datos:','error'];a0_0x40f8=function(){return _0x2576d9;};return a0_0x40f8();}function showLoading(_0xbfaf8f,_0x5659c3=!![]){const _0x25f258=a0_0x2dd6,_0xac769f=document[_0x25f258(0x13a)](_0xbfaf8f);_0xac769f&&(_0x5659c3?_0xac769f['innerHTML']=_0x25f258(0x148):_0xac769f[_0x25f258(0x181)]='');}function showNotification(_0x10cf6b,_0x51f770=a0_0x27e8d5(0xbf),_0x5e87df=0xbb8){const _0x1923aa=a0_0x27e8d5,_0x3ddbff=document['createElement'](_0x1923aa(0x214));_0x3ddbff[_0x1923aa(0x195)]=_0x1923aa(0x132)+(_0x51f770===_0x1923aa(0xdb)?'bg-red-500\x20text-white':_0x51f770===_0x1923aa(0x120)?'bg-green-500\x20text-white':_0x1923aa(0xc7)),_0x3ddbff[_0x1923aa(0x230)]=_0x10cf6b,document[_0x1923aa(0x117)][_0x1923aa(0x1e8)](_0x3ddbff),setTimeout(()=>{const _0x3a46f1=_0x1923aa;_0x3ddbff['style'][_0x3a46f1(0x138)]='0',setTimeout(()=>document[_0x3a46f1(0x117)][_0x3a46f1(0xd6)](_0x3ddbff),0x12c);},_0x5e87df);}function isValidEmail(_0x13a1f3){const _0x4c7fd8=a0_0x27e8d5,_0x6bc53d=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return _0x6bc53d[_0x4c7fd8(0x205)](_0x13a1f3);}async function initializeFooter(){const _0x39696d=a0_0x27e8d5,_0x19045a=document['querySelectorAll'](_0x39696d(0x111)),_0x274f33=document[_0x39696d(0x177)](_0x39696d(0x159));let _0x450969=_0x39696d(0x1e1),_0x20d274=![];try{const _0x51e35a=await fetchWithAuth('/api/version');if(_0x51e35a&&_0x51e35a['ok']){const _0x2ef8a1=await _0x51e35a[_0x39696d(0x167)]();_0x450969=_0x2ef8a1[_0x39696d(0x1df)],_0x20d274=!![];}}catch(_0x24be83){}if(!_0x20d274)try{const _0x5ca530=await fetch('/api/version');if(_0x5ca530&&_0x5ca530['ok']){const _0x374fd6=await _0x5ca530[_0x39696d(0x167)]();_0x450969=_0x374fd6[_0x39696d(0x1df)];}}catch(_0x22c81a){}_0x19045a[_0x39696d(0x226)](_0x30231c=>{const _0x34249d=_0x39696d;if(_0x30231c)_0x30231c[_0x34249d(0x230)]=_0x450969;});const _0x1a8fd4=new Date()[_0x39696d(0x1af)]();_0x274f33[_0x39696d(0x226)](_0x297164=>{if(_0x297164)_0x297164['textContent']=_0x1a8fd4;});}document[a0_0x27e8d5(0x1a9)]('DOMContentLoaded',()=>{const _0xd901b8=a0_0x27e8d5,_0x434eb9=document[_0xd901b8(0x13a)](_0xd901b8(0x211));if(_0x434eb9)_0x434eb9[_0xd901b8(0x230)]=_0xd901b8(0x15d);[_0xd901b8(0x142),_0xd901b8(0x166),'edit-transaction-modal'][_0xd901b8(0x226)](_0x3faab6=>{const _0x2e7302=_0xd901b8,_0x303275=document[_0x2e7302(0x13a)](_0x3faab6);if(_0x303275)_0x303275[_0x2e7302(0x1e6)][_0x2e7302(0xce)]('hidden');}),initializeFooter();if(document['getElementById'](_0xd901b8(0x1d8)))handleAuthPage();else document[_0xd901b8(0x13a)](_0xd901b8(0x203))&&(window[_0xd901b8(0xe7)]=function(_0x8d173d,_0x319465){const _0x1aa439=_0xd901b8,_0x488997=document[_0x1aa439(0x13a)](_0x8d173d);if(!_0x488997)return;function _0x4f644f(_0x4717f7){const _0x2f2cee=_0x1aa439;if(_0x4717f7[_0x2f2cee(0x20a)]==='Escape')_0x319465();}function _0xbd9af(_0x21d4ba){if(_0x21d4ba['target']===_0x488997)_0x319465();}document[_0x1aa439(0x1a9)](_0x1aa439(0x1a7),_0x4f644f),_0x488997['addEventListener'](_0x1aa439(0x107),_0xbd9af),_0x488997[_0x1aa439(0x229)]=()=>{const _0x5f00f4=_0x1aa439;document[_0x5f00f4(0x14b)](_0x5f00f4(0x1a7),_0x4f644f),_0x488997[_0x5f00f4(0x14b)](_0x5f00f4(0x107),_0xbd9af);};},window[_0xd901b8(0x184)]=showCategoryModal,window['hideCategoryModal']=hideCategoryModal,handleAppPage());const _0x423cc8=localStorage[_0xd901b8(0x14d)](_0xd901b8(0xbe));if(_0x423cc8)try{const _0x283b2c=JSON[_0xd901b8(0x228)](atob(_0x423cc8['split']('.')[0x1]));_0x283b2c&&_0x283b2c[_0xd901b8(0xe9)]===_0xd901b8(0x219)&&(document['getElementById'](_0xd901b8(0x224))['style'][_0xd901b8(0x1ac)]='block');}catch{}const _0x280e8b=document[_0xd901b8(0x1fc)](_0xd901b8(0x200));_0x280e8b&&_0x280e8b[_0xd901b8(0x1a9)](_0xd901b8(0x197),function(_0x111689){const _0x39e86b=_0xd901b8;_0x111689[_0x39e86b(0x106)](),sessionStorage[_0x39e86b(0x220)](_0x39e86b(0xcc),_0x39e86b(0x19e)),window['location'][_0x39e86b(0x202)]=_0x39e86b(0x1c0);});});async function handleAppPage(){const _0x4dbbf9=a0_0x27e8d5,_0x298049=document[_0x4dbbf9(0x13a)](_0x4dbbf9(0x21b)),_0x45e49=document[_0x4dbbf9(0x13a)](_0x4dbbf9(0xcb));_0x298049&&_0x45e49&&(_0x298049['classList']['remove'](_0x4dbbf9(0x108)),_0x45e49[_0x4dbbf9(0x1e6)][_0x4dbbf9(0xce)](_0x4dbbf9(0x108)));const _0x3d02a8=document['getElementById'](_0x4dbbf9(0x12a)),_0xbc3dab=document['getElementById'](_0x4dbbf9(0x215));_0x3d02a8&&_0xbc3dab&&(_0x3d02a8['classList'][_0x4dbbf9(0xce)]('active','bg-gradient-to-r',_0x4dbbf9(0x141),_0x4dbbf9(0x150),_0x4dbbf9(0x13f)),_0x3d02a8[_0x4dbbf9(0x1e6)][_0x4dbbf9(0x1ae)](_0x4dbbf9(0x163)),_0xbc3dab[_0x4dbbf9(0x1e6)][_0x4dbbf9(0x1ae)]('active',_0x4dbbf9(0x144),_0x4dbbf9(0x141),_0x4dbbf9(0x150),_0x4dbbf9(0x13f)),_0xbc3dab[_0x4dbbf9(0x1e6)][_0x4dbbf9(0xce)](_0x4dbbf9(0x163)));_0xbc3dab&&_0x3d02a8&&(_0xbc3dab[_0x4dbbf9(0x1a9)]('click',()=>{const _0x1729de=_0x4dbbf9;_0x298049[_0x1729de(0x1e6)][_0x1729de(0xce)](_0x1729de(0x108)),_0x45e49[_0x1729de(0x1e6)][_0x1729de(0x1ae)](_0x1729de(0x108)),_0xbc3dab[_0x1729de(0x1e6)]['add'](_0x1729de(0xc3),_0x1729de(0x144),_0x1729de(0x141),_0x1729de(0x150),_0x1729de(0x13f)),_0xbc3dab[_0x1729de(0x1e6)][_0x1729de(0x1ae)](_0x1729de(0x163)),_0x3d02a8[_0x1729de(0x1e6)][_0x1729de(0x1ae)](_0x1729de(0xc3),_0x1729de(0x144),'from-blue-600','to-purple-500',_0x1729de(0x13f)),_0x3d02a8[_0x1729de(0x1e6)]['add']('text-gray-500');}),_0x3d02a8[_0x4dbbf9(0x1a9)](_0x4dbbf9(0x197),()=>{const _0x2eead9=_0x4dbbf9;_0x45e49[_0x2eead9(0x1e6)]['add'](_0x2eead9(0x108)),_0x298049[_0x2eead9(0x1e6)]['remove'](_0x2eead9(0x108)),_0x3d02a8[_0x2eead9(0x1e6)][_0x2eead9(0xce)](_0x2eead9(0xc3),_0x2eead9(0x144),_0x2eead9(0x141),_0x2eead9(0x150),_0x2eead9(0x13f)),_0x3d02a8[_0x2eead9(0x1e6)][_0x2eead9(0x1ae)](_0x2eead9(0x163)),_0xbc3dab[_0x2eead9(0x1e6)]['remove'](_0x2eead9(0xc3),'bg-gradient-to-r',_0x2eead9(0x141),_0x2eead9(0x150),_0x2eead9(0x13f)),_0xbc3dab[_0x2eead9(0x1e6)]['add']('text-gray-500');}));const _0xa43fd5=document[_0x4dbbf9(0x177)]('form');_0xa43fd5[_0x4dbbf9(0x226)](_0x433885=>{const _0x2d7712=_0x4dbbf9;_0x433885[_0x2d7712(0x1a9)](_0x2d7712(0x1b6),_0x5b2401=>_0x5b2401[_0x2d7712(0x106)]());});const _0x492451=document[_0x4dbbf9(0x177)](_0x4dbbf9(0x1bf));_0x492451[_0x4dbbf9(0x226)](_0xea9dd0=>{const _0x5f0a7b=_0x4dbbf9;_0xea9dd0[_0x5f0a7b(0x1a9)]('input',_0xa825c6=>{const _0xa39f16=_0x5f0a7b,_0x28cea5=parseFloat(_0xa825c6[_0xa39f16(0x216)][_0xa39f16(0x187)]);_0x28cea5<0x0&&(_0xa825c6[_0xa39f16(0x216)]['value']=0x0);});});const _0x4b9484=document[_0x4dbbf9(0x13a)](_0x4dbbf9(0x222));_0x4b9484&&(_0x4b9484[_0x4dbbf9(0x1a9)](_0x4dbbf9(0x14e),_0x31d518=>{const _0x20aa63=_0x4dbbf9;let _0x4299b5=_0x31d518[_0x20aa63(0x216)][_0x20aa63(0x187)]['replace'](/[^\d]/g,'');if(!_0x4299b5){_0x31d518[_0x20aa63(0x216)][_0x20aa63(0x187)]='';return;}_0x4299b5=parseInt(_0x4299b5,0xa)['toLocaleString'](_0x20aa63(0x116)),_0x31d518[_0x20aa63(0x216)][_0x20aa63(0x187)]='$'+_0x4299b5;}),_0x4b9484['addEventListener'](_0x4dbbf9(0x1d3),_0x36f515=>{setTimeout(()=>{const _0x71825=a0_0x2dd6;_0x36f515[_0x71825(0x216)][_0x71825(0x17d)](_0x36f515[_0x71825(0x216)]['value'][_0x71825(0x145)],_0x36f515[_0x71825(0x216)][_0x71825(0x187)][_0x71825(0x145)]);},0x0);}));const _0x5318d0=document['getElementById'](_0x4dbbf9(0x234));_0x5318d0&&_0x5318d0[_0x4dbbf9(0x1a9)]('submit',async _0xb94444=>{const _0x43edd7=_0x4dbbf9;_0xb94444['preventDefault']();const _0x11db48=document[_0x43edd7(0x13a)]('amount');if(_0x11db48){let _0x51ddbb=_0x11db48[_0x43edd7(0x187)]['replace'](/[^\d]/g,'');_0x11db48[_0x43edd7(0x187)]=_0x51ddbb;}},!![]);}async function handleAuthPage(){const _0x4ff78b=a0_0x27e8d5,_0x2b2c5f=document[_0x4ff78b(0x13a)](_0x4ff78b(0x1d8)),_0xf13436=document[_0x4ff78b(0x13a)](_0x4ff78b(0xc6)),_0x1b96d3=document[_0x4ff78b(0x13a)](_0x4ff78b(0x1e0)),_0x5c30cd=document[_0x4ff78b(0x13a)]('tab-register'),_0x597449=document['getElementById'](_0x4ff78b(0x199));_0x1b96d3['className']='w-1/2\x20py-3\x20rounded-tl-xl\x20rounded-tr-none\x20text-gray-500\x20bg-white\x20font-semibold\x20text-lg\x20transition-colors',_0x5c30cd[_0x4ff78b(0x195)]='w-1/2\x20py-3\x20rounded-tr-xl\x20rounded-tl-none\x20text-gray-500\x20bg-white\x20font-semibold\x20text-lg\x20transition-colors',_0x1b96d3['classList'][_0x4ff78b(0xce)](_0x4ff78b(0xc3));function _0x200571(_0x49ef4b){const _0x5b488e=_0x4ff78b;_0x49ef4b===_0x5b488e(0x20d)?(_0x1b96d3[_0x5b488e(0x1e6)][_0x5b488e(0xce)](_0x5b488e(0x144),_0x5b488e(0x141),'to-purple-500','text-white'),_0x1b96d3['classList'][_0x5b488e(0x1ae)](_0x5b488e(0x163),'bg-white'),_0x5c30cd[_0x5b488e(0x1e6)][_0x5b488e(0x1ae)](_0x5b488e(0x144),_0x5b488e(0x141),_0x5b488e(0x150),_0x5b488e(0x13f)),_0x5c30cd[_0x5b488e(0x1e6)][_0x5b488e(0xce)](_0x5b488e(0x163),_0x5b488e(0x20b)),_0x2b2c5f[_0x5b488e(0x1e6)]['remove'](_0x5b488e(0x108)),_0xf13436[_0x5b488e(0x1e6)]['add'](_0x5b488e(0x108))):(_0x5c30cd[_0x5b488e(0x1e6)][_0x5b488e(0xce)](_0x5b488e(0x144),_0x5b488e(0x141),'to-purple-500',_0x5b488e(0x13f)),_0x5c30cd['classList'][_0x5b488e(0x1ae)](_0x5b488e(0x163),_0x5b488e(0x20b)),_0x1b96d3['classList'][_0x5b488e(0x1ae)](_0x5b488e(0x144),'from-blue-600','to-purple-500',_0x5b488e(0x13f)),_0x1b96d3['classList'][_0x5b488e(0xce)](_0x5b488e(0x163),'bg-white'),_0x2b2c5f[_0x5b488e(0x1e6)][_0x5b488e(0xce)]('hidden'),_0xf13436[_0x5b488e(0x1e6)][_0x5b488e(0x1ae)](_0x5b488e(0x108)));}_0x200571(_0x4ff78b(0x20d)),_0x1b96d3[_0x4ff78b(0x1a9)]('click',_0x4e7ee0=>{const _0x404538=_0x4ff78b;_0x4e7ee0[_0x404538(0x106)](),_0x200571('login'),_0x597449[_0x404538(0x195)]=_0x404538(0x1c8);}),_0x5c30cd[_0x4ff78b(0x1a9)]('click',_0x26a033=>{const _0x521dd6=_0x4ff78b;_0x26a033[_0x521dd6(0x106)](),_0x200571(_0x521dd6(0x12f)),_0x597449[_0x521dd6(0x195)]=_0x521dd6(0x1c8);});try{const _0xce5c23=localStorage[_0x4ff78b(0x14d)](_0x4ff78b(0xbe));if(_0xce5c23){window[_0x4ff78b(0x1c7)]['replace']('/app.html');return;}}catch(_0x2e401b){console[_0x4ff78b(0xdb)](_0x4ff78b(0x129),_0x2e401b);}_0x2b2c5f['addEventListener'](_0x4ff78b(0x1b6),async _0x262159=>{const _0x178ff9=_0x4ff78b;_0x262159[_0x178ff9(0x106)]();const _0x163101=document['getElementById'](_0x178ff9(0x153))['value']['trim'](),_0x38c5f9=document[_0x178ff9(0x13a)](_0x178ff9(0x217))['value'];if(!_0x163101||!_0x38c5f9){_0x368e82(_0x178ff9(0x125),_0x178ff9(0xdb));return;}if(!isValidEmail(_0x163101)){_0x368e82('Por\x20favor\x20ingresa\x20un\x20email\x20válido',_0x178ff9(0xdb));return;}showLoading(_0x178ff9(0x1ab),!![]);try{const _0x3b98a2=await fetch(_0x178ff9(0xd2),{'method':_0x178ff9(0x14c),'headers':{'Content-Type':_0x178ff9(0x162)},'body':JSON[_0x178ff9(0x17e)]({'email':_0x163101,'password':_0x38c5f9})}),_0x17d18b=await _0x3b98a2['json']();!_0x3b98a2['ok']?_0x368e82(_0x17d18b[_0x178ff9(0x118)]||_0x178ff9(0x1ad),_0x178ff9(0xdb)):(localStorage[_0x178ff9(0x220)](_0x178ff9(0xbe),_0x17d18b[_0x178ff9(0x14a)]),showNotification(_0x178ff9(0x1e9),_0x178ff9(0x120)),setTimeout(()=>window[_0x178ff9(0x1c7)]['replace'](_0x178ff9(0x1dd)),0x3e8));}catch(_0x188355){_0x368e82(_0x178ff9(0x160),'error');}finally{showLoading('login-submit',![]);}}),_0xf13436['addEventListener'](_0x4ff78b(0x1b6),async _0x3b5914=>{const _0x4c8a93=_0x4ff78b;_0x3b5914[_0x4c8a93(0x106)]();const _0x4e366a=document[_0x4c8a93(0x13a)](_0x4c8a93(0x10c))[_0x4c8a93(0x187)][_0x4c8a93(0xf4)](),_0x5c85a2=document[_0x4c8a93(0x13a)](_0x4c8a93(0x231))[_0x4c8a93(0x187)],_0x184c9d=document['getElementById']('register-first-name')[_0x4c8a93(0x187)]['trim'](),_0x580380=document[_0x4c8a93(0x13a)](_0x4c8a93(0x19c))[_0x4c8a93(0x187)][_0x4c8a93(0xf4)]();if(!_0x4e366a||!_0x5c85a2||!_0x184c9d||!_0x580380){_0x368e82(_0x4c8a93(0x125),'error');return;}if(!isValidEmail(_0x4e366a)){_0x368e82('Por\x20favor\x20ingresa\x20un\x20email\x20válido','error');return;}if(_0x5c85a2[_0x4c8a93(0x145)]<0x6){_0x368e82(_0x4c8a93(0x10d),'error');return;}showLoading(_0x4c8a93(0xdf),!![]);try{const _0x20b067=await fetch('/auth/register',{'method':_0x4c8a93(0x14c),'headers':{'Content-Type':'application/json'},'body':JSON[_0x4c8a93(0x17e)]({'email':_0x4e366a,'password':_0x5c85a2,'firstName':_0x184c9d,'lastName':_0x580380})}),_0x1dbd9f=await _0x20b067[_0x4c8a93(0x167)]();!_0x20b067['ok']?_0x368e82(_0x1dbd9f['message']||_0x4c8a93(0x1a8),_0x4c8a93(0xdb)):(localStorage['setItem'](_0x4c8a93(0xbe),_0x1dbd9f[_0x4c8a93(0x14a)]),_0x368e82(_0x4c8a93(0xec),_0x4c8a93(0x120)),_0xf13436[_0x4c8a93(0x11a)](),setTimeout(()=>window[_0x4c8a93(0x1c7)][_0x4c8a93(0xff)](),0x4b0));}catch(_0x5468c0){_0x368e82(_0x4c8a93(0x160),_0x4c8a93(0xdb));}finally{showLoading(_0x4c8a93(0xdf),![]);}});function _0x368e82(_0x44ab6e,_0x5f07bc){const _0xca8488=_0x4ff78b;_0x597449['textContent']=_0x44ab6e,_0x597449['className']=_0xca8488(0x173)+(_0x5f07bc===_0xca8488(0xdb)?_0xca8488(0x1bb):_0xca8488(0x22a));}}let refreshTimeout;function debounceRefresh(_0x521889,_0x1cff49=0x12c){clearTimeout(refreshTimeout),refreshTimeout=setTimeout(_0x521889,_0x1cff49);}async function refreshCategoriesUI(){const _0x16cedf=a0_0x27e8d5;try{showLoading(_0x16cedf(0x1b2),!![]);let _0x51f12e=await getCategories();_0x51f12e=_0x51f12e[_0x16cedf(0x172)]()['sort']((_0x109cc2,_0x22f04b)=>_0x109cc2['name'][_0x16cedf(0x13c)](_0x22f04b[_0x16cedf(0x1ed)],'es')),renderCategorySelector(_0x51f12e),renderCategoryList(_0x51f12e);}catch(_0x4d6e31){console[_0x16cedf(0xdb)](_0x16cedf(0x112),_0x4d6e31),showNotification(_0x16cedf(0x1b0),'error');}finally{showLoading(_0x16cedf(0x1b2),![]);}}async function refreshBudgetsUI(){const _0x321d20=a0_0x27e8d5;try{showLoading(_0x321d20(0x1a5),!![]);const _0x1ff844=await getBudgets();renderBudgetList(_0x1ff844);}catch(_0x50a034){console[_0x321d20(0xdb)](_0x321d20(0x104),_0x50a034),showNotification(_0x321d20(0xf1),_0x321d20(0xdb));}finally{showLoading(_0x321d20(0x1a5),![]);}}async function refreshTransactionsUI(){const _0x1186ee=a0_0x27e8d5;try{showLoading(_0x1186ee(0x140),!![]);const _0x57aec0=await getTransactions();renderTransactionList(_0x57aec0);}catch(_0x149619){console[_0x1186ee(0xdb)](_0x1186ee(0x1bc),_0x149619),showNotification(_0x1186ee(0x209),_0x1186ee(0xdb));}finally{showLoading('transactions-loading',![]);}}async function refreshChartsUI(){const _0x5259e9=a0_0x27e8d5;try{showLoading(_0x5259e9(0x16d),!![]);const _0x3e2d1a=await getChartData();renderCharts(_0x3e2d1a);}catch(_0x566111){console[_0x5259e9(0xdb)](_0x5259e9(0x190),_0x566111),showNotification(_0x5259e9(0x207),_0x5259e9(0xdb));}finally{showLoading(_0x5259e9(0x16d),![]);}}async function fetchWithAuth(_0x42899a,_0x579a78={}){const _0x50e65b=a0_0x27e8d5,_0xd68a87=localStorage[_0x50e65b(0x14d)]('jwt_token');if(!_0xd68a87)return null;try{const _0x4569f8=await fetch(_0x42899a,{..._0x579a78,'headers':{'Content-Type':'application/json','Authorization':_0x50e65b(0x1f4)+_0xd68a87,..._0x579a78[_0x50e65b(0x1c1)]}});if(!_0x4569f8['ok'])throw new Error(_0x50e65b(0x1bd)+_0x4569f8['status']);return _0x4569f8;}catch(_0xbb2b99){console[_0x50e65b(0xdb)](_0x50e65b(0x16c),_0xbb2b99);throw _0xbb2b99;}}let currentUser=null,currentMonth=new Date()[a0_0x27e8d5(0x170)](),currentYear=new Date()[a0_0x27e8d5(0x1af)]();async function getCurrentUser(){const _0x3f981d=a0_0x27e8d5,_0x51da18=localStorage[_0x3f981d(0x14d)](_0x3f981d(0xbe));if(!_0x51da18)return null;try{const _0x405136=JSON[_0x3f981d(0x228)](atob(_0x51da18[_0x3f981d(0x196)]('.')[0x1]));if(_0x405136[_0x3f981d(0xe9)]==='admin')return{'id':_0x405136['sub'],'email':_0x405136['email'],'first_name':_0x405136[_0x3f981d(0x15f)],'last_name':_0x405136['last_name'],'role':_0x3f981d(0x219)};if(_0x405136['first_name']&&_0x405136['last_name'])return{'id':_0x405136[_0x3f981d(0xf8)],'email':_0x405136[_0x3f981d(0x1f1)],'first_name':_0x405136[_0x3f981d(0x15f)],'last_name':_0x405136['last_name'],'role':_0x405136[_0x3f981d(0xe9)]||'user'};if(_0x405136[_0x3f981d(0xe9)]&&_0x405136['role']!==_0x3f981d(0x219))return{'id':_0x405136[_0x3f981d(0xf8)],'email':_0x405136[_0x3f981d(0x1f1)],'role':_0x405136[_0x3f981d(0xe9)]};return{'id':_0x405136[_0x3f981d(0xf8)],'email':_0x405136[_0x3f981d(0x1f1)],'role':_0x3f981d(0x1ef)};}catch{return null;}}async function getCategories(){const _0x51d64c=a0_0x27e8d5;try{const _0x16fc54=localStorage[_0x51d64c(0x14d)](_0x51d64c(0xbe));if(!_0x16fc54)throw new Error(_0x51d64c(0x17f));const _0x12ee9f=await fetch('/api/categories',{'headers':{'Authorization':_0x51d64c(0x1f4)+_0x16fc54}});if(!_0x12ee9f['ok'])throw new Error(_0x51d64c(0x1bd)+_0x12ee9f['status']);const _0x2bc8cc=await _0x12ee9f['json']();return console[_0x51d64c(0x212)](_0x51d64c(0x12c),currentUser['id'],_0x2bc8cc),_0x2bc8cc||[];}catch(_0x44a42b){return console[_0x51d64c(0xdb)]('Error\x20al\x20obtener\x20categorías:',_0x44a42b),showNotification(_0x51d64c(0x123),_0x51d64c(0xdb)),[];}}async function getTransactions(){const _0x54fe9c=a0_0x27e8d5;try{const _0x46b5f4=localStorage[_0x54fe9c(0x14d)](_0x54fe9c(0xbe));if(!_0x46b5f4)throw new Error(_0x54fe9c(0x17f));const _0x5c3b9c=currentYear+'-'+String(currentMonth+0x1)[_0x54fe9c(0x1c4)](0x2,'0'),_0x25291f=await fetch(_0x54fe9c(0x210),{'headers':{'Authorization':_0x54fe9c(0x1f4)+_0x46b5f4}});if(!_0x25291f['ok'])throw new Error(_0x54fe9c(0x1bd)+_0x25291f[_0x54fe9c(0x225)]);const _0x21b056=await _0x25291f[_0x54fe9c(0x167)]();return _0x21b056[_0x54fe9c(0x10a)](_0x411c43=>_0x411c43[_0x54fe9c(0x135)]===_0x5c3b9c);}catch(_0x3a4847){return console[_0x54fe9c(0xdb)](_0x54fe9c(0x103),_0x3a4847),[];}}async function getBudgets(){const _0x31e86a=a0_0x27e8d5;try{const _0x35725f=localStorage['getItem'](_0x31e86a(0xbe));if(!_0x35725f)throw new Error(_0x31e86a(0x17f));const _0x26283b=currentYear+'-'+String(currentMonth+0x1)[_0x31e86a(0x1c4)](0x2,'0'),_0x1d6d03=await fetch('/api/budgets',{'headers':{'Authorization':_0x31e86a(0x1f4)+_0x35725f}});if(!_0x1d6d03['ok'])throw new Error(_0x31e86a(0x1bd)+_0x1d6d03[_0x31e86a(0x225)]);const _0xf7c670=await _0x1d6d03[_0x31e86a(0x167)]();return console[_0x31e86a(0x212)]('Buscando\x20presupuesto\x20para:',_0x26283b,_0x31e86a(0xc0),_0xf7c670['map'](_0x4171c0=>_0x4171c0[_0x31e86a(0x135)])),_0xf7c670[_0x31e86a(0x10a)](_0x4cc590=>_0x4cc590['month']===_0x26283b);}catch(_0x181c89){return console[_0x31e86a(0xdb)](_0x31e86a(0x1be),_0x181c89),[];}}function renderCategorySelector(_0x32c750){const _0x4b99d8=a0_0x27e8d5,_0x152cd2=document[_0x4b99d8(0x13a)](_0x4b99d8(0x193));if(!_0x152cd2)return;_0x152cd2['innerHTML']=_0x4b99d8(0x204),_0x32c750[_0x4b99d8(0x226)](_0x107788=>{const _0x3490ed=_0x4b99d8,_0x21881d=document[_0x3490ed(0x157)]('option');_0x21881d['value']=_0x107788['id'],_0x21881d[_0x3490ed(0x230)]=_0x107788[_0x3490ed(0x1ed)],_0x152cd2[_0x3490ed(0x1e8)](_0x21881d);});}function renderTransactionList(_0x22c238){const _0x268e0d=a0_0x27e8d5,_0x25ae51=document['getElementById'](_0x268e0d(0xd8));if(!_0x25ae51)return;if(_0x22c238[_0x268e0d(0x145)]===0x0){_0x25ae51[_0x268e0d(0x181)]='<p\x20class=\x22text-gray-500\x20text-center\x20py-8\x22>No\x20hay\x20transacciones\x20este\x20mes</p>';return;}_0x22c238[_0x268e0d(0xfa)]((_0x38230c,_0x1496ba)=>new Date(_0x1496ba[_0x268e0d(0x18a)])-new Date(_0x38230c['created_at'])),_0x25ae51[_0x268e0d(0x181)]=_0x22c238['map'](_0x2b0931=>{const _0xc57797=_0x268e0d,_0x3a32e5=!_0x2b0931['category_name']||_0x2b0931[_0xc57797(0x110)]===_0xc57797(0x11e),_0x1cdf4d=_0x3a32e5?_0xc57797(0x1cb):_0xc57797(0x192)+_0x2b0931['category_name']+_0xc57797(0xf6);return _0xc57797(0x208)+_0x2b0931[_0xc57797(0x128)]+'</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x22>'+_0x1cdf4d+_0xc57797(0x17c)+(_0x2b0931[_0xc57797(0x1c6)]?_0xc57797(0x155)+_0x2b0931[_0xc57797(0x1c6)]+_0xc57797(0x1f6):'')+_0xc57797(0x188)+(_0x2b0931[_0xc57797(0x201)]===_0xc57797(0x1d0)?_0xc57797(0x14f):_0xc57797(0x11f))+'\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2b0931['type']===_0xc57797(0x1d0)?'+':'-')+formatCurrency(_0x2b0931['amount'])+_0xc57797(0x1d6)+new Date(_0x2b0931[_0xc57797(0x18a)])[_0xc57797(0x115)]()+_0xc57797(0x161)+_0x2b0931['id']+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22w-4\x20h-4\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M11\x205H6a2\x202\x200\x2000-2\x202v11a2\x202\x200\x20002\x202h11a2\x202\x200\x20002-2v-5m-1.414-9.414a2\x202\x200\x20112.828\x202.828L11.828\x2015H9v-2.828l8.586-8.586z\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-delete\x22\x20onclick=\x22deleteTransaction(\x27'+_0x2b0931['id']+'\x27)\x22\x20title=\x22Eliminar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22w-4\x20h-4\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M6\x2018L18\x206M6\x206l12\x2012\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';})[_0x268e0d(0x22d)]('');}function renderCategoryList(_0x3707a1){const _0x8c37ff=a0_0x27e8d5;console[_0x8c37ff(0x212)]('Categorías\x20cargadas:',_0x3707a1);}function renderBudgetList(_0x122873){const _0x33f4fd=a0_0x27e8d5;console['log'](_0x33f4fd(0x20f),_0x122873);}async function getChartData(){const _0x1ddb8e=a0_0x27e8d5;try{const _0x132581=await getTransactions(),_0x52e960=await getCategories(),_0x3646b4={},_0x1eba41={};return _0x132581[_0x1ddb8e(0x226)](_0x3271a4=>{const _0x580b82=_0x1ddb8e,_0x41b7b2=_0x3271a4['category_name']||'Sin\x20categoría',_0x284f37=Number(_0x3271a4[_0x580b82(0x222)])||0x0;if(_0x3271a4[_0x580b82(0x201)]===_0x580b82(0x1f0))_0x3646b4[_0x41b7b2]=(_0x3646b4[_0x41b7b2]||0x0)+_0x284f37;else _0x3271a4[_0x580b82(0x201)]===_0x580b82(0x1d0)&&(_0x1eba41[_0x41b7b2]=(_0x1eba41[_0x41b7b2]||0x0)+_0x284f37);}),{'expenses':_0x3646b4,'income':_0x1eba41,'categories':_0x52e960};}catch(_0x4a86a3){return console[_0x1ddb8e(0xdb)](_0x1ddb8e(0x16a),_0x4a86a3),{'expenses':{},'income':{},'categories':[]};}}let expensesChartInstance=null,incomeChartInstance=null;function renderCharts(_0x3ab253){const _0x44b19f=a0_0x27e8d5;console[_0x44b19f(0x212)](_0x44b19f(0xda),_0x3ab253);const _0x38c55f=document[_0x44b19f(0x13a)](_0x44b19f(0xea)),_0x242f09=document['getElementById'](_0x44b19f(0xde)),_0x4d3a44=document[_0x44b19f(0x13a)](_0x44b19f(0xe4)),_0x44140d=Object['keys'](_0x3ab253[_0x44b19f(0x21e)])[_0x44b19f(0x145)]>0x0,_0x14a650=Object[_0x44b19f(0x1c5)](_0x3ab253[_0x44b19f(0x1d0)])['length']>0x0;_0x38c55f&&(!_0x44140d&&!_0x14a650?_0x38c55f[_0x44b19f(0xf5)][_0x44b19f(0x1ac)]=_0x44b19f(0x1e7):_0x38c55f[_0x44b19f(0xf5)]['display']='');if(_0x242f09){if(expensesChartInstance)expensesChartInstance['destroy']();_0x44140d?(expensesChartInstance=new Chart(_0x242f09,{'type':_0x44b19f(0x139),'data':{'labels':Object[_0x44b19f(0x1c5)](_0x3ab253[_0x44b19f(0x21e)]),'datasets':[{'data':Object[_0x44b19f(0x22c)](_0x3ab253[_0x44b19f(0x21e)]),'backgroundColor':['#ef4444',_0x44b19f(0x1e3),_0x44b19f(0x10e),_0x44b19f(0x1d7),_0x44b19f(0x121),_0x44b19f(0x19a),'#06b6d4',_0x44b19f(0x149)]}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x44b19f(0x213)}}}}),_0x242f09[_0x44b19f(0xf5)][_0x44b19f(0x1ac)]=''):(_0x242f09[_0x44b19f(0x176)]('2d')[_0x44b19f(0x174)](0x0,0x0,_0x242f09[_0x44b19f(0x158)],_0x242f09[_0x44b19f(0x126)]),expensesChartInstance=null,_0x242f09[_0x44b19f(0xf5)]['display']='none');}if(_0x4d3a44){if(incomeChartInstance)incomeChartInstance[_0x44b19f(0x1ce)]();_0x14a650?(incomeChartInstance=new Chart(_0x4d3a44,{'type':_0x44b19f(0x139),'data':{'labels':Object[_0x44b19f(0x1c5)](_0x3ab253[_0x44b19f(0x1d0)]),'datasets':[{'data':Object[_0x44b19f(0x22c)](_0x3ab253[_0x44b19f(0x1d0)]),'backgroundColor':['#10b981','#059669',_0x44b19f(0x13d),_0x44b19f(0x147),_0x44b19f(0xd9),_0x44b19f(0x17b),_0x44b19f(0x1da),_0x44b19f(0xfb)]}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x44b19f(0x213)}}}}),_0x4d3a44[_0x44b19f(0xf5)][_0x44b19f(0x1ac)]=''):(_0x4d3a44[_0x44b19f(0x176)]('2d')[_0x44b19f(0x174)](0x0,0x0,_0x4d3a44[_0x44b19f(0x158)],_0x4d3a44['height']),incomeChartInstance=null,_0x4d3a44[_0x44b19f(0xf5)][_0x44b19f(0x1ac)]=_0x44b19f(0x1e7));}}function setupModalCloseEvents(_0x1fbfec,_0x33534f){const _0x3c7d45=a0_0x27e8d5,_0x2bbf62=document[_0x3c7d45(0x13a)](_0x1fbfec);if(!_0x2bbf62)return;function _0x3319cb(_0x2af11c){if(_0x2af11c['key']==='Escape')_0x33534f();}function _0x254d97(_0x2053bc){const _0x25d557=_0x3c7d45;if(_0x2053bc[_0x25d557(0x216)]===_0x2bbf62)_0x33534f();}document[_0x3c7d45(0x1a9)]('keydown',_0x3319cb),_0x2bbf62[_0x3c7d45(0x1a9)](_0x3c7d45(0x107),_0x254d97),_0x2bbf62['_cleanup']=()=>{const _0x425bc9=_0x3c7d45;document['removeEventListener'](_0x425bc9(0x1a7),_0x3319cb),_0x2bbf62['removeEventListener']('mousedown',_0x254d97);};}function showCategoryModal(){const _0x5187d8=a0_0x27e8d5,_0x4989b4=document[_0x5187d8(0x13a)](_0x5187d8(0x142));if(!_0x4989b4){console[_0x5187d8(0xdb)]('No\x20se\x20encontró\x20el\x20modal\x20de\x20categorías');return;}_0x4989b4[_0x5187d8(0x181)]=_0x5187d8(0x1f7),_0x4989b4['classList'][_0x5187d8(0x1ae)]('hidden'),loadCategoriesList(),setupCategoryForm(),setupModalCloseEvents(_0x5187d8(0x142),hideCategoryModal),document[_0x5187d8(0x13a)](_0x5187d8(0x1a3))[_0x5187d8(0x1f2)]=hideCategoryModal;}function hideCategoryModal(){const _0x34d215=a0_0x27e8d5,_0x388a42=document['getElementById'](_0x34d215(0x142));if(_0x388a42){_0x388a42[_0x34d215(0x1e6)][_0x34d215(0xce)](_0x34d215(0x108));if(_0x388a42['_cleanup'])_0x388a42[_0x34d215(0x229)]();}}async function loadCategoriesList(){const _0x5c3ff5=a0_0x27e8d5,_0x1d677d=document[_0x5c3ff5(0x13a)](_0x5c3ff5(0x1a4));if(!_0x1d677d){console[_0x5c3ff5(0xdb)](_0x5c3ff5(0x1aa));return;}try{let _0x40f6e3=await getCategories();if(!_0x40f6e3||_0x40f6e3[_0x5c3ff5(0x145)]===0x0){_0x1d677d['innerHTML']=_0x5c3ff5(0x18d),renderCategorySelector([]);return;}_0x40f6e3=_0x40f6e3[_0x5c3ff5(0x172)]()[_0x5c3ff5(0xfa)]((_0x114097,_0x5adf6e)=>_0x114097[_0x5c3ff5(0x1ed)]['localeCompare'](_0x5adf6e[_0x5c3ff5(0x1ed)],'es')),_0x1d677d['innerHTML']=_0x40f6e3[_0x5c3ff5(0x17a)](_0x29a72e=>_0x5c3ff5(0x1ec)+_0x29a72e[_0x5c3ff5(0x1ed)]+_0x5c3ff5(0x12b)+_0x29a72e['id']+_0x5c3ff5(0x164))[_0x5c3ff5(0x22d)](''),renderCategorySelector(_0x40f6e3),console[_0x5c3ff5(0x212)](_0x5c3ff5(0x1b9),_0x40f6e3);}catch(_0xbade18){console[_0x5c3ff5(0xdb)](_0x5c3ff5(0xcd),_0xbade18),_0x1d677d[_0x5c3ff5(0x181)]=_0x5c3ff5(0x1ee);}}function setupCategoryForm(){const _0x4e4095=a0_0x27e8d5,_0x5a7d91=document[_0x4e4095(0x13a)](_0x4e4095(0x218));if(!_0x5a7d91)return;_0x5a7d91[_0x4e4095(0x1a9)]('submit',async _0x3cae28=>{const _0x2fb3be=_0x4e4095;_0x3cae28[_0x2fb3be(0x106)]();const _0x50a1e1=document[_0x2fb3be(0x13a)](_0x2fb3be(0x1db)),_0x5f281f=_0x50a1e1[_0x2fb3be(0x187)]['trim']();if(!_0x5f281f){showNotification(_0x2fb3be(0x131),_0x2fb3be(0xdb));return;}try{await addCategory({'name':_0x5f281f}),_0x50a1e1[_0x2fb3be(0x187)]='',await loadCategoriesList(),await refreshCategoriesUI(),showNotification(_0x2fb3be(0x137),_0x2fb3be(0x120));}catch(_0x1f6a6e){console[_0x2fb3be(0xdb)](_0x2fb3be(0x143),_0x1f6a6e),showNotification(_0x2fb3be(0xf2),_0x2fb3be(0xdb));}});}async function deleteCategory(_0x3b00e1){const _0x970c4f=a0_0x27e8d5;showConfirmModal({'title':'Eliminar\x20categoría','message':_0x970c4f(0x15a),'onConfirm':async()=>{const _0x196bf8=_0x970c4f;try{const _0x249c5c=localStorage['getItem'](_0x196bf8(0xbe)),_0x1a0e96=await fetch('/api/categories/'+_0x3b00e1,{'method':_0x196bf8(0x1fb),'headers':{'Authorization':_0x196bf8(0x1f4)+_0x249c5c}});if(!_0x1a0e96['ok'])throw new Error(_0x196bf8(0x152));showNotification(_0x196bf8(0xdd),_0x196bf8(0x120)),await refreshCategoriesUI();if(typeof loadCategoriesList===_0x196bf8(0xd1))await loadCategoriesList();}catch(_0x5deb5f){showNotification(_0x196bf8(0xc1),'error');}}});}let currentEditTransactionId=null;async function editTransaction(_0xae26c7){const _0x1edd33=a0_0x27e8d5;console[_0x1edd33(0x212)](_0x1edd33(0x1a1),_0xae26c7),currentEditTransactionId=_0xae26c7;const _0xa21ca1=document[_0x1edd33(0x13a)](_0x1edd33(0x22b)),_0x2bcf6a=document[_0x1edd33(0x13a)](_0x1edd33(0x114)),_0x2edd8d=document[_0x1edd33(0x13a)](_0x1edd33(0x11c)),_0x5b9505=document[_0x1edd33(0x13a)](_0x1edd33(0x233)),_0x4ac930=document[_0x1edd33(0x13a)](_0x1edd33(0x134)),_0x30810f=document['getElementById'](_0x1edd33(0x11d));if(!_0xa21ca1||!_0x2bcf6a||!_0x2edd8d||!_0x5b9505||!_0x4ac930||!_0x30810f){console[_0x1edd33(0xdb)]('[editTransaction]\x20Elementos\x20del\x20modal\x20no\x20encontrados');return;}if(!_0xae26c7){showNotification('ID\x20de\x20transacción\x20inválido',_0x1edd33(0xdb)),console[_0x1edd33(0xdb)](_0x1edd33(0x101),_0xae26c7);return;}const _0x3649c8=localStorage['getItem'](_0x1edd33(0xbe));if(!_0x3649c8){showNotification('No\x20hay\x20sesión\x20activa','error');return;}const _0x4e8048=await fetch(_0x1edd33(0x210),{'headers':{'Authorization':_0x1edd33(0x1f4)+_0x3649c8}});if(!_0x4e8048['ok']){showNotification('Error\x20al\x20obtener\x20transacción',_0x1edd33(0xdb)),console[_0x1edd33(0xdb)](_0x1edd33(0x1cf),_0x4e8048[_0x1edd33(0x127)]);return;}const _0xfc4f75=await _0x4e8048[_0x1edd33(0x167)](),_0xc77308=_0xfc4f75[_0x1edd33(0x1d5)](_0x1435d3=>_0x1435d3['id']===_0xae26c7);if(!_0xc77308){showNotification(_0x1edd33(0x171),_0x1edd33(0xdb)),console[_0x1edd33(0xdb)]('[editTransaction]\x20Transacción\x20no\x20encontrada\x20para\x20id:',_0xae26c7);return;}_0x2edd8d[_0x1edd33(0x187)]=_0xc77308[_0x1edd33(0x128)]||'',_0x5b9505[_0x1edd33(0x187)]=_0xc77308[_0x1edd33(0x222)]||'',_0x30810f['value']=_0xc77308['comments']||'';const _0xe58ad8=await fetch(_0x1edd33(0x13e),{'headers':{'Authorization':_0x1edd33(0x1f4)+_0x3649c8}});if(!_0xe58ad8['ok']){showNotification(_0x1edd33(0x123),_0x1edd33(0xdb)),console[_0x1edd33(0xdb)](_0x1edd33(0xe8),_0xe58ad8[_0x1edd33(0x127)]);return;}const _0x44b998=await _0xe58ad8[_0x1edd33(0x167)]();_0x4ac930[_0x1edd33(0x181)]=_0x44b998[_0x1edd33(0x17a)](_0x27ab76=>_0x1edd33(0x169)+_0x27ab76['id']+'\x22\x20'+(_0x27ab76['id']===_0xc77308[_0x1edd33(0x22e)]?_0x1edd33(0x21c):'')+'>'+_0x27ab76[_0x1edd33(0x1ed)]+_0x1edd33(0xc5))[_0x1edd33(0x22d)](''),_0xa21ca1[_0x1edd33(0x1e6)][_0x1edd33(0x1ae)](_0x1edd33(0x108)),setupModalCloseEvents(_0x1edd33(0x22b),hideEditTransactionModal);}function hideEditTransactionModal(){const _0x2658b2=a0_0x27e8d5,_0x790f8f=document[_0x2658b2(0x13a)](_0x2658b2(0x22b));if(_0x790f8f){_0x790f8f[_0x2658b2(0x1e6)][_0x2658b2(0xce)]('hidden');if(_0x790f8f[_0x2658b2(0x229)])_0x790f8f['_cleanup']();}currentEditTransactionId=null;}const closeEditTransactionBtn=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x11b));closeEditTransactionBtn&&closeEditTransactionBtn[a0_0x27e8d5(0x1a9)](a0_0x27e8d5(0x197),hideEditTransactionModal);const editTransactionForm=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x114));editTransactionForm&&editTransactionForm['addEventListener'](a0_0x27e8d5(0x1b6),async _0x19a9b4=>{const _0x52ab42=a0_0x27e8d5;_0x19a9b4[_0x52ab42(0x106)]();if(!currentEditTransactionId){showNotification('ID\x20de\x20transacción\x20inválido',_0x52ab42(0xdb)),console[_0x52ab42(0xdb)]('[editTransactionForm]\x20currentEditTransactionId\x20inválido:',currentEditTransactionId);return;}const _0x43d1dd=document[_0x52ab42(0x13a)](_0x52ab42(0x11c))['value'][_0x52ab42(0xf4)](),_0x5913f8=parseFloat(document[_0x52ab42(0x13a)](_0x52ab42(0x233))[_0x52ab42(0x187)]),_0x58293c=document[_0x52ab42(0x13a)](_0x52ab42(0x134))['value'],_0x2bd7c7=document[_0x52ab42(0x13a)]('edit-comments')[_0x52ab42(0x187)]['trim']();if(!_0x43d1dd){showNotification(_0x52ab42(0x1fa),'error');return;}if(!_0x5913f8||_0x5913f8<=0x0){showNotification(_0x52ab42(0x189),'error');return;}if(!_0x58293c){showNotification(_0x52ab42(0x15e),'error');return;}try{const _0x725fd3=localStorage[_0x52ab42(0x14d)](_0x52ab42(0xbe));if(!_0x725fd3){showNotification(_0x52ab42(0x17f),_0x52ab42(0xdb));return;}console[_0x52ab42(0x212)]('[editTransactionForm]\x20update',{'description':_0x43d1dd,'amount':_0x5913f8,'category_id':_0x58293c,'comments':_0x2bd7c7,'id':currentEditTransactionId,'user_id':currentUser['id']});const _0x32ff76=await fetch(_0x52ab42(0x210),{'method':'PUT','headers':{'Authorization':'Bearer\x20'+_0x725fd3,'Content-Type':_0x52ab42(0x162)},'body':JSON['stringify']({'description':_0x43d1dd,'amount':_0x5913f8,'category_id':_0x58293c,'comments':_0x2bd7c7,'id':currentEditTransactionId,'user_id':currentUser['id']})});if(!_0x32ff76['ok']){showNotification(_0x52ab42(0x186),'error'),console['error'](_0x52ab42(0x1f3),_0x32ff76[_0x52ab42(0x127)]);return;}showNotification(_0x52ab42(0x10f),'success'),hideEditTransactionModal(),await refreshAllMonthlyUI();}catch(_0xffbe1e){showNotification('Error\x20inesperado\x20al\x20actualizar\x20transacción',_0x52ab42(0xdb)),console[_0x52ab42(0xdb)](_0x52ab42(0x119),_0xffbe1e);}});function reassignCategory(_0x5daf7c){const _0x54d48e=a0_0x27e8d5;showNotification(_0x54d48e(0x206),_0x54d48e(0xbf));}async function deleteTransaction(_0x1279f6){const _0x51b368=a0_0x27e8d5;showConfirmModal({'title':'Eliminar\x20transacción','message':_0x51b368(0xeb),'onConfirm':async()=>{const _0x2060ea=_0x51b368,_0x3186c9=localStorage['getItem'](_0x2060ea(0xbe));if(!_0x3186c9){showNotification(_0x2060ea(0x17f),'error');return;}try{const _0x499f08=await fetch(_0x2060ea(0x210),{'method':_0x2060ea(0x1fb),'headers':{'Authorization':'Bearer\x20'+_0x3186c9,'Content-Type':_0x2060ea(0x162)},'body':JSON[_0x2060ea(0x17e)]({'id':_0x1279f6,'user_id':currentUser['id']})});if(!_0x499f08['ok'])throw new Error(_0x2060ea(0x1bd)+_0x499f08[_0x2060ea(0x225)]);showNotification(_0x2060ea(0x10b),_0x2060ea(0x120)),await refreshAllMonthlyUI(),await updateMonthlyTotals();}catch(_0x219aab){showNotification(_0x2060ea(0x1ea),_0x2060ea(0xdb)),console[_0x2060ea(0xdb)](_0x2060ea(0xe5),_0x219aab);}}});}async function addTransaction(_0x300266){const _0x68b08e=a0_0x27e8d5;try{const _0x5074f7=localStorage[_0x68b08e(0x14d)](_0x68b08e(0xbe));if(!_0x5074f7)throw new Error(_0x68b08e(0x17f));const _0x3957dc=await fetch(_0x68b08e(0x210),{'method':_0x68b08e(0x14c),'headers':{'Authorization':_0x68b08e(0x1f4)+_0x5074f7,'Content-Type':'application/json'},'body':JSON[_0x68b08e(0x17e)](_0x300266)});if(!_0x3957dc['ok']){const _0xfedfc9=await _0x3957dc[_0x68b08e(0x167)]();throw _0xfedfc9;}return showNotification(_0x68b08e(0xf9),_0x68b08e(0x120)),await refreshTransactionsUI(),await refreshChartsUI(),await updateMonthlyTotals(),await _0x3957dc[_0x68b08e(0x167)]();}catch(_0x105460){console[_0x68b08e(0xdb)](_0x68b08e(0x178),_0x105460),showNotification('Error\x20al\x20agregar\x20transacción',_0x68b08e(0xdb));throw _0x105460;}}async function addCategory(_0x45b5d1){const _0x1f4796=a0_0x27e8d5;try{const _0x5aafab=localStorage[_0x1f4796(0x14d)](_0x1f4796(0xbe));if(!_0x5aafab)throw new Error('No\x20hay\x20sesión\x20activa');const _0x30ef76=await fetch(_0x1f4796(0x13e),{'method':_0x1f4796(0x14c),'headers':{'Authorization':_0x1f4796(0x1f4)+_0x5aafab,'Content-Type':'application/json'},'body':JSON[_0x1f4796(0x17e)](_0x45b5d1)});if(!_0x30ef76['ok'])throw new Error(_0x1f4796(0x1bd)+_0x30ef76[_0x1f4796(0x225)]);return showNotification(_0x1f4796(0x137),_0x1f4796(0x120)),await refreshCategoriesUI(),await _0x30ef76[_0x1f4796(0x167)]();}catch(_0x20ae88){console[_0x1f4796(0xdb)](_0x1f4796(0x143),_0x20ae88),showNotification(_0x1f4796(0xf2),_0x1f4796(0xdb));throw _0x20ae88;}}async function logout(){const _0x271794=a0_0x27e8d5;try{localStorage[_0x271794(0x1b3)](_0x271794(0xbe)),showNotification(_0x271794(0x154),'success'),setTimeout(()=>{const _0x42ebe4=_0x271794;window[_0x42ebe4(0x1c7)]['replace']('/');},0x3e8);}catch(_0x1534e8){console[_0x271794(0xdb)]('Error\x20al\x20cerrar\x20sesión:',_0x1534e8),showNotification(_0x271794(0xdc),_0x271794(0xdb));}}function populateYearSelector(){const _0xe94aa3=a0_0x27e8d5,_0x5ef60b=document[_0xe94aa3(0x13a)](_0xe94aa3(0x122));if(!_0x5ef60b)return;_0x5ef60b[_0xe94aa3(0x181)]='';for(let _0x3c7f38=0x7e9;_0x3c7f38<=0x7ee;_0x3c7f38++){const _0x403a39=document['createElement'](_0xe94aa3(0x1de));_0x403a39[_0xe94aa3(0x187)]=_0x3c7f38,_0x403a39['textContent']=_0x3c7f38,_0x5ef60b['appendChild'](_0x403a39);}const _0x370c57=new Date()[_0xe94aa3(0x1af)]();_0x5ef60b[_0xe94aa3(0x187)]=_0x370c57>=0x7e9&&_0x370c57<=0x7ee?_0x370c57:0x7e9;}async function updateMonthlyTotals(){const _0x536646=a0_0x27e8d5,[_0x873a10,_0x1da562]=await Promise['all']([getTransactions(),getBudgets()]);let _0x4c760a=0x0,_0x170523=0x0;_0x873a10['forEach'](_0x3cdda4=>{const _0x31cd66=a0_0x2dd6;if(_0x3cdda4['type']===_0x31cd66(0x1d0))_0x4c760a+=Number(_0x3cdda4[_0x31cd66(0x222)])||0x0;if(_0x3cdda4[_0x31cd66(0x201)]===_0x31cd66(0x1f0))_0x170523+=Number(_0x3cdda4[_0x31cd66(0x222)])||0x0;});const _0x361c70=_0x1da562[_0x536646(0x145)]>0x0?Number(_0x1da562[0x0][_0x536646(0x222)])||0x0:0x0;console[_0x536646(0x212)](_0x536646(0xe2),_0x361c70,_0x1da562);const _0x12b4cc=_0x4c760a-_0x170523,_0x20c801=document['getElementById'](_0x536646(0x185)),_0x282a29=document[_0x536646(0x13a)](_0x536646(0xc2)),_0x2867e8=document[_0x536646(0x13a)]('monthly-budget-display'),_0x397f48=document[_0x536646(0x13a)](_0x536646(0xed));if(_0x20c801)_0x20c801[_0x536646(0x230)]=formatCurrency(_0x4c760a);if(_0x282a29)_0x282a29[_0x536646(0x230)]=formatCurrency(_0x170523);if(_0x2867e8)_0x2867e8['textContent']=formatCurrency(_0x361c70);if(_0x397f48)_0x397f48[_0x536646(0x230)]=formatCurrency(_0x12b4cc);if(_0x397f48){_0x397f48[_0x536646(0x1e6)][_0x536646(0x1ae)](_0x536646(0x14f),'text-red-600',_0x536646(0x232));if(_0x12b4cc>0x0)_0x397f48['classList'][_0x536646(0xce)](_0x536646(0x14f));else{if(_0x12b4cc<0x0)_0x397f48[_0x536646(0x1e6)][_0x536646(0xce)](_0x536646(0x11f));else _0x397f48[_0x536646(0x1e6)][_0x536646(0xce)](_0x536646(0x232));}}}async function refreshAllMonthlyUI(){const _0x29ff30=a0_0x27e8d5;await Promise[_0x29ff30(0x16b)]([refreshCategoriesUI(),refreshBudgetsUI(),refreshTransactionsUI(),refreshChartsUI()]),await updateMonthlyTotals();}const originalInitializeApp=initializeApp;initializeApp=async function(){await originalInitializeApp(),await refreshAllMonthlyUI();};async function initializeApp(){const _0x5bdb9a=a0_0x27e8d5;console['log'](_0x5bdb9a(0x191));try{const _0x43df12=localStorage[_0x5bdb9a(0x14d)](_0x5bdb9a(0xbe));if(!_0x43df12){console[_0x5bdb9a(0x212)](_0x5bdb9a(0x1ca)),window['location'][_0x5bdb9a(0xe3)]('/');return;}console['log'](_0x5bdb9a(0xd5)),currentUser=await getCurrentUser();const _0x16fcf3=document[_0x5bdb9a(0x13a)](_0x5bdb9a(0x211)),_0x422ab8=document[_0x5bdb9a(0x13a)](_0x5bdb9a(0x130)),_0x5c587a=document[_0x5bdb9a(0x13a)](_0x5bdb9a(0xfc));if(_0x422ab8){let _0x39424c=currentUser[_0x5bdb9a(0x15f)]||'';_0x39424c?_0x422ab8[_0x5bdb9a(0x230)]=_0x5bdb9a(0x182)+_0x39424c:_0x422ab8['textContent']=_0x5bdb9a(0x182)+currentUser[_0x5bdb9a(0x1f1)];}if(_0x5c587a)renderAvatar(currentUser);populateYearSelector();const _0x53ccdd=document['getElementById'](_0x5bdb9a(0xe6));if(_0x53ccdd)_0x53ccdd['textContent']=displayMonth(new Date(currentYear,currentMonth));console[_0x5bdb9a(0x212)]('📊\x20Cargando\x20datos\x20iniciales...'),await Promise[_0x5bdb9a(0x16b)]([refreshCategoriesUI(),refreshTransactionsUI(),refreshBudgetsUI(),refreshChartsUI()]),console['log'](_0x5bdb9a(0x16e)),setupEventListeners();const _0x565905=document['getElementById'](_0x5bdb9a(0x1cc));if(_0x565905)_0x565905[_0x5bdb9a(0xf5)][_0x5bdb9a(0x1ac)]=_0x5bdb9a(0x1e7);console['log'](_0x5bdb9a(0xd4));}catch(_0x4c6f2f){console[_0x5bdb9a(0xdb)](_0x5bdb9a(0x1c2),_0x4c6f2f),showNotification(_0x5bdb9a(0x1d2),_0x5bdb9a(0xdb));}}function setupEventListeners(){const _0x5aa5ec=a0_0x27e8d5;console[_0x5aa5ec(0x212)](_0x5aa5ec(0x16e));const _0x1b8756=document[_0x5aa5ec(0x13a)]('expense-form');_0x1b8756?(console[_0x5aa5ec(0x212)](_0x5aa5ec(0x124)),_0x1b8756[_0x5aa5ec(0x1a9)]('submit',async _0x35f95b=>{const _0x21a2af=_0x5aa5ec;_0x35f95b[_0x21a2af(0x106)]();const _0x5b5ebf=document[_0x21a2af(0x13a)](_0x21a2af(0x128))[_0x21a2af(0x187)][_0x21a2af(0xf4)](),_0x4f2739=parseFloat(document[_0x21a2af(0x13a)](_0x21a2af(0x222))[_0x21a2af(0x187)]),_0x1d0f80=document[_0x21a2af(0x1fc)]('input[name=\x22transaction_type\x22]:checked')[_0x21a2af(0x187)],_0x5c290a=document[_0x21a2af(0x13a)](_0x21a2af(0x193))[_0x21a2af(0x187)],_0x2b109a=document[_0x21a2af(0x13a)](_0x21a2af(0x1c6))[_0x21a2af(0x187)][_0x21a2af(0xf4)](),_0x278bbd=new Date(),_0x159fa4=_0x278bbd['toISOString']()[_0x21a2af(0x196)]('T')[0x0],_0x162ee3=currentYear+'-'+String(currentMonth+0x1)[_0x21a2af(0x1c4)](0x2,'0');if(!_0x5b5ebf||!_0x4f2739||_0x4f2739<=0x0||!_0x1d0f80||!_0x159fa4||!_0x162ee3||_0x1d0f80===_0x21a2af(0x1f0)&&!_0x5c290a){showNotification(_0x21a2af(0x227),_0x21a2af(0xdb));return;}const _0x5e7c9d={'description':_0x5b5ebf,'amount':_0x4f2739,'type':_0x1d0f80,'date':_0x159fa4,'month':_0x162ee3,'comments':_0x2b109a};_0x5e7c9d['category_id']=_0x5c290a||null;try{await addTransaction(_0x5e7c9d),_0x1b8756['reset']();}catch(_0x16a6a7){console['error'](_0x21a2af(0x178),_0x16a6a7);}})):console[_0x5aa5ec(0x212)](_0x5aa5ec(0x1a6));const _0x2fa39a=document['getElementById']('logout-btn');_0x2fa39a?(console[_0x5aa5ec(0x212)](_0x5aa5ec(0xca)),_0x2fa39a[_0x5aa5ec(0x1a9)](_0x5aa5ec(0x197),()=>{logout();})):console[_0x5aa5ec(0x212)](_0x5aa5ec(0x15c));const _0x31d34d=document[_0x5aa5ec(0x13a)](_0x5aa5ec(0x1b1));_0x31d34d?(console[_0x5aa5ec(0x212)](_0x5aa5ec(0xfd)),_0x31d34d[_0x5aa5ec(0x1a9)](_0x5aa5ec(0x197),()=>{showCategoryModal();})):console[_0x5aa5ec(0x212)](_0x5aa5ec(0x1eb)),console[_0x5aa5ec(0x212)]('✅\x20Event\x20listeners\x20configurados');}function updateMonthDisplay(){const _0x1f2d17=a0_0x27e8d5,_0x24a5a7=document[_0x1f2d17(0x13a)](_0x1f2d17(0xe6));_0x24a5a7&&(_0x24a5a7[_0x1f2d17(0x230)]=displayMonth(new Date(currentYear,currentMonth)));}async function getAnnualData(_0x5a1bd4){const _0x405d1b=a0_0x27e8d5;try{const _0x2a6ef1=localStorage[_0x405d1b(0x14d)](_0x405d1b(0xbe));if(!_0x2a6ef1)throw new Error(_0x405d1b(0x17f));const _0x5863e7=await fetch(_0x405d1b(0xee),{'headers':{'Authorization':_0x405d1b(0x1f4)+_0x2a6ef1}});if(!_0x5863e7['ok'])throw new Error(_0x405d1b(0x221));const _0x5954e4=await _0x5863e7[_0x405d1b(0x167)](),_0x45d27c=await fetch(_0x405d1b(0x210),{'headers':{'Authorization':_0x405d1b(0x1f4)+_0x2a6ef1}});if(!_0x45d27c['ok'])throw new Error(_0x405d1b(0xbd));const _0x3abe5d=await _0x45d27c[_0x405d1b(0x167)](),_0x4e6edd=_0x5954e4['filter'](_0x5d0f81=>_0x5d0f81['month'][_0x405d1b(0x136)](_0x5a1bd4)),_0xaeb6a9=_0x3abe5d[_0x405d1b(0x10a)](_0x286760=>_0x286760[_0x405d1b(0x135)][_0x405d1b(0x136)](_0x5a1bd4)),_0x1892a9=Array(0xc)[_0x405d1b(0x19d)](0x0),_0x343880=Array(0xc)[_0x405d1b(0x19d)](0x0),_0x34a649=Array(0xc)[_0x405d1b(0x19d)](0x0);return _0x4e6edd[_0x405d1b(0x226)](_0x58eac2=>{const _0x5425b3=_0x405d1b,_0x2ef8fd=parseInt(_0x58eac2[_0x5425b3(0x135)]['split']('-')[0x1],0xa)-0x1;_0x34a649[_0x2ef8fd]=Number(_0x58eac2[_0x5425b3(0x222)])||0x0;}),_0xaeb6a9[_0x405d1b(0x226)](_0xdb731d=>{const _0x2360a0=_0x405d1b,_0xaa0f80=parseInt(_0xdb731d[_0x2360a0(0x135)][_0x2360a0(0x196)]('-')[0x1],0xa)-0x1,_0x578cd6=Number(_0xdb731d['amount'])||0x0;if(_0xdb731d['type']===_0x2360a0(0x1f0))_0x1892a9[_0xaa0f80]+=_0x578cd6;else _0xdb731d[_0x2360a0(0x201)]==='income'&&(_0x343880[_0xaa0f80]+=_0x578cd6);}),{'gastosPorMes':_0x1892a9,'ingresosPorMes':_0x343880,'presupuestosPorMes':_0x34a649};}catch(_0x54e473){return console[_0x405d1b(0xdb)](_0x405d1b(0x21f),_0x54e473),{'gastosPorMes':Array(0xc)['fill'](0x0),'ingresosPorMes':Array(0xc)[_0x405d1b(0x19d)](0x0),'presupuestosPorMes':Array(0xc)[_0x405d1b(0x19d)](0x0)};}}let annualChartInstance=null;function renderAnnualChart({gastosPorMes:_0x390cb4,ingresosPorMes:_0x160380,presupuestosPorMes:_0x4f086e},_0x355558){const _0x2ad4b0=a0_0x27e8d5,_0x27c023=document[_0x2ad4b0(0x13a)](_0x2ad4b0(0xef));if(!_0x27c023)return;annualChartInstance&&annualChartInstance[_0x2ad4b0(0x1ce)]();const _0x55793b=[_0x2ad4b0(0x1f8),'Febrero','Marzo',_0x2ad4b0(0x100),_0x2ad4b0(0x12d),_0x2ad4b0(0x1c3),_0x2ad4b0(0xd7),'Agosto','Septiembre',_0x2ad4b0(0x1e2),_0x2ad4b0(0x1ba),_0x2ad4b0(0x1a0)],_0x4c4068=_0x160380[_0x2ad4b0(0x17a)]((_0x31e018,_0x3c4edc)=>(Number(_0x31e018)||0x0)-(Number(_0x390cb4[_0x3c4edc])||0x0));annualChartInstance=new Chart(_0x27c023,{'type':_0x2ad4b0(0x22f),'data':{'labels':_0x55793b,'datasets':[{'label':_0x2ad4b0(0x21d),'data':_0x4c4068,'backgroundColor':_0x2ad4b0(0x20c),'borderRadius':0x6,'maxBarThickness':0x20},{'label':'Presupuesto','data':_0x4f086e,'type':_0x2ad4b0(0xc4),'borderColor':'#2563eb','backgroundColor':_0x2ad4b0(0x20e),'borderWidth':0x3,'pointRadius':0x4,'pointBackgroundColor':_0x2ad4b0(0x146),'fill':![],'tension':0.3}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x2ad4b0(0xc8)},'title':{'display':!![],'text':'Balance\x20vs.\x20Presupuesto\x20-\x20'+_0x355558}},'scales':{'y':{'beginAtZero':!![],'ticks':{'callback':function(_0x5d8985){const _0x79d334=_0x2ad4b0;return'$'+_0x5d8985[_0x79d334(0x180)]('es-CL');}}}}}});}async function refreshAnnualChartUI(){const _0x4f30a8=a0_0x27e8d5,_0x5485dc=document['getElementById'](_0x4f30a8(0x122)),_0x26eb6b=_0x5485dc?_0x5485dc[_0x4f30a8(0x187)]:new Date()[_0x4f30a8(0x1af)](),_0x1f552f=await getAnnualData(_0x26eb6b);renderAnnualChart(_0x1f552f,_0x26eb6b);}const navAnnual=document['getElementById'](a0_0x27e8d5(0x215));navAnnual&&navAnnual[a0_0x27e8d5(0x1a9)](a0_0x27e8d5(0x197),()=>{refreshAnnualChartUI();});const yearSelector=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x122));yearSelector&&yearSelector['addEventListener'](a0_0x27e8d5(0x1ff),async()=>{const _0x292814=a0_0x27e8d5;currentYear=parseInt(yearSelector[_0x292814(0x187)],0xa);const _0x145ec1=document[_0x292814(0x13a)](_0x292814(0xcb));_0x145ec1&&!_0x145ec1[_0x292814(0x1e6)]['contains']('hidden')&&await refreshAnnualChartUI(),await refreshAllMonthlyUI();});const editAnnualBudgetsBtn=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x1b4)),editAnnualBudgetsModal=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0xcf)),editAnnualBudgetsForm=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x21a)),closeEditAnnualBudgetsBtn=document[a0_0x27e8d5(0x13a)]('close-edit-annual-budgets-btn'),saveAnnualBudgetsBtn=document[a0_0x27e8d5(0x13a)]('save-annual-budgets-btn'),editAnnualYear=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x1e4));editAnnualBudgetsBtn&&editAnnualBudgetsModal&&editAnnualBudgetsForm&&editAnnualBudgetsBtn[a0_0x27e8d5(0x1a9)](a0_0x27e8d5(0x197),async()=>{const _0x305dfa=a0_0x27e8d5,_0xb731c0=document['getElementById']('year-selector'),_0x4f9d3d=_0xb731c0?_0xb731c0[_0x305dfa(0x187)]:new Date()[_0x305dfa(0x1af)]();editAnnualYear[_0x305dfa(0x230)]=_0x4f9d3d,editAnnualBudgetsModal[_0x305dfa(0x1e6)][_0x305dfa(0x1ae)]('hidden');const _0x4ddcc1=await fetch(_0x305dfa(0xee),{'headers':{'Authorization':_0x305dfa(0x1f4)+localStorage[_0x305dfa(0x14d)]('jwt_token')}});if(!_0x4ddcc1['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x4ddcc1['status']);const _0x4dc3fd=await _0x4ddcc1[_0x305dfa(0x167)](),_0x341a25=[_0x305dfa(0x1f8),_0x305dfa(0x1f9),_0x305dfa(0xf3),_0x305dfa(0x100),_0x305dfa(0x12d),_0x305dfa(0x1c3),_0x305dfa(0xd7),_0x305dfa(0x235),_0x305dfa(0x12e),_0x305dfa(0x1e2),_0x305dfa(0x1ba),_0x305dfa(0x1a0)];editAnnualBudgetsForm['innerHTML']='';for(let _0x331879=0x0;_0x331879<0xc;_0x331879++){const _0x1f7327=_0x4f9d3d+'-'+String(_0x331879+0x1)[_0x305dfa(0x1c4)](0x2,'0'),_0xad4888=_0x4dc3fd[_0x305dfa(0x1d5)](_0x164cf2=>_0x164cf2[_0x305dfa(0x135)]===_0x1f7327)?.[_0x305dfa(0x222)]??0x0,_0xc0a82f='$'+parseInt(_0xad4888,0xa)[_0x305dfa(0x180)]('es-CL');editAnnualBudgetsForm[_0x305dfa(0x181)]+=_0x305dfa(0x133)+_0x341a25[_0x331879]+_0x305dfa(0x1cd)+_0x1f7327+_0x305dfa(0x1f5)+_0xc0a82f+_0x305dfa(0x15b);}setTimeout(()=>{const _0x4857d7=_0x305dfa;document[_0x4857d7(0x177)](_0x4857d7(0xc9))[_0x4857d7(0x226)](_0x56fd96=>{const _0x2be1d0=_0x4857d7;_0x56fd96[_0x2be1d0(0x1a9)]('input',_0x5c3e89=>{const _0x192060=_0x2be1d0;let _0x499364=_0x5c3e89[_0x192060(0x216)][_0x192060(0x187)][_0x192060(0xe3)](/[^\d]/g,'');if(!_0x499364){_0x5c3e89[_0x192060(0x216)][_0x192060(0x187)]='';return;}_0x499364=parseInt(_0x499364,0xa)['toLocaleString']('es-CL'),_0x5c3e89[_0x192060(0x216)][_0x192060(0x187)]='$'+_0x499364;}),_0x56fd96[_0x2be1d0(0x1a9)](_0x2be1d0(0x1d3),_0x2f3fc1=>{setTimeout(()=>{const _0x12d461=a0_0x2dd6;_0x2f3fc1[_0x12d461(0x216)][_0x12d461(0x17d)](_0x2f3fc1[_0x12d461(0x216)][_0x12d461(0x187)][_0x12d461(0x145)],_0x2f3fc1[_0x12d461(0x216)][_0x12d461(0x187)][_0x12d461(0x145)]);},0x0);});});},0x64),setupModalCloseEvents(_0x305dfa(0xcf),()=>{const _0x4bba64=_0x305dfa;editAnnualBudgetsModal[_0x4bba64(0x1e6)][_0x4bba64(0xce)](_0x4bba64(0x108));});});closeEditAnnualBudgetsBtn&&editAnnualBudgetsModal&&closeEditAnnualBudgetsBtn[a0_0x27e8d5(0x1a9)]('click',()=>{const _0x2bf134=a0_0x27e8d5;editAnnualBudgetsModal[_0x2bf134(0x1e6)][_0x2bf134(0xce)](_0x2bf134(0x108));});editAnnualBudgetsForm&&editAnnualBudgetsForm[a0_0x27e8d5(0x1a9)]('submit',async _0x4200ab=>{const _0x5560f5=a0_0x27e8d5;_0x4200ab[_0x5560f5(0x106)](),saveAnnualBudgetsBtn['disabled']=!![];const _0x16278d=new FormData(editAnnualBudgetsForm),_0xc15135=[];for(let [_0x4d52a8,_0x1436b1]of _0x16278d['entries']()){let _0x3f64a6=String(_0x1436b1)['replace'](/[^\d]/g,'');_0xc15135[_0x5560f5(0x18e)]({'month':_0x4d52a8,'amount':parseInt(_0x3f64a6,0xa)});}const _0x82f16f=localStorage[_0x5560f5(0x14d)](_0x5560f5(0xbe));if(!_0x82f16f){showNotification(_0x5560f5(0x17f),_0x5560f5(0xdb));return;}try{const _0x142589=await fetch(_0x5560f5(0xee),{'method':_0x5560f5(0xbc),'headers':{'Authorization':_0x5560f5(0x1f4)+_0x82f16f,'Content-Type':_0x5560f5(0x162)},'body':JSON[_0x5560f5(0x17e)](_0xc15135)});if(!_0x142589['ok'])throw new Error(_0x5560f5(0x1bd)+_0x142589[_0x5560f5(0x225)]);showNotification(_0x5560f5(0x18c),_0x5560f5(0x120)),editAnnualBudgetsModal[_0x5560f5(0x1e6)][_0x5560f5(0xce)](_0x5560f5(0x108)),refreshAnnualChartUI();}catch(_0x3485a0){showNotification(_0x5560f5(0xf7),_0x5560f5(0xdb));}finally{saveAnnualBudgetsBtn[_0x5560f5(0x19f)]=![];}});document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x203))&&(initializeApp(),initializeMonthYearSelectors(),setupMonthYearListeners());window['deleteTransaction']=deleteTransaction,window[a0_0x27e8d5(0x16f)]=editTransaction,window[a0_0x27e8d5(0xd3)]=deleteCategory;function calcularTotalesPorCategoria(_0x193507,_0x547974){const _0x249362={};return _0x193507['forEach'](_0x44b1f5=>{const _0x582728=a0_0x2dd6;if(_0x44b1f5[_0x582728(0x201)]!==_0x547974)return;const _0x567fb3=_0x44b1f5['category_name']||_0x582728(0x11e),_0x2c310c=Number(_0x44b1f5[_0x582728(0x222)])||0x0;if(!_0x249362[_0x567fb3])_0x249362[_0x567fb3]=0x0;_0x249362[_0x567fb3]+=_0x2c310c;}),_0x249362;}function setupMonthYearListeners(){const _0x5ca043=a0_0x27e8d5,_0x54f634=document[_0x5ca043(0x13a)]('prev-month-btn'),_0x514c78=document[_0x5ca043(0x13a)](_0x5ca043(0x194)),_0x45dcab=document[_0x5ca043(0x13a)](_0x5ca043(0x122));_0x54f634&&_0x54f634[_0x5ca043(0x1a9)](_0x5ca043(0x197),async()=>{currentMonth===0x0?(currentMonth=0xb,currentYear--):currentMonth--,updateMonthDisplay(),await refreshAllMonthlyUI();}),_0x514c78&&_0x514c78[_0x5ca043(0x1a9)](_0x5ca043(0x197),async()=>{currentMonth===0xb?(currentMonth=0x0,currentYear++):currentMonth++,updateMonthDisplay(),await refreshAllMonthlyUI();}),_0x45dcab&&_0x45dcab[_0x5ca043(0x1a9)](_0x5ca043(0x1ff),async()=>{const _0x13c01c=_0x5ca043;currentYear=parseInt(_0x45dcab[_0x13c01c(0x187)],0xa),updateMonthDisplay(),await refreshAllMonthlyUI();});}function initializeMonthYearSelectors(){const _0x4394b9=a0_0x27e8d5,_0x571b56=document['getElementById'](_0x4394b9(0xe1)),_0x7e249c=document['getElementById'](_0x4394b9(0x122)),_0x48aa96=new Date();currentMonth=_0x48aa96['getMonth'](),currentYear=_0x48aa96[_0x4394b9(0x1af)]();if(_0x571b56)_0x571b56[_0x4394b9(0x187)]=currentMonth;if(_0x7e249c)_0x7e249c[_0x4394b9(0x187)]=currentYear;_0x571b56&&_0x571b56[_0x4394b9(0x1a9)](_0x4394b9(0x1ff),async()=>{const _0x2cff2c=_0x4394b9;currentMonth=parseInt(_0x571b56[_0x2cff2c(0x187)],0xa),updateMonthDisplay(),await refreshAllMonthlyUI();}),_0x7e249c&&_0x7e249c[_0x4394b9(0x1a9)]('change',async()=>{const _0x2932bd=_0x4394b9;currentYear=parseInt(_0x7e249c[_0x2932bd(0x187)],0xa),updateMonthDisplay(),await refreshAllMonthlyUI();});}function showMonthlyView(){toggleMonthSelector(!![]);}function a0_0x2dd6(_0x14164c,_0x240e7c){const _0x40f856=a0_0x40f8();return a0_0x2dd6=function(_0x2dd678,_0x2a247f){_0x2dd678=_0x2dd678-0xbc;let _0x1b67dd=_0x40f856[_0x2dd678];return _0x1b67dd;},a0_0x2dd6(_0x14164c,_0x240e7c);}function showAnnualView(){toggleMonthSelector(![]);}function renderAvatar(_0x28db55){const _0x309416=a0_0x27e8d5,_0x3e3f39=document['getElementById'](_0x309416(0xfc));if(!_0x3e3f39)return;const _0x16f46e=_0x28db55['first_name']?_0x28db55[_0x309416(0x15f)][_0x309416(0x1d9)](_0x309416(0x1b8))[0x0][_0x309416(0x156)]():'',_0x22e23c=_0x28db55[_0x309416(0x223)]?_0x28db55['last_name'][_0x309416(0x1d9)](_0x309416(0x1b8))[0x0]['toUpperCase']():'';if(_0x16f46e||_0x22e23c)_0x3e3f39[_0x309416(0x230)]=_0x16f46e+_0x22e23c;else _0x28db55['email']?_0x3e3f39[_0x309416(0x230)]=_0x28db55[_0x309416(0x1f1)][0x0][_0x309416(0x156)]():_0x3e3f39[_0x309416(0x230)]='';}const avatar=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0xfc));avatar&&avatar[a0_0x27e8d5(0x1a9)](a0_0x27e8d5(0x197),async()=>{const _0x276f94=a0_0x27e8d5,_0x411aeb=document[_0x276f94(0x13a)](_0x276f94(0x102));if(!_0x411aeb)return;const _0x115446=await getCurrentUser();document[_0x276f94(0x13a)](_0x276f94(0x1fd))[_0x276f94(0x187)]=_0x115446?.['email']||'',document[_0x276f94(0x13a)]('profile-firstname')['value']=_0x115446?.[_0x276f94(0x15f)]||'',document[_0x276f94(0x13a)](_0x276f94(0x18f))[_0x276f94(0x187)]=_0x115446?.['last_name']||'',document[_0x276f94(0x13a)](_0x276f94(0x18b))[_0x276f94(0x187)]='',_0x411aeb[_0x276f94(0x1e6)]['remove']('hidden'),setupModalCloseEvents(_0x276f94(0x102),()=>{const _0x2de8aa=_0x276f94;_0x411aeb[_0x2de8aa(0x1e6)][_0x2de8aa(0xce)](_0x2de8aa(0x108));});});const profileForm=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0x1a2));profileForm&&profileForm['addEventListener'](a0_0x27e8d5(0x1b6),async _0x10abf6=>{const _0x11f9f2=a0_0x27e8d5;_0x10abf6[_0x11f9f2(0x106)]();const _0x443a4e=document[_0x11f9f2(0x13a)](_0x11f9f2(0x1c9))[_0x11f9f2(0x187)][_0x11f9f2(0xf4)](),_0x2a48d4=document['getElementById'](_0x11f9f2(0x18f))[_0x11f9f2(0x187)][_0x11f9f2(0xf4)](),_0xf040c4=document[_0x11f9f2(0x13a)]('profile-password')[_0x11f9f2(0x187)],_0x4a623d=document['getElementById'](_0x11f9f2(0x113))[_0x11f9f2(0x187)];if(_0xf040c4&&_0xf040c4!==_0x4a623d){showNotification(_0x11f9f2(0x1e5),_0x11f9f2(0xdb));return;}const _0x29cb6c=localStorage[_0x11f9f2(0x14d)]('jwt_token');if(!_0x29cb6c)return;const _0x4e4ca2=JSON[_0x11f9f2(0x228)](atob(_0x29cb6c['split']('.')[0x1])),_0x16c95f={'firstName':_0x443a4e,'lastName':_0x2a48d4};if(_0xf040c4)_0x16c95f['password']=_0xf040c4;const _0x3e2eac=_0x4e4ca2[_0x11f9f2(0xe9)]===_0x11f9f2(0x219),_0x52f564=_0x3e2eac?_0x11f9f2(0x1b5)+_0x4e4ca2[_0x11f9f2(0xf8)]:'/api/profile';try{const _0x311c0d=await fetch(_0x52f564,{'method':_0x11f9f2(0x1fe),'headers':{'Authorization':_0x11f9f2(0x1f4)+_0x29cb6c,'Content-Type':_0x11f9f2(0x162)},'body':JSON[_0x11f9f2(0x17e)](_0x16c95f)});if(!_0x311c0d['ok'])throw new Error(_0x11f9f2(0x175));showNotification('Perfil\x20actualizado',_0x11f9f2(0x120)),document[_0x11f9f2(0x13a)](_0x11f9f2(0x102))[_0x11f9f2(0x1e6)][_0x11f9f2(0xce)](_0x11f9f2(0x108)),renderAvatar({'first_name':_0x443a4e[_0x11f9f2(0x1d9)]('NFC'),'last_name':_0x2a48d4[_0x11f9f2(0x1d9)](_0x11f9f2(0x1b8))});const _0x573281=document[_0x11f9f2(0x13a)]('user-greeting');if(_0x573281)_0x573281['textContent']='Bienvenido/a,\x20'+_0x443a4e[_0x11f9f2(0x1d9)]('NFC');const _0xae4887=await _0x311c0d[_0x11f9f2(0x167)]();if(_0xae4887[_0x11f9f2(0x14a)])localStorage[_0x11f9f2(0x220)](_0x11f9f2(0xbe),_0xae4887['token']);else{const _0x1d3b5c=localStorage[_0x11f9f2(0x14d)](_0x11f9f2(0xbe));if(_0x1d3b5c){const _0x2ae99d=_0x1d3b5c['split']('.');if(_0x2ae99d[_0x11f9f2(0x145)]===0x3){let _0x32f0d7=JSON[_0x11f9f2(0x228)](atob(_0x2ae99d[0x1]));_0x32f0d7[_0x11f9f2(0x15f)]=_0x443a4e[_0x11f9f2(0x1d9)](_0x11f9f2(0x1b8)),_0x32f0d7[_0x11f9f2(0x223)]=_0x2a48d4['normalize'](_0x11f9f2(0x1b8));const _0x1cb005=btoa(JSON[_0x11f9f2(0x17e)](_0x32f0d7))[_0x11f9f2(0xe3)](/=+$/,'');localStorage[_0x11f9f2(0x220)]('jwt_token',_0x2ae99d[0x0]+'.'+_0x1cb005+'.'+_0x2ae99d[0x2]);}}}}catch(_0x4f55c7){showNotification(_0x11f9f2(0x175),'error');}});const closeProfileModalBtn=document[a0_0x27e8d5(0x13a)](a0_0x27e8d5(0xe0));closeProfileModalBtn&&closeProfileModalBtn[a0_0x27e8d5(0x1a9)](a0_0x27e8d5(0x197),()=>{const _0x591f1a=a0_0x27e8d5;document[_0x591f1a(0x13a)]('profile-modal')[_0x591f1a(0x1e6)]['add'](_0x591f1a(0x108));});async function showAdminMenuIfNeeded(){const _0x2e49dd=a0_0x27e8d5,_0x1119e4=await getCurrentUser();let _0x339ba5=document[_0x2e49dd(0x13a)](_0x2e49dd(0x224));if(!_0x339ba5){const _0x5a056d=document[_0x2e49dd(0x13a)](_0x2e49dd(0x1d4));_0x5a056d&&(_0x339ba5=document['createElement']('li'),_0x339ba5['id']='admin-menu-item',_0x339ba5['style'][_0x2e49dd(0x1ac)]=_0x2e49dd(0x1e7),_0x339ba5[_0x2e49dd(0x181)]='<a\x20href=\x22admin.html\x22\x20title=\x22Administración\x20de\x20usuarios\x22\x20class=\x22sidebar-icon\x20p-3\x20rounded-lg\x22><i\x20class=\x22bi\x20bi-gear\x20text-2xl\x22></i></a>',_0x5a056d[_0x2e49dd(0x1e8)](_0x339ba5));}if(!_0x339ba5)return;_0x1119e4&&_0x1119e4[_0x2e49dd(0xe9)]&&_0x1119e4[_0x2e49dd(0xe9)][_0x2e49dd(0x165)]()==='admin'?(_0x339ba5[_0x2e49dd(0xf5)][_0x2e49dd(0x1ac)]=_0x2e49dd(0xd0),console['log']('🔒\x20Menú\x20admin\x20visible\x20para\x20usuario\x20admin')):(_0x339ba5[_0x2e49dd(0xf5)][_0x2e49dd(0x1ac)]='none',console[_0x2e49dd(0x212)]('🔒\x20Menú\x20admin\x20oculto\x20(no\x20admin)'));}showAdminMenuIfNeeded();function showConfirmModal({title:title=a0_0x27e8d5(0xf0),message:message='',onConfirm:_0x59bcb8}){const _0x12bce6=a0_0x27e8d5,_0x523804=document[_0x12bce6(0x13a)](_0x12bce6(0x183));document[_0x12bce6(0x13a)](_0x12bce6(0x105))['textContent']=title,document[_0x12bce6(0x13a)](_0x12bce6(0x151))['textContent']=message,_0x523804[_0x12bce6(0x1e6)][_0x12bce6(0x1ae)](_0x12bce6(0x108));const _0x451018=document[_0x12bce6(0x13a)]('confirm-modal-accept'),_0xb8cc4f=document['getElementById'](_0x12bce6(0x198)),_0x3e7d24=()=>{const _0x218c7c=_0x12bce6;_0x523804['classList']['add']('hidden'),_0x451018[_0x218c7c(0x14b)](_0x218c7c(0x197),_0xaf7455),_0xb8cc4f[_0x218c7c(0x14b)](_0x218c7c(0x197),_0x2ba736);};function _0xaf7455(){const _0x4a364e=_0x12bce6;_0x3e7d24();if(typeof _0x59bcb8===_0x4a364e(0xd1))_0x59bcb8();}function _0x2ba736(){_0x3e7d24();}_0x451018[_0x12bce6(0x1a9)](_0x12bce6(0x197),_0xaf7455),_0xb8cc4f[_0x12bce6(0x1a9)](_0x12bce6(0x197),_0x2ba736);}window['showConfirmModal']=showConfirmModal;