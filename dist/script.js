const a0_0x5bf2c6=a0_0x2a45;(function(_0x43d893,_0x1ff09d){const _0xaa471c=a0_0x2a45,_0x233c54=_0x43d893();while(!![]){try{const _0x1a686c=parseInt(_0xaa471c(0x26d))/0x1+parseInt(_0xaa471c(0x312))/0x2*(-parseInt(_0xaa471c(0x31a))/0x3)+parseInt(_0xaa471c(0x354))/0x4*(-parseInt(_0xaa471c(0x211))/0x5)+-parseInt(_0xaa471c(0x320))/0x6*(parseInt(_0xaa471c(0x246))/0x7)+-parseInt(_0xaa471c(0x2db))/0x8*(parseInt(_0xaa471c(0x26f))/0x9)+-parseInt(_0xaa471c(0x34c))/0xa+parseInt(_0xaa471c(0x2cb))/0xb;if(_0x1a686c===_0x1ff09d)break;else _0x233c54['push'](_0x233c54['shift']());}catch(_0x203b94){_0x233c54['push'](_0x233c54['shift']());}}}(a0_0x55b7,0x67dcb));function displayMonth(_0x336a71){const _0x4294ed=a0_0x2a45,_0xdc94f2=[_0x4294ed(0x2de),_0x4294ed(0x210),_0x4294ed(0x22f),_0x4294ed(0x337),_0x4294ed(0x1ea),'Junio',_0x4294ed(0x2d0),'Agosto',_0x4294ed(0x2d5),'Octubre',_0x4294ed(0x226),'Diciembre'];return _0xdc94f2[_0x336a71['getMonth']()];}function formatCurrency(_0x30cea0){const _0x32987a=a0_0x2a45,_0x540079=parseFloat(_0x30cea0)||0x0,_0x2024e0=Math[_0x32987a(0x35d)](_0x540079);return'$'+_0x2024e0[_0x32987a(0x2ba)](_0x32987a(0x1e9),{'minimumFractionDigits':0x0,'maximumFractionDigits':0x0});}function showLoading(_0x3852cd,_0xe7ad6e=!![]){const _0x2fa418=a0_0x2a45,_0x2e4b47=document[_0x2fa418(0x2f1)](_0x3852cd);_0x2e4b47&&(_0xe7ad6e?_0x2e4b47[_0x2fa418(0x266)]=_0x2fa418(0x20e):_0x2e4b47['innerHTML']='');}function showNotification(_0x449a8e,_0x2d2e00=a0_0x5bf2c6(0x207),_0x40ab31=0xbb8){const _0x22e356=a0_0x5bf2c6,_0x16c902=document[_0x22e356(0x313)](_0x22e356(0x2c5));_0x16c902[_0x22e356(0x2b7)]=_0x22e356(0x29f)+(_0x2d2e00===_0x22e356(0x335)?_0x22e356(0x2f6):_0x2d2e00===_0x22e356(0x2e3)?'bg-green-500\x20text-white':_0x22e356(0x324)),_0x16c902[_0x22e356(0x276)]=_0x449a8e,document['body'][_0x22e356(0x2f9)](_0x16c902),setTimeout(()=>{const _0x3e3f28=_0x22e356;_0x16c902[_0x3e3f28(0x201)][_0x3e3f28(0x24c)]='0',setTimeout(()=>document[_0x3e3f28(0x30c)][_0x3e3f28(0x321)](_0x16c902),0x12c);},_0x40ab31);}function isValidEmail(_0x54e2eb){const _0x127ada=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return _0x127ada['test'](_0x54e2eb);}async function initializeFooter(){const _0x45ca77=a0_0x5bf2c6,_0x74dcb5=document[_0x45ca77(0x27f)]('#app-version'),_0x3a2c29=document['querySelectorAll'](_0x45ca77(0x1f6));let _0x348619='1.0.0';try{const _0x28989b=await fetchWithAuth(_0x45ca77(0x200));if(_0x28989b&&_0x28989b['ok']){const _0x1d6ba3=await _0x28989b[_0x45ca77(0x360)]();_0x348619=_0x1d6ba3[_0x45ca77(0x34b)];}}catch(_0x27cb98){}_0x74dcb5[_0x45ca77(0x353)](_0xcaac6f=>{const _0x3509d2=_0x45ca77;if(_0xcaac6f)_0xcaac6f[_0x3509d2(0x276)]=_0x348619;});const _0x88268d=new Date()[_0x45ca77(0x334)]();_0x3a2c29[_0x45ca77(0x353)](_0x1a576b=>{const _0x2e33d2=_0x45ca77;if(_0x1a576b)_0x1a576b[_0x2e33d2(0x276)]=_0x88268d;});}document['addEventListener'](a0_0x5bf2c6(0x323),()=>{const _0x3ed342=a0_0x5bf2c6,_0x44e2f4=document[_0x3ed342(0x2f1)](_0x3ed342(0x357));if(_0x44e2f4)_0x44e2f4[_0x3ed342(0x276)]=_0x3ed342(0x1fc);[_0x3ed342(0x29a),_0x3ed342(0x2d6),'edit-transaction-modal'][_0x3ed342(0x353)](_0x3a1298=>{const _0x1cf6e7=_0x3ed342,_0x55155d=document['getElementById'](_0x3a1298);if(_0x55155d)_0x55155d[_0x1cf6e7(0x233)][_0x1cf6e7(0x289)](_0x1cf6e7(0x1f1));}),initializeFooter();if(document[_0x3ed342(0x2f1)](_0x3ed342(0x1ff)))handleAuthPage();else document[_0x3ed342(0x2f1)](_0x3ed342(0x302))&&(window[_0x3ed342(0x33d)]=function(_0x2e12b7,_0x50f65a){const _0x1f175a=_0x3ed342,_0x2fc072=document[_0x1f175a(0x2f1)](_0x2e12b7);if(!_0x2fc072)return;function _0x488025(_0x5e23ec){const _0x4e7404=_0x1f175a;if(_0x5e23ec[_0x4e7404(0x27d)]==='Escape')_0x50f65a();}function _0x479bd2(_0x1eaa69){const _0x5ca1bf=_0x1f175a;if(_0x1eaa69[_0x5ca1bf(0x256)]===_0x2fc072)_0x50f65a();}document[_0x1f175a(0x214)](_0x1f175a(0x272),_0x488025),_0x2fc072[_0x1f175a(0x214)](_0x1f175a(0x254),_0x479bd2),_0x2fc072[_0x1f175a(0x286)]=()=>{const _0x22e939=_0x1f175a;document[_0x22e939(0x20a)](_0x22e939(0x272),_0x488025),_0x2fc072[_0x22e939(0x20a)](_0x22e939(0x254),_0x479bd2);};},window[_0x3ed342(0x34a)]=showCategoryModal,window['hideCategoryModal']=hideCategoryModal,handleAppPage());const _0x51f128=localStorage[_0x3ed342(0x236)]('jwt_token');if(_0x51f128)try{const _0x1dc2cb=JSON[_0x3ed342(0x2e9)](atob(_0x51f128[_0x3ed342(0x290)]('.')[0x1]));_0x1dc2cb&&_0x1dc2cb['role']===_0x3ed342(0x20d)&&(document[_0x3ed342(0x2f1)](_0x3ed342(0x208))['style']['display']='block');}catch{}const _0x4b17cb=document['querySelector']('#admin-menu-item\x20a');_0x4b17cb&&_0x4b17cb[_0x3ed342(0x214)](_0x3ed342(0x2d9),function(_0x33bf04){const _0x4637d6=_0x3ed342;_0x33bf04['preventDefault'](),sessionStorage[_0x4637d6(0x2a4)](_0x4637d6(0x227),_0x4637d6(0x2e6)),window[_0x4637d6(0x2ec)]['href']=_0x4637d6(0x308);});});async function handleAppPage(){const _0x55e5ae=a0_0x5bf2c6,_0x1b638f=document[_0x55e5ae(0x2f1)](_0x55e5ae(0x244)),_0x2f63aa=document[_0x55e5ae(0x2f1)](_0x55e5ae(0x325));_0x1b638f&&_0x2f63aa&&(_0x1b638f[_0x55e5ae(0x233)][_0x55e5ae(0x329)]('hidden'),_0x2f63aa['classList']['add'](_0x55e5ae(0x1f1)));const _0x4a6c4f=document[_0x55e5ae(0x2f1)](_0x55e5ae(0x2fd)),_0x256294=document[_0x55e5ae(0x2f1)](_0x55e5ae(0x340));_0x4a6c4f&&_0x256294&&(_0x4a6c4f['classList'][_0x55e5ae(0x289)](_0x55e5ae(0x1ec),'bg-gradient-to-r','from-blue-600',_0x55e5ae(0x27b),_0x55e5ae(0x34e)),_0x4a6c4f['classList'][_0x55e5ae(0x329)](_0x55e5ae(0x26a)),_0x256294[_0x55e5ae(0x233)]['remove'](_0x55e5ae(0x1ec),_0x55e5ae(0x1f8),_0x55e5ae(0x347),'to-purple-500',_0x55e5ae(0x34e)),_0x256294[_0x55e5ae(0x233)][_0x55e5ae(0x289)](_0x55e5ae(0x26a)));_0x256294&&_0x4a6c4f&&(_0x256294[_0x55e5ae(0x214)](_0x55e5ae(0x2d9),()=>{const _0x5aa535=_0x55e5ae;_0x1b638f[_0x5aa535(0x233)]['add'](_0x5aa535(0x1f1)),_0x2f63aa[_0x5aa535(0x233)]['remove']('hidden'),_0x256294[_0x5aa535(0x233)]['add']('active',_0x5aa535(0x1f8),'from-blue-600',_0x5aa535(0x27b),_0x5aa535(0x34e)),_0x256294[_0x5aa535(0x233)]['remove']('text-gray-500'),_0x4a6c4f[_0x5aa535(0x233)][_0x5aa535(0x329)](_0x5aa535(0x1ec),_0x5aa535(0x1f8),_0x5aa535(0x347),_0x5aa535(0x27b),'text-white'),_0x4a6c4f[_0x5aa535(0x233)][_0x5aa535(0x289)](_0x5aa535(0x26a));}),_0x4a6c4f[_0x55e5ae(0x214)](_0x55e5ae(0x2d9),()=>{const _0x117baf=_0x55e5ae;_0x2f63aa[_0x117baf(0x233)][_0x117baf(0x289)](_0x117baf(0x1f1)),_0x1b638f['classList'][_0x117baf(0x329)](_0x117baf(0x1f1)),_0x4a6c4f[_0x117baf(0x233)]['add'](_0x117baf(0x1ec),_0x117baf(0x1f8),_0x117baf(0x347),_0x117baf(0x27b),_0x117baf(0x34e)),_0x4a6c4f['classList']['remove'](_0x117baf(0x26a)),_0x256294[_0x117baf(0x233)][_0x117baf(0x329)](_0x117baf(0x1ec),_0x117baf(0x1f8),_0x117baf(0x347),_0x117baf(0x27b),_0x117baf(0x34e)),_0x256294['classList'][_0x117baf(0x289)](_0x117baf(0x26a));}));const _0x4969d1=document[_0x55e5ae(0x27f)](_0x55e5ae(0x359));_0x4969d1[_0x55e5ae(0x353)](_0x1e8b8d=>{const _0x248112=_0x55e5ae;_0x1e8b8d[_0x248112(0x214)](_0x248112(0x281),_0x13df32=>_0x13df32[_0x248112(0x28b)]());});const _0x3067ec=document[_0x55e5ae(0x27f)](_0x55e5ae(0x22d));_0x3067ec['forEach'](_0xfdc586=>{_0xfdc586['addEventListener']('input',_0x3e9589=>{const _0x3a00d7=a0_0x2a45,_0x132d54=parseFloat(_0x3e9589['target'][_0x3a00d7(0x287)]);_0x132d54<0x0&&(_0x3e9589['target'][_0x3a00d7(0x287)]=0x0);});});const _0x330f9b=document['getElementById'](_0x55e5ae(0x1f9));_0x330f9b&&(_0x330f9b[_0x55e5ae(0x214)](_0x55e5ae(0x27e),_0x56bd92=>{const _0x150d6e=_0x55e5ae;let _0x2e8cd3=_0x56bd92['target'][_0x150d6e(0x287)][_0x150d6e(0x28f)](/[^\d]/g,'');if(!_0x2e8cd3){_0x56bd92[_0x150d6e(0x256)]['value']='';return;}_0x2e8cd3=parseInt(_0x2e8cd3,0xa)[_0x150d6e(0x2ba)]('es-CL'),_0x56bd92[_0x150d6e(0x256)][_0x150d6e(0x287)]='$'+_0x2e8cd3;}),_0x330f9b[_0x55e5ae(0x214)](_0x55e5ae(0x2cf),_0x423d54=>{setTimeout(()=>{const _0x478df8=a0_0x2a45;_0x423d54[_0x478df8(0x256)][_0x478df8(0x291)](_0x423d54[_0x478df8(0x256)]['value'][_0x478df8(0x351)],_0x423d54['target'][_0x478df8(0x287)][_0x478df8(0x351)]);},0x0);}));const _0x53ef6f=document[_0x55e5ae(0x2f1)]('expense-form');_0x53ef6f&&_0x53ef6f[_0x55e5ae(0x214)](_0x55e5ae(0x281),async _0x852d55=>{const _0x1681ad=_0x55e5ae;_0x852d55[_0x1681ad(0x28b)]();const _0xb53216=document[_0x1681ad(0x2f1)](_0x1681ad(0x1f9));if(_0xb53216){let _0x1e9b64=_0xb53216[_0x1681ad(0x287)][_0x1681ad(0x28f)](/[^\d]/g,'');_0xb53216[_0x1681ad(0x287)]=_0x1e9b64;}},!![]);}function a0_0x55b7(){const _0x479500=['Mayo','transactions-loading','active','#10b981','selected','Categorías\x20cargadas:','/api/profile','hidden','name','close-category-modal-btn','confirm-modal-cancel','register-last-name','#current-year','hidden\x20p-3\x20text-center\x20rounded-lg','bg-gradient-to-r','amount','Escape','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Gastapp\x20:\x20Control\x20de\x20Finanzas','Categoría\x20agregada\x20exitosamente','profile-password','login-form','/api/version','style','expenses','¿Seguro\x20que\x20deseas\x20eliminar\x20esta\x20transacción?\x20Esta\x20acción\x20no\x20se\x20puede\x20deshacer.','remaining-budget','close-profile-modal-btn','first_name','info','admin-menu-item','stringify','removeEventListener','Error\x20al\x20verificar\x20sesión:','profile-firstname','admin','<div\x20class=\x22flex\x20justify-center\x22><div\x20class=\x22animate-spin\x20rounded-full\x20h-6\x20w-6\x20border-b-2\x20border-blue-600\x22></div></div>','description','Febrero','344935rEPQaM','entries','register-email','addEventListener','Bearer\x20','role','ID\x20de\x20transacción\x20inválido','Transacción\x20eliminada','edit-category','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22deleteCategory(\x27','Error\x20al\x20refrescar\x20categorías:','¡Registro\x20exitoso!\x20Ya\x20puedes\x20usar\x20la\x20app.','</span>','Por\x20favor\x20ingresa\x20un\x20nombre\x20para\x20la\x20categoría','localeCompare','register-password','user-avatar','doughnut','❌\x20Botón\x20de\x20gestión\x20de\x20categorías\x20no\x20encontrado','edit-transaction-modal','Error\x20inesperado\x20al\x20actualizar\x20transacción','Noviembre','isAdminAuthenticated','width','category_name','expense','.annual-budget-input','register','input[type=\x22number\x22]','Buscando\x20presupuesto\x20para:','Marzo','push','join','Categoría\x20eliminada','classList','next-month-btn','line','getItem','deleteCategory','El\x20monto\x20debe\x20ser\x20mayor\x20a\x200','profile-modal','/api/categories','fill','text-red-600','sort','confirm-modal','HTTP\x20error!\x20status:\x20','Las\x20contraseñas\x20no\x20coinciden','slice','querySelector','Error\x20al\x20obtener\x20presupuestos:','monthly-dashboard-view','reload','53179HFVlXQ','padStart','[editTransaction]\x20transactionId:','change','application/json','Error\x20al\x20cargar\x20categorías\x20en\x20el\x20modal:','opacity','new-category-name','edit-amount','register-first-name','/api/categories/','Error\x20al\x20agregar\x20categoría:','La\x20descripción\x20no\x20puede\x20estar\x20vacía','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20class=\x22text-sm\x20font-medium\x20text-gray-700\x20mb-1\x22>','mousedown','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20space-x-1\x20mt-2\x20sm:mt-0\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-edit\x22\x20onclick=\x22editTransaction(\x27','target','map','❌\x20No\x20hay\x20sesión\x20activa,\x20redirigiendo\x20a\x20/','headers','edit-annual-budgets-btn','Funcionalidad\x20de\x20reasignación\x20en\x20desarrollo','[editTransactionForm]\x20currentEditTransactionId\x20inválido:','status','Balance\x20vs.\x20Presupuesto\x20-\x20','Error\x20al\x20refrescar\x20transacciones:','Bienvenido/a,\x20','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22w-4\x20h-4\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M11\x205H6a2\x202\x200\x2000-2\x202v11a2\x202\x200\x20002\x202h11a2\x202\x200\x20002-2v-5m-1.414-9.414a2\x202\x200\x20112.828\x202.828L11.828\x2015H9v-2.828l8.586-8.586z\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn-action\x20btn-delete\x22\x20onclick=\x22deleteTransaction(\x27','toISOString','#84cc16','POST','Diciembre','innerHTML','#2563eb','No\x20se\x20pudo\x20eliminar\x20la\x20categoría','No\x20hay\x20sesión\x20activa','text-gray-500','/api/budgets','/auth/register','463966YXRWxn','bg-white','18405Eqwolv','Error\x20al\x20cargar\x20la\x20aplicación','¡Inicio\x20de\x20sesión\x20exitoso!','keydown','type','find','email','textContent','edit-description','login','edit-annual-budgets-modal','Sin\x20categoría','to-purple-500','category_id','key','input','querySelectorAll','Error\x20al\x20agregar\x20transacción:','submit','message','[editTransaction]\x20Transacción\x20no\x20encontrada\x20para\x20id:','Transacción\x20no\x20encontrada','Error\x20al\x20refrescar\x20presupuestos:','_cleanup','value','all','add','categories-list','preventDefault','🚀\x20Inicializando\x20aplicación...','<span\x20class=\x22font-bold\x20text-yellow-500\x22>Sin\x20categoría</span>','✅\x20Aplicación\x20inicializada\x20correctamente','replace','split','setSelectionRange','[editTransactionForm]\x20Error\x20inesperado:','<span\x20class=\x22text-gray-500\x22>','🔒\x20Menú\x20admin\x20visible\x20para\x20usuario\x20admin','#ef4444','profile-email','budgets-loading','NFC','token','category-modal','login-submit','Error\x20al\x20obtener\x20datos\x20de\x20gráficos:','edit-annual-budgets-form','sub','fixed\x20top-4\x20right-4\x20p-4\x20rounded-lg\x20shadow-lg\x20z-50\x20transition-all\x20duration-300\x20','profile-form','Categorías\x20obtenidas\x20para\x20usuario','sidebar-nav','Error\x20al\x20cargar\x20transacciones','setItem','last_name','✅\x20Event\x20listeners\x20configurados','[editTransaction]\x20transactionId\x20inválido:','</option>','📊\x20Cargando\x20datos\x20iniciales...','Error\x20en\x20el\x20inicio\x20de\x20sesión','Por\x20favor\x20ingresa\x20un\x20email\x20válido','</p>','Error\x20de\x20conexión.\x20Intenta\x20nuevamente.','option','edit-annual-year','Error\x20al\x20agregar\x20transacción','Error\x20al\x20actualizar\x20presupuestos','filter','Junio','w-1/2\x20py-3\x20rounded-tr-xl\x20rounded-tl-none\x20text-gray-500\x20bg-white\x20font-semibold\x20text-lg\x20transition-colors','\x22\x20class=\x22annual-budget-input\x20px-3\x20py-2\x20rounded-lg\x20border\x20border-gray-300\x20focus:ring-2\x20focus:ring-blue-500\x22\x20required\x20/>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','removeItem','className','Error\x20al\x20obtener\x20transacciones:','comments','toLocaleString','income','Transacción\x20actualizada','bg-red-100\x20text-red-700','[editTransactionForm]\x20update','Error\x20al\x20obtener\x20datos\x20anuales:','🔧\x20Configurando\x20event\x20listeners...','created_at','profile-password-repeat','total-income','login-email','div','disabled','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20items-center\x20justify-between\x20p-3\x20bg-gray-50\x20rounded-lg\x20mb-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x20text-gray-800\x22>','display','values','Error\x20al\x20obtener\x20transacciones','21861565tNBRis','#06b6d4','<p\x20class=\x22text-red-500\x20text-center\x20py-4\x22>Error\x20al\x20cargar\x20categorías</p>','Error\x20al\x20actualizar\x20perfil','focus','Julio','Presupuestos\x20cargados:','/app.html','close-edit-annual-budgets-btn','¿Estás\x20seguro?','Septiembre','reassign-modal','bg-green-100\x20text-green-700','Error\x20al\x20cargar\x20presupuestos','click','[editTransaction]\x20Elementos\x20del\x20modal\x20no\x20encontrados','2168ktUfmT','toLocaleDateString','#065f46','Enero','Error\x20al\x20eliminar\x20categoría','auth-message','Error\x20al\x20refrescar\x20gráficos:','PUT','success','/api/transactions','reset','true','Por\x20favor\x20completa\x20todos\x20los\x20campos','¿Seguro\x20que\x20deseas\x20eliminar\x20esta\x20categoría?\x20Esta\x20acción\x20no\x20se\x20puede\x20deshacer.','parse','Presupuesto\x20mensual\x20encontrado:','charts-loading','location','getContext','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-xs\x20text-gray-400\x22>','annual-chart','✅\x20Botón\x20de\x20logout\x20encontrado','getElementById','edit-comments','expense-list-container','log','loading-indicator','bg-red-500\x20text-white','[editTransaction]\x20Error\x20al\x20obtener\x20categorías:','\x22\x20value=\x22','appendChild','bottom','block','Eliminar\x20transacción','nav-monthly','add-category-form','Transacción\x20agregada\x20exitosamente','Error\x20al\x20obtener\x20categorías','#eab308','app-container','#22c55e','#059669','Error\x20al\x20agregar\x20categoría','expenses-chart','normalize','admin.html','clearRect','top','password','body','register-form','current-month-display','none','startsWith','onclick','22qkPeby','createElement','✅\x20Sesión\x20activa\x20encontrada','<p\x20class=\x22text-gray-500\x20text-center\x20py-8\x22>No\x20hay\x20transacciones\x20este\x20mes</p>','Error\x20al\x20cerrar\x20sesión:','function','No\x20se\x20encontró\x20el\x20contenedor\x20de\x20la\x20lista\x20de\x20categorías','Presupuesto','140073ygXFjP','Debes\x20seleccionar\x20una\x20categoría','#f97316','Agosto','DELETE','trim','198btWSor','removeChild','toUpperCase','DOMContentLoaded','bg-blue-500\x20text-white','annual-dashboard-view','PATCH','[editTransaction]\x20Error\x20al\x20obtener\x20transacción:','<p\x20class=\x22text-xs\x20text-gray-400\x20mt-1\x22>','remove','profile-lastname','total-expenses','<option\x20value=\x22\x22>Seleccionar\x20categoría</option>','Error\x20al\x20cargar\x20gráficos','getMonth','expense-form','Octubre','close-edit-transaction-btn','📊\x20Renderizando\x20gráficos\x20con\x20datos:','input[name=\x22transaction_type\x22]:checked','getFullYear','error','#042f2e','Abril','month','Error\x20al\x20cerrar\x20sesión','Perfil\x20actualizado','statusText','/auth/login','setupModalCloseEvents','/api/admin/users/','welcome-message','nav-annual','La\x20contraseña\x20debe\x20tener\x20al\x20menos\x206\x20caracteres','deleteTransaction','contains','text-gray-800','Error\x20en\x20fetchWithAuth:','year-selector','from-blue-600','p-3\x20my-4\x20rounded-lg\x20text-center\x20','keys','showCategoryModal','version','6384780XrnrZG','destroy','text-white','confirm-modal-accept','jwt_token','length','Error\x20al\x20obtener\x20categorías:','forEach','4GMtajU','category','categories-loading','main-title','tab-login','form','Balance','text-green-600','register-submit','round','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20items-end\x20sm:items-center\x20sm:flex-row\x20sm:text-right\x20mt-2\x20sm:mt-0\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22mr-0\x20sm:mr-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22font-semibold\x20','Error\x20al\x20actualizar\x20transacción','json','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','es-CL'];a0_0x55b7=function(){return _0x479500;};return a0_0x55b7();}async function handleAuthPage(){const _0x558edf=a0_0x5bf2c6,_0x23efb9=document[_0x558edf(0x2f1)](_0x558edf(0x1ff)),_0x49fbb8=document['getElementById'](_0x558edf(0x30d)),_0x51c1d2=document[_0x558edf(0x2f1)](_0x558edf(0x358)),_0x409022=document['getElementById']('tab-register'),_0xc2b7c3=document[_0x558edf(0x2f1)](_0x558edf(0x2e0));_0x51c1d2[_0x558edf(0x2b7)]='w-1/2\x20py-3\x20rounded-tl-xl\x20rounded-tr-none\x20text-gray-500\x20bg-white\x20font-semibold\x20text-lg\x20transition-colors',_0x409022[_0x558edf(0x2b7)]=_0x558edf(0x2b4),_0x51c1d2['classList'][_0x558edf(0x289)](_0x558edf(0x1ec));function _0x4b3ef4(_0x56669d){const _0x3b2584=_0x558edf;_0x56669d===_0x3b2584(0x278)?(_0x51c1d2['classList'][_0x3b2584(0x289)](_0x3b2584(0x1f8),'from-blue-600',_0x3b2584(0x27b),_0x3b2584(0x34e)),_0x51c1d2[_0x3b2584(0x233)][_0x3b2584(0x329)](_0x3b2584(0x26a),_0x3b2584(0x26e)),_0x409022[_0x3b2584(0x233)][_0x3b2584(0x329)](_0x3b2584(0x1f8),_0x3b2584(0x347),_0x3b2584(0x27b),_0x3b2584(0x34e)),_0x409022[_0x3b2584(0x233)][_0x3b2584(0x289)]('text-gray-500',_0x3b2584(0x26e)),_0x23efb9[_0x3b2584(0x233)][_0x3b2584(0x329)]('hidden'),_0x49fbb8['classList'][_0x3b2584(0x289)](_0x3b2584(0x1f1))):(_0x409022[_0x3b2584(0x233)][_0x3b2584(0x289)](_0x3b2584(0x1f8),_0x3b2584(0x347),_0x3b2584(0x27b),_0x3b2584(0x34e)),_0x409022[_0x3b2584(0x233)][_0x3b2584(0x329)](_0x3b2584(0x26a),_0x3b2584(0x26e)),_0x51c1d2[_0x3b2584(0x233)][_0x3b2584(0x329)](_0x3b2584(0x1f8),_0x3b2584(0x347),_0x3b2584(0x27b),_0x3b2584(0x34e)),_0x51c1d2[_0x3b2584(0x233)][_0x3b2584(0x289)](_0x3b2584(0x26a),'bg-white'),_0x23efb9[_0x3b2584(0x233)][_0x3b2584(0x289)](_0x3b2584(0x1f1)),_0x49fbb8[_0x3b2584(0x233)][_0x3b2584(0x329)](_0x3b2584(0x1f1)));}_0x4b3ef4('login'),_0x51c1d2[_0x558edf(0x214)]('click',_0x2c7544=>{const _0x12655d=_0x558edf;_0x2c7544[_0x12655d(0x28b)](),_0x4b3ef4('login'),_0xc2b7c3[_0x12655d(0x2b7)]=_0x12655d(0x1f7);}),_0x409022[_0x558edf(0x214)](_0x558edf(0x2d9),_0x2b1571=>{const _0x1d84d3=_0x558edf;_0x2b1571[_0x1d84d3(0x28b)](),_0x4b3ef4(_0x1d84d3(0x22c)),_0xc2b7c3[_0x1d84d3(0x2b7)]=_0x1d84d3(0x1f7);});try{const _0x37ee23=localStorage[_0x558edf(0x236)](_0x558edf(0x350));if(_0x37ee23){window[_0x558edf(0x2ec)][_0x558edf(0x28f)](_0x558edf(0x2d2));return;}}catch(_0x211076){console['error'](_0x558edf(0x20b),_0x211076);}_0x23efb9[_0x558edf(0x214)](_0x558edf(0x281),async _0x33935d=>{const _0x2180d2=_0x558edf;_0x33935d[_0x2180d2(0x28b)]();const _0x489988=document['getElementById'](_0x2180d2(0x2c4))[_0x2180d2(0x287)]['trim'](),_0x4e329=document['getElementById']('login-password')[_0x2180d2(0x287)];if(!_0x489988||!_0x4e329){_0x1f4b5e(_0x2180d2(0x2e7),_0x2180d2(0x335));return;}if(!isValidEmail(_0x489988)){_0x1f4b5e('Por\x20favor\x20ingresa\x20un\x20email\x20válido',_0x2180d2(0x335));return;}showLoading(_0x2180d2(0x29b),!![]);try{const _0x29ac8f=await fetch(_0x2180d2(0x33c),{'method':_0x2180d2(0x264),'headers':{'Content-Type':_0x2180d2(0x24a)},'body':JSON[_0x2180d2(0x209)]({'email':_0x489988,'password':_0x4e329})}),_0x172f1c=await _0x29ac8f['json']();!_0x29ac8f['ok']?_0x1f4b5e(_0x172f1c[_0x2180d2(0x282)]||_0x2180d2(0x2aa),_0x2180d2(0x335)):(localStorage['setItem'](_0x2180d2(0x350),_0x172f1c[_0x2180d2(0x299)]),showNotification(_0x2180d2(0x271),_0x2180d2(0x2e3)),setTimeout(()=>window[_0x2180d2(0x2ec)][_0x2180d2(0x28f)]('/app.html'),0x3e8));}catch(_0x175cf1){_0x1f4b5e('Error\x20de\x20conexión.\x20Intenta\x20nuevamente.',_0x2180d2(0x335));}finally{showLoading(_0x2180d2(0x29b),![]);}}),_0x49fbb8[_0x558edf(0x214)](_0x558edf(0x281),async _0x2c56c6=>{const _0x416c22=_0x558edf;_0x2c56c6[_0x416c22(0x28b)]();const _0x2f1f5f=document[_0x416c22(0x2f1)](_0x416c22(0x213))['value'][_0x416c22(0x31f)](),_0x28a654=document[_0x416c22(0x2f1)](_0x416c22(0x220))[_0x416c22(0x287)],_0x1057c0=document[_0x416c22(0x2f1)](_0x416c22(0x24f))[_0x416c22(0x287)]['trim'](),_0x494e2e=document['getElementById'](_0x416c22(0x1f5))['value']['trim']();if(!_0x2f1f5f||!_0x28a654||!_0x1057c0||!_0x494e2e){_0x1f4b5e(_0x416c22(0x2e7),_0x416c22(0x335));return;}if(!isValidEmail(_0x2f1f5f)){_0x1f4b5e(_0x416c22(0x2ab),'error');return;}if(_0x28a654['length']<0x6){_0x1f4b5e(_0x416c22(0x341),'error');return;}showLoading(_0x416c22(0x35c),!![]);try{const _0x47500b=await fetch(_0x416c22(0x26c),{'method':_0x416c22(0x264),'headers':{'Content-Type':_0x416c22(0x24a)},'body':JSON[_0x416c22(0x209)]({'email':_0x2f1f5f,'password':_0x28a654,'firstName':_0x1057c0,'lastName':_0x494e2e})}),_0x5de766=await _0x47500b[_0x416c22(0x360)]();!_0x47500b['ok']?_0x1f4b5e(_0x5de766[_0x416c22(0x282)]||'Error\x20en\x20el\x20registro',_0x416c22(0x335)):(localStorage[_0x416c22(0x2a4)](_0x416c22(0x350),_0x5de766[_0x416c22(0x299)]),_0x1f4b5e(_0x416c22(0x21c),_0x416c22(0x2e3)),_0x49fbb8['reset'](),setTimeout(()=>window[_0x416c22(0x2ec)][_0x416c22(0x245)](),0x4b0));}catch(_0x74c5f4){_0x1f4b5e(_0x416c22(0x2ad),_0x416c22(0x335));}finally{showLoading(_0x416c22(0x35c),![]);}});function _0x1f4b5e(_0x5e5561,_0x3e7aad){const _0x40a478=_0x558edf;_0xc2b7c3[_0x40a478(0x276)]=_0x5e5561,_0xc2b7c3[_0x40a478(0x2b7)]=_0x40a478(0x348)+(_0x3e7aad===_0x40a478(0x335)?_0x40a478(0x2bd):_0x40a478(0x2d7));}}let refreshTimeout;function debounceRefresh(_0x504e3d,_0x1ef3a2=0x12c){clearTimeout(refreshTimeout),refreshTimeout=setTimeout(_0x504e3d,_0x1ef3a2);}async function refreshCategoriesUI(){const _0x2e972b=a0_0x5bf2c6;try{showLoading(_0x2e972b(0x356),!![]);let _0x5ec083=await getCategories();_0x5ec083=_0x5ec083[_0x2e972b(0x241)]()[_0x2e972b(0x23d)]((_0x3e758d,_0x17b112)=>_0x3e758d[_0x2e972b(0x1f2)]['localeCompare'](_0x17b112[_0x2e972b(0x1f2)],'es')),renderCategorySelector(_0x5ec083),renderCategoryList(_0x5ec083);}catch(_0x18f74b){console['error'](_0x2e972b(0x21b),_0x18f74b),showNotification('Error\x20al\x20cargar\x20categorías',_0x2e972b(0x335));}finally{showLoading(_0x2e972b(0x356),![]);}}async function refreshBudgetsUI(){const _0x311f94=a0_0x5bf2c6;try{showLoading(_0x311f94(0x297),!![]);const _0x532a5d=await getBudgets();renderBudgetList(_0x532a5d);}catch(_0x5bc1f3){console[_0x311f94(0x335)](_0x311f94(0x285),_0x5bc1f3),showNotification(_0x311f94(0x2d8),'error');}finally{showLoading(_0x311f94(0x297),![]);}}async function refreshTransactionsUI(){const _0x256f05=a0_0x5bf2c6;try{showLoading('transactions-loading',!![]);const _0x23db50=await getTransactions();renderTransactionList(_0x23db50);}catch(_0x56f7ba){console[_0x256f05(0x335)](_0x256f05(0x25f),_0x56f7ba),showNotification(_0x256f05(0x2a3),_0x256f05(0x335));}finally{showLoading(_0x256f05(0x1eb),![]);}}async function refreshChartsUI(){const _0x5cc656=a0_0x5bf2c6;try{showLoading(_0x5cc656(0x2eb),!![]);const _0x133709=await getChartData();renderCharts(_0x133709);}catch(_0x118be4){console[_0x5cc656(0x335)](_0x5cc656(0x2e1),_0x118be4),showNotification(_0x5cc656(0x32d),'error');}finally{showLoading(_0x5cc656(0x2eb),![]);}}async function fetchWithAuth(_0x182790,_0x3499b7={}){const _0xaf0d42=a0_0x5bf2c6,_0x2c692d=localStorage[_0xaf0d42(0x236)](_0xaf0d42(0x350));if(!_0x2c692d)return null;try{const _0xad6c21=await fetch(_0x182790,{..._0x3499b7,'headers':{'Content-Type':'application/json','Authorization':_0xaf0d42(0x215)+_0x2c692d,..._0x3499b7[_0xaf0d42(0x259)]}});if(!_0xad6c21['ok'])throw new Error(_0xaf0d42(0x23f)+_0xad6c21['status']);return _0xad6c21;}catch(_0x16da99){console['error'](_0xaf0d42(0x345),_0x16da99);throw _0x16da99;}}let currentUser=null,currentMonth=new Date()[a0_0x5bf2c6(0x32e)](),currentYear=new Date()[a0_0x5bf2c6(0x334)]();async function getCurrentUser(){const _0x467043=a0_0x5bf2c6,_0x42be1e=localStorage[_0x467043(0x236)](_0x467043(0x350));if(!_0x42be1e)return null;try{const _0x528723=JSON[_0x467043(0x2e9)](atob(_0x42be1e[_0x467043(0x290)]('.')[0x1]));if(_0x528723[_0x467043(0x216)]===_0x467043(0x20d))return{'id':_0x528723[_0x467043(0x29e)],'email':_0x528723[_0x467043(0x275)],'first_name':_0x528723[_0x467043(0x206)],'last_name':_0x528723[_0x467043(0x2a5)],'role':_0x467043(0x20d)};if(_0x528723[_0x467043(0x206)]&&_0x528723[_0x467043(0x2a5)])return{'id':_0x528723['sub'],'email':_0x528723[_0x467043(0x275)],'first_name':_0x528723[_0x467043(0x206)],'last_name':_0x528723[_0x467043(0x2a5)],'role':_0x528723[_0x467043(0x216)]||'user'};if(_0x528723[_0x467043(0x216)]&&_0x528723['role']!==_0x467043(0x20d))return{'id':_0x528723[_0x467043(0x29e)],'email':_0x528723[_0x467043(0x275)],'role':_0x528723[_0x467043(0x216)]};return{'id':_0x528723[_0x467043(0x29e)],'email':_0x528723['email'],'role':'user'};}catch{return null;}}async function getCategories(){const _0x173b4c=a0_0x5bf2c6;try{const _0x34024d=localStorage[_0x173b4c(0x236)](_0x173b4c(0x350));if(!_0x34024d)throw new Error('No\x20hay\x20sesión\x20activa');const _0x12974f=await fetch(_0x173b4c(0x23a),{'headers':{'Authorization':'Bearer\x20'+_0x34024d}});if(!_0x12974f['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x12974f[_0x173b4c(0x25d)]);const _0x3841e1=await _0x12974f['json']();return console[_0x173b4c(0x2f4)](_0x173b4c(0x2a1),currentUser['id'],_0x3841e1),_0x3841e1||[];}catch(_0x5f52a2){return console[_0x173b4c(0x335)](_0x173b4c(0x352),_0x5f52a2),showNotification('Error\x20al\x20obtener\x20categorías','error'),[];}}async function getTransactions(){const _0x5d316d=a0_0x5bf2c6;try{const _0x6495f=localStorage[_0x5d316d(0x236)](_0x5d316d(0x350));if(!_0x6495f)throw new Error(_0x5d316d(0x269));const _0x16d4d6=currentYear+'-'+String(currentMonth+0x1)[_0x5d316d(0x247)](0x2,'0'),_0x1116a8=await fetch(_0x5d316d(0x2e4),{'headers':{'Authorization':_0x5d316d(0x215)+_0x6495f}});if(!_0x1116a8['ok'])throw new Error(_0x5d316d(0x23f)+_0x1116a8[_0x5d316d(0x25d)]);const _0xc1098f=await _0x1116a8['json']();return _0xc1098f[_0x5d316d(0x2b2)](_0x5e3a9c=>_0x5e3a9c[_0x5d316d(0x338)]===_0x16d4d6);}catch(_0x35233c){return console[_0x5d316d(0x335)](_0x5d316d(0x2b8),_0x35233c),[];}}async function getBudgets(){const _0x6dbf16=a0_0x5bf2c6;try{const _0xefcb15=localStorage[_0x6dbf16(0x236)](_0x6dbf16(0x350));if(!_0xefcb15)throw new Error(_0x6dbf16(0x269));const _0x9f0d7e=currentYear+'-'+String(currentMonth+0x1)['padStart'](0x2,'0'),_0x3b8ddc=await fetch(_0x6dbf16(0x26b),{'headers':{'Authorization':_0x6dbf16(0x215)+_0xefcb15}});if(!_0x3b8ddc['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x3b8ddc[_0x6dbf16(0x25d)]);const _0x40245a=await _0x3b8ddc[_0x6dbf16(0x360)]();return console[_0x6dbf16(0x2f4)](_0x6dbf16(0x22e),_0x9f0d7e,'Presupuestos\x20disponibles:',_0x40245a[_0x6dbf16(0x257)](_0x544b5f=>_0x544b5f[_0x6dbf16(0x338)])),_0x40245a[_0x6dbf16(0x2b2)](_0x105c07=>_0x105c07[_0x6dbf16(0x338)]===_0x9f0d7e);}catch(_0xb56c4c){return console['error'](_0x6dbf16(0x243),_0xb56c4c),[];}}function renderCategorySelector(_0x384597){const _0x1f8f39=a0_0x5bf2c6,_0x1bf15c=document[_0x1f8f39(0x2f1)](_0x1f8f39(0x355));if(!_0x1bf15c)return;_0x1bf15c[_0x1f8f39(0x266)]=_0x1f8f39(0x32c),_0x384597['forEach'](_0x494b43=>{const _0x4bc269=_0x1f8f39,_0x5c5037=document[_0x4bc269(0x313)]('option');_0x5c5037[_0x4bc269(0x287)]=_0x494b43['id'],_0x5c5037[_0x4bc269(0x276)]=_0x494b43['name'],_0x1bf15c[_0x4bc269(0x2f9)](_0x5c5037);});}function renderTransactionList(_0x31da60){const _0x20a6f7=a0_0x5bf2c6,_0x3dd1a1=document[_0x20a6f7(0x2f1)](_0x20a6f7(0x2f3));if(!_0x3dd1a1)return;if(_0x31da60[_0x20a6f7(0x351)]===0x0){_0x3dd1a1['innerHTML']=_0x20a6f7(0x315);return;}_0x31da60[_0x20a6f7(0x23d)]((_0x378e2a,_0x1c980c)=>new Date(_0x1c980c[_0x20a6f7(0x2c1)])-new Date(_0x378e2a[_0x20a6f7(0x2c1)])),_0x3dd1a1[_0x20a6f7(0x266)]=_0x31da60[_0x20a6f7(0x257)](_0x5912cc=>{const _0x3ceedb=_0x20a6f7,_0x1f7836=!_0x5912cc[_0x3ceedb(0x229)]||_0x5912cc['category_name']===_0x3ceedb(0x27a),_0x19ed19=_0x1f7836?_0x3ceedb(0x28d):_0x3ceedb(0x293)+_0x5912cc[_0x3ceedb(0x229)]+_0x3ceedb(0x21d);return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20flex-col\x20sm:flex-row\x20sm:items-center\x20justify-between\x20p-4\x20bg-gray-50\x20rounded-lg\x20mb-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-1\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h4\x20class=\x22font-semibold\x20text-gray-800\x22>'+_0x5912cc[_0x3ceedb(0x20f)]+'</h4>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20class=\x22text-sm\x22>'+_0x19ed19+_0x3ceedb(0x361)+(_0x5912cc[_0x3ceedb(0x2b9)]?_0x3ceedb(0x328)+_0x5912cc[_0x3ceedb(0x2b9)]+_0x3ceedb(0x2ac):'')+_0x3ceedb(0x35e)+(_0x5912cc[_0x3ceedb(0x273)]===_0x3ceedb(0x2bb)?'text-green-600':_0x3ceedb(0x23c))+_0x3ceedb(0x1fb)+(_0x5912cc[_0x3ceedb(0x273)]===_0x3ceedb(0x2bb)?'+':'-')+formatCurrency(_0x5912cc[_0x3ceedb(0x1f9)])+_0x3ceedb(0x2ee)+new Date(_0x5912cc[_0x3ceedb(0x2c1)])[_0x3ceedb(0x2dc)]()+_0x3ceedb(0x255)+_0x5912cc['id']+_0x3ceedb(0x261)+_0x5912cc['id']+'\x27)\x22\x20title=\x22Eliminar\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22w-4\x20h-4\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M6\x2018L18\x206M6\x206l12\x2012\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20';})['join']('');}function renderCategoryList(_0x1ccfec){const _0xdf19ec=a0_0x5bf2c6;console[_0xdf19ec(0x2f4)](_0xdf19ec(0x1ef),_0x1ccfec);}function renderBudgetList(_0x19985a){const _0x3d9944=a0_0x5bf2c6;console[_0x3d9944(0x2f4)](_0x3d9944(0x2d1),_0x19985a);}async function getChartData(){const _0xd5c931=a0_0x5bf2c6;try{const _0x1da3db=await getTransactions(),_0x3e81bd=await getCategories(),_0x2d083c={},_0xd50dd3={};return _0x1da3db['forEach'](_0x472944=>{const _0x43c83f=a0_0x2a45,_0x48aaa7=_0x472944[_0x43c83f(0x229)]||_0x43c83f(0x27a),_0x3bca49=Number(_0x472944[_0x43c83f(0x1f9)])||0x0;if(_0x472944[_0x43c83f(0x273)]===_0x43c83f(0x22a))_0x2d083c[_0x48aaa7]=(_0x2d083c[_0x48aaa7]||0x0)+_0x3bca49;else _0x472944['type']===_0x43c83f(0x2bb)&&(_0xd50dd3[_0x48aaa7]=(_0xd50dd3[_0x48aaa7]||0x0)+_0x3bca49);}),{'expenses':_0x2d083c,'income':_0xd50dd3,'categories':_0x3e81bd};}catch(_0x2f89f0){return console[_0xd5c931(0x335)](_0xd5c931(0x29c),_0x2f89f0),{'expenses':{},'income':{},'categories':[]};}}let expensesChartInstance=null,incomeChartInstance=null;function renderCharts(_0x42fe77){const _0x2bef02=a0_0x5bf2c6;console['log'](_0x2bef02(0x332),_0x42fe77);const _0x58dabe=document[_0x2bef02(0x2f1)]('charts-section'),_0x1ea0a8=document[_0x2bef02(0x2f1)](_0x2bef02(0x306)),_0x3737d1=document[_0x2bef02(0x2f1)]('income-chart'),_0x4b8af7=Object[_0x2bef02(0x349)](_0x42fe77[_0x2bef02(0x202)])[_0x2bef02(0x351)]>0x0,_0x203df3=Object[_0x2bef02(0x349)](_0x42fe77[_0x2bef02(0x2bb)])[_0x2bef02(0x351)]>0x0;_0x58dabe&&(!_0x4b8af7&&!_0x203df3?_0x58dabe['style'][_0x2bef02(0x2c8)]=_0x2bef02(0x30f):_0x58dabe['style']['display']='');if(_0x1ea0a8){if(expensesChartInstance)expensesChartInstance['destroy']();_0x4b8af7?(expensesChartInstance=new Chart(_0x1ea0a8,{'type':'doughnut','data':{'labels':Object[_0x2bef02(0x349)](_0x42fe77['expenses']),'datasets':[{'data':Object[_0x2bef02(0x2c9)](_0x42fe77[_0x2bef02(0x202)]),'backgroundColor':[_0x2bef02(0x295),_0x2bef02(0x31c),_0x2bef02(0x301),_0x2bef02(0x263),_0x2bef02(0x303),'#14b8a6',_0x2bef02(0x2cc),'#3b82f6']}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x2bef02(0x2fa)}}}}),_0x1ea0a8['style']['display']=''):(_0x1ea0a8[_0x2bef02(0x2ed)]('2d')[_0x2bef02(0x309)](0x0,0x0,_0x1ea0a8[_0x2bef02(0x228)],_0x1ea0a8['height']),expensesChartInstance=null,_0x1ea0a8[_0x2bef02(0x201)][_0x2bef02(0x2c8)]='none');}if(_0x3737d1){if(incomeChartInstance)incomeChartInstance[_0x2bef02(0x34d)]();_0x203df3?(incomeChartInstance=new Chart(_0x3737d1,{'type':_0x2bef02(0x222),'data':{'labels':Object[_0x2bef02(0x349)](_0x42fe77['income']),'datasets':[{'data':Object[_0x2bef02(0x2c9)](_0x42fe77[_0x2bef02(0x2bb)]),'backgroundColor':[_0x2bef02(0x1ed),_0x2bef02(0x304),'#047857',_0x2bef02(0x2dd),'#064e3b','#022c22',_0x2bef02(0x336),'#0f766e']}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x2bef02(0x2fa)}}}}),_0x3737d1[_0x2bef02(0x201)][_0x2bef02(0x2c8)]=''):(_0x3737d1[_0x2bef02(0x2ed)]('2d')['clearRect'](0x0,0x0,_0x3737d1[_0x2bef02(0x228)],_0x3737d1['height']),incomeChartInstance=null,_0x3737d1[_0x2bef02(0x201)][_0x2bef02(0x2c8)]=_0x2bef02(0x30f));}}function setupModalCloseEvents(_0x3b6c8d,_0x5d156c){const _0x425fd3=a0_0x5bf2c6,_0xb75973=document[_0x425fd3(0x2f1)](_0x3b6c8d);if(!_0xb75973)return;function _0x312115(_0xf8aa81){const _0x4cca3b=_0x425fd3;if(_0xf8aa81[_0x4cca3b(0x27d)]===_0x4cca3b(0x1fa))_0x5d156c();}function _0x3b7900(_0x47c87a){if(_0x47c87a['target']===_0xb75973)_0x5d156c();}document['addEventListener']('keydown',_0x312115),_0xb75973[_0x425fd3(0x214)]('mousedown',_0x3b7900),_0xb75973[_0x425fd3(0x286)]=()=>{const _0x1a273a=_0x425fd3;document['removeEventListener'](_0x1a273a(0x272),_0x312115),_0xb75973[_0x1a273a(0x20a)]('mousedown',_0x3b7900);};}function showCategoryModal(){const _0x2796a7=a0_0x5bf2c6,_0x49a3db=document[_0x2796a7(0x2f1)](_0x2796a7(0x29a));if(!_0x49a3db){console[_0x2796a7(0x335)]('No\x20se\x20encontró\x20el\x20modal\x20de\x20categorías');return;}_0x49a3db[_0x2796a7(0x266)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22modal-content\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20class=\x22text-lg\x20font-semibold\x20text-gray-800\x20mb-4\x22>Gestionar\x20Categorías</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22categories-list\x22\x20class=\x22mb-4\x20max-h-60\x20overflow-y-auto\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<form\x20id=\x22add-category-form\x22\x20class=\x22space-y-3\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20id=\x22new-category-name\x22\x20placeholder=\x22Nueva\x20Categoría\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20class=\x22w-full\x20px-4\x20py-2\x20bg-gray-100\x20border-transparent\x20rounded-lg\x22\x20required>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex\x20space-x-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22submit\x22\x20class=\x22flex-1\x20bg-blue-600\x20text-white\x20font-semibold\x20py-2\x20rounded-lg\x20hover:bg-blue-700\x20transition\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Agregar\x20Categoría\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20type=\x22button\x22\x20id=\x22close-category-modal-btn\x22\x20class=\x22px-4\x20py-2\x20bg-gray-300\x20text-gray-700\x20rounded-lg\x20hover:bg-gray-400\x20transition\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Cerrar\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</form>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x49a3db['classList'][_0x2796a7(0x329)]('hidden'),loadCategoriesList(),setupCategoryForm(),setupModalCloseEvents(_0x2796a7(0x29a),hideCategoryModal),document[_0x2796a7(0x2f1)](_0x2796a7(0x1f3))[_0x2796a7(0x311)]=hideCategoryModal;}function hideCategoryModal(){const _0x412a90=a0_0x5bf2c6,_0x1937e9=document[_0x412a90(0x2f1)]('category-modal');if(_0x1937e9){_0x1937e9['classList'][_0x412a90(0x289)]('hidden');if(_0x1937e9[_0x412a90(0x286)])_0x1937e9[_0x412a90(0x286)]();}}async function loadCategoriesList(){const _0xf99bd8=a0_0x5bf2c6,_0x57d8a9=document[_0xf99bd8(0x2f1)](_0xf99bd8(0x28a));if(!_0x57d8a9){console[_0xf99bd8(0x335)](_0xf99bd8(0x318));return;}try{let _0x144b34=await getCategories();if(!_0x144b34||_0x144b34[_0xf99bd8(0x351)]===0x0){_0x57d8a9[_0xf99bd8(0x266)]='<p\x20class=\x22text-gray-500\x20text-center\x20py-4\x22>No\x20hay\x20categorías\x20definidas</p>',renderCategorySelector([]);return;}_0x144b34=_0x144b34[_0xf99bd8(0x241)]()[_0xf99bd8(0x23d)]((_0x58d237,_0x377df1)=>_0x58d237[_0xf99bd8(0x1f2)][_0xf99bd8(0x21f)](_0x377df1[_0xf99bd8(0x1f2)],'es')),_0x57d8a9[_0xf99bd8(0x266)]=_0x144b34[_0xf99bd8(0x257)](_0x44ace9=>_0xf99bd8(0x2c7)+_0x44ace9[_0xf99bd8(0x1f2)]+_0xf99bd8(0x21a)+_0x44ace9['id']+'\x27)\x22\x20class=\x22text-red-500\x20hover:text-red-700\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<svg\x20class=\x22w-5\x20h-5\x22\x20fill=\x22none\x22\x20stroke=\x22currentColor\x22\x20viewBox=\x220\x200\x2024\x2024\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<path\x20stroke-linecap=\x22round\x22\x20stroke-linejoin=\x22round\x22\x20stroke-width=\x222\x22\x20d=\x22M19\x207l-.867\x2012.142A2\x202\x200\x200116.138\x2021H7.862a2\x202\x200\x2001-1.995-1.858L5\x207m5\x204v6m4-6v6m1-10V4a1\x201\x200\x2000-1-1h-4a1\x201\x200\x2000-1\x201v3M4\x207h16\x22></path>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</svg>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20')['join'](''),renderCategorySelector(_0x144b34),console[_0xf99bd8(0x2f4)]('Lista\x20de\x20categorías\x20renderizada:',_0x144b34);}catch(_0x2c2d99){console['error'](_0xf99bd8(0x24b),_0x2c2d99),_0x57d8a9['innerHTML']=_0xf99bd8(0x2cd);}}function setupCategoryForm(){const _0x2d8deb=a0_0x5bf2c6,_0x147bad=document['getElementById'](_0x2d8deb(0x2fe));if(!_0x147bad)return;_0x147bad[_0x2d8deb(0x214)]('submit',async _0x20b62e=>{const _0x4335ba=_0x2d8deb;_0x20b62e['preventDefault']();const _0x290cb2=document[_0x4335ba(0x2f1)](_0x4335ba(0x24d)),_0x21e35a=_0x290cb2[_0x4335ba(0x287)]['trim']();if(!_0x21e35a){showNotification(_0x4335ba(0x21e),_0x4335ba(0x335));return;}try{await addCategory({'name':_0x21e35a}),_0x290cb2[_0x4335ba(0x287)]='',await loadCategoriesList(),await refreshCategoriesUI(),showNotification(_0x4335ba(0x1fd),_0x4335ba(0x2e3));}catch(_0x2b7c5b){console[_0x4335ba(0x335)](_0x4335ba(0x251),_0x2b7c5b),showNotification(_0x4335ba(0x305),_0x4335ba(0x335));}});}async function deleteCategory(_0x48f192){const _0x5c0495=a0_0x5bf2c6;showConfirmModal({'title':'Eliminar\x20categoría','message':_0x5c0495(0x2e8),'onConfirm':async()=>{const _0x5080f1=_0x5c0495;try{const _0x366251=localStorage[_0x5080f1(0x236)]('jwt_token'),_0x35b023=await fetch(_0x5080f1(0x250)+_0x48f192,{'method':_0x5080f1(0x31e),'headers':{'Authorization':_0x5080f1(0x215)+_0x366251}});if(!_0x35b023['ok'])throw new Error(_0x5080f1(0x2df));showNotification(_0x5080f1(0x232),_0x5080f1(0x2e3)),await refreshCategoriesUI();if(typeof loadCategoriesList===_0x5080f1(0x317))await loadCategoriesList();}catch(_0x433d71){showNotification(_0x5080f1(0x268),_0x5080f1(0x335));}}});}let currentEditTransactionId=null;async function editTransaction(_0x586619){const _0x13d11d=a0_0x5bf2c6;console[_0x13d11d(0x2f4)](_0x13d11d(0x248),_0x586619),currentEditTransactionId=_0x586619;const _0x1c51ce=document['getElementById'](_0x13d11d(0x224)),_0x1e5f84=document[_0x13d11d(0x2f1)]('edit-transaction-form'),_0x1f18e3=document[_0x13d11d(0x2f1)](_0x13d11d(0x277)),_0x176f2a=document[_0x13d11d(0x2f1)](_0x13d11d(0x24e)),_0x199255=document[_0x13d11d(0x2f1)](_0x13d11d(0x219)),_0x4749f0=document['getElementById'](_0x13d11d(0x2f2));if(!_0x1c51ce||!_0x1e5f84||!_0x1f18e3||!_0x176f2a||!_0x199255||!_0x4749f0){console[_0x13d11d(0x335)](_0x13d11d(0x2da));return;}if(!_0x586619){showNotification(_0x13d11d(0x217),'error'),console[_0x13d11d(0x335)](_0x13d11d(0x2a7),_0x586619);return;}const _0x3dc7d6=localStorage[_0x13d11d(0x236)](_0x13d11d(0x350));if(!_0x3dc7d6){showNotification('No\x20hay\x20sesión\x20activa',_0x13d11d(0x335));return;}const _0x5cc0e5=await fetch(_0x13d11d(0x2e4),{'headers':{'Authorization':_0x13d11d(0x215)+_0x3dc7d6}});if(!_0x5cc0e5['ok']){showNotification('Error\x20al\x20obtener\x20transacción',_0x13d11d(0x335)),console[_0x13d11d(0x335)](_0x13d11d(0x327),_0x5cc0e5['statusText']);return;}const _0x492304=await _0x5cc0e5[_0x13d11d(0x360)](),_0x4a0545=_0x492304[_0x13d11d(0x274)](_0xd799dd=>_0xd799dd['id']===_0x586619);if(!_0x4a0545){showNotification(_0x13d11d(0x284),'error'),console[_0x13d11d(0x335)](_0x13d11d(0x283),_0x586619);return;}_0x1f18e3[_0x13d11d(0x287)]=_0x4a0545['description']||'',_0x176f2a[_0x13d11d(0x287)]=_0x4a0545[_0x13d11d(0x1f9)]||'',_0x4749f0[_0x13d11d(0x287)]=_0x4a0545[_0x13d11d(0x2b9)]||'';const _0x3705cb=await fetch(_0x13d11d(0x23a),{'headers':{'Authorization':_0x13d11d(0x215)+_0x3dc7d6}});if(!_0x3705cb['ok']){showNotification(_0x13d11d(0x300),_0x13d11d(0x335)),console['error'](_0x13d11d(0x2f7),_0x3705cb[_0x13d11d(0x33b)]);return;}const _0x3d7b8b=await _0x3705cb[_0x13d11d(0x360)]();_0x199255[_0x13d11d(0x266)]=_0x3d7b8b[_0x13d11d(0x257)](_0x405f6f=>'<option\x20value=\x22'+_0x405f6f['id']+'\x22\x20'+(_0x405f6f['id']===_0x4a0545[_0x13d11d(0x27c)]?_0x13d11d(0x1ee):'')+'>'+_0x405f6f[_0x13d11d(0x1f2)]+_0x13d11d(0x2a8))[_0x13d11d(0x231)](''),_0x1c51ce['classList'][_0x13d11d(0x329)](_0x13d11d(0x1f1)),setupModalCloseEvents('edit-transaction-modal',hideEditTransactionModal);}function hideEditTransactionModal(){const _0x51f1d7=a0_0x5bf2c6,_0x16f016=document[_0x51f1d7(0x2f1)](_0x51f1d7(0x224));if(_0x16f016){_0x16f016[_0x51f1d7(0x233)][_0x51f1d7(0x289)](_0x51f1d7(0x1f1));if(_0x16f016[_0x51f1d7(0x286)])_0x16f016[_0x51f1d7(0x286)]();}currentEditTransactionId=null;}const closeEditTransactionBtn=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x331));closeEditTransactionBtn&&closeEditTransactionBtn[a0_0x5bf2c6(0x214)]('click',hideEditTransactionModal);const editTransactionForm=document['getElementById']('edit-transaction-form');editTransactionForm&&editTransactionForm[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x281),async _0x118899=>{const _0x2cccd3=a0_0x5bf2c6;_0x118899[_0x2cccd3(0x28b)]();if(!currentEditTransactionId){showNotification('ID\x20de\x20transacción\x20inválido',_0x2cccd3(0x335)),console[_0x2cccd3(0x335)](_0x2cccd3(0x25c),currentEditTransactionId);return;}const _0x375dea=document['getElementById'](_0x2cccd3(0x277))[_0x2cccd3(0x287)][_0x2cccd3(0x31f)](),_0x2879a6=parseFloat(document[_0x2cccd3(0x2f1)]('edit-amount')[_0x2cccd3(0x287)]),_0x435a49=document[_0x2cccd3(0x2f1)](_0x2cccd3(0x219))[_0x2cccd3(0x287)],_0x288a81=document[_0x2cccd3(0x2f1)](_0x2cccd3(0x2f2))[_0x2cccd3(0x287)][_0x2cccd3(0x31f)]();if(!_0x375dea){showNotification(_0x2cccd3(0x252),_0x2cccd3(0x335));return;}if(!_0x2879a6||_0x2879a6<=0x0){showNotification(_0x2cccd3(0x238),_0x2cccd3(0x335));return;}if(!_0x435a49){showNotification(_0x2cccd3(0x31b),'error');return;}try{const _0x444408=localStorage[_0x2cccd3(0x236)](_0x2cccd3(0x350));if(!_0x444408){showNotification('No\x20hay\x20sesión\x20activa','error');return;}console[_0x2cccd3(0x2f4)](_0x2cccd3(0x2be),{'description':_0x375dea,'amount':_0x2879a6,'category_id':_0x435a49,'comments':_0x288a81,'id':currentEditTransactionId,'user_id':currentUser['id']});const _0x8b758=await fetch(_0x2cccd3(0x2e4),{'method':_0x2cccd3(0x2e2),'headers':{'Authorization':_0x2cccd3(0x215)+_0x444408,'Content-Type':_0x2cccd3(0x24a)},'body':JSON['stringify']({'description':_0x375dea,'amount':_0x2879a6,'category_id':_0x435a49,'comments':_0x288a81,'id':currentEditTransactionId,'user_id':currentUser['id']})});if(!_0x8b758['ok']){showNotification(_0x2cccd3(0x35f),'error'),console[_0x2cccd3(0x335)]('[editTransactionForm]\x20Error\x20al\x20actualizar\x20transacción:',_0x8b758[_0x2cccd3(0x33b)]);return;}showNotification(_0x2cccd3(0x2bc),_0x2cccd3(0x2e3)),hideEditTransactionModal(),await refreshAllMonthlyUI();}catch(_0x142b23){showNotification(_0x2cccd3(0x225),_0x2cccd3(0x335)),console[_0x2cccd3(0x335)](_0x2cccd3(0x292),_0x142b23);}});function reassignCategory(_0x2beb85){const _0x23d7e3=a0_0x5bf2c6;showNotification(_0x23d7e3(0x25b),_0x23d7e3(0x207));}async function deleteTransaction(_0x269b1e){const _0x3795b2=a0_0x5bf2c6;showConfirmModal({'title':_0x3795b2(0x2fc),'message':_0x3795b2(0x203),'onConfirm':async()=>{const _0x36f2cb=_0x3795b2,_0x408e36=localStorage[_0x36f2cb(0x236)](_0x36f2cb(0x350));if(!_0x408e36){showNotification(_0x36f2cb(0x269),_0x36f2cb(0x335));return;}try{const _0x17982b=await fetch(_0x36f2cb(0x2e4),{'method':_0x36f2cb(0x31e),'headers':{'Authorization':_0x36f2cb(0x215)+_0x408e36,'Content-Type':_0x36f2cb(0x24a)},'body':JSON[_0x36f2cb(0x209)]({'id':_0x269b1e,'user_id':currentUser['id']})});if(!_0x17982b['ok'])throw new Error(_0x36f2cb(0x23f)+_0x17982b['status']);showNotification(_0x36f2cb(0x218),_0x36f2cb(0x2e3)),await refreshAllMonthlyUI(),await updateMonthlyTotals();}catch(_0x20eb92){showNotification('Error\x20al\x20eliminar\x20transacción',_0x36f2cb(0x335)),console['error']('[deleteTransaction]\x20Error:',_0x20eb92);}}});}async function addTransaction(_0x33f1e0){const _0x47e8e6=a0_0x5bf2c6;try{const _0x40c8f=localStorage[_0x47e8e6(0x236)](_0x47e8e6(0x350));if(!_0x40c8f)throw new Error(_0x47e8e6(0x269));const _0x34b15c=await fetch('/api/transactions',{'method':_0x47e8e6(0x264),'headers':{'Authorization':_0x47e8e6(0x215)+_0x40c8f,'Content-Type':_0x47e8e6(0x24a)},'body':JSON['stringify'](_0x33f1e0)});if(!_0x34b15c['ok']){const _0x3fbfdf=await _0x34b15c[_0x47e8e6(0x360)]();throw _0x3fbfdf;}return showNotification(_0x47e8e6(0x2ff),_0x47e8e6(0x2e3)),await refreshTransactionsUI(),await refreshChartsUI(),await updateMonthlyTotals(),await _0x34b15c[_0x47e8e6(0x360)]();}catch(_0x3bc011){console['error'](_0x47e8e6(0x280),_0x3bc011),showNotification(_0x47e8e6(0x2b0),_0x47e8e6(0x335));throw _0x3bc011;}}async function addCategory(_0x3b8747){const _0x4c35c2=a0_0x5bf2c6;try{const _0x3d99c7=localStorage[_0x4c35c2(0x236)]('jwt_token');if(!_0x3d99c7)throw new Error(_0x4c35c2(0x269));const _0x590ccf=await fetch(_0x4c35c2(0x23a),{'method':'POST','headers':{'Authorization':_0x4c35c2(0x215)+_0x3d99c7,'Content-Type':'application/json'},'body':JSON[_0x4c35c2(0x209)](_0x3b8747)});if(!_0x590ccf['ok'])throw new Error(_0x4c35c2(0x23f)+_0x590ccf[_0x4c35c2(0x25d)]);return showNotification(_0x4c35c2(0x1fd),'success'),await refreshCategoriesUI(),await _0x590ccf[_0x4c35c2(0x360)]();}catch(_0x16642d){console[_0x4c35c2(0x335)](_0x4c35c2(0x251),_0x16642d),showNotification(_0x4c35c2(0x305),_0x4c35c2(0x335));throw _0x16642d;}}async function logout(){const _0x388b45=a0_0x5bf2c6;try{localStorage[_0x388b45(0x2b6)](_0x388b45(0x350)),showNotification('Sesión\x20cerrada\x20exitosamente',_0x388b45(0x2e3)),setTimeout(()=>{const _0x4af2e0=_0x388b45;window[_0x4af2e0(0x2ec)][_0x4af2e0(0x28f)]('/');},0x3e8);}catch(_0x340907){console[_0x388b45(0x335)](_0x388b45(0x316),_0x340907),showNotification(_0x388b45(0x339),'error');}}function populateYearSelector(){const _0xef08fe=a0_0x5bf2c6,_0x48c759=document[_0xef08fe(0x2f1)](_0xef08fe(0x346));if(!_0x48c759)return;_0x48c759[_0xef08fe(0x266)]='';for(let _0x325941=0x7e9;_0x325941<=0x7ee;_0x325941++){const _0x4669af=document[_0xef08fe(0x313)](_0xef08fe(0x2ae));_0x4669af[_0xef08fe(0x287)]=_0x325941,_0x4669af['textContent']=_0x325941,_0x48c759[_0xef08fe(0x2f9)](_0x4669af);}const _0x5405e5=new Date()[_0xef08fe(0x334)]();_0x48c759[_0xef08fe(0x287)]=_0x5405e5>=0x7e9&&_0x5405e5<=0x7ee?_0x5405e5:0x7e9;}async function updateMonthlyTotals(){const _0x25d61e=a0_0x5bf2c6,[_0x20bb6f,_0x6813d3]=await Promise[_0x25d61e(0x288)]([getTransactions(),getBudgets()]);let _0x191c54=0x0,_0x5a6247=0x0;_0x20bb6f['forEach'](_0x7ea929=>{const _0x4e43b2=_0x25d61e;if(_0x7ea929[_0x4e43b2(0x273)]===_0x4e43b2(0x2bb))_0x191c54+=Number(_0x7ea929[_0x4e43b2(0x1f9)])||0x0;if(_0x7ea929[_0x4e43b2(0x273)]==='expense')_0x5a6247+=Number(_0x7ea929[_0x4e43b2(0x1f9)])||0x0;});const _0x18f374=_0x6813d3[_0x25d61e(0x351)]>0x0?Number(_0x6813d3[0x0][_0x25d61e(0x1f9)])||0x0:0x0;console[_0x25d61e(0x2f4)](_0x25d61e(0x2ea),_0x18f374,_0x6813d3);const _0x3559e2=_0x191c54-_0x5a6247,_0xfa5a27=document[_0x25d61e(0x2f1)](_0x25d61e(0x2c3)),_0x126ed7=document[_0x25d61e(0x2f1)](_0x25d61e(0x32b)),_0x634f31=document[_0x25d61e(0x2f1)]('monthly-budget-display'),_0x3cfb8c=document['getElementById'](_0x25d61e(0x204));if(_0xfa5a27)_0xfa5a27[_0x25d61e(0x276)]=formatCurrency(_0x191c54);if(_0x126ed7)_0x126ed7[_0x25d61e(0x276)]=formatCurrency(_0x5a6247);if(_0x634f31)_0x634f31[_0x25d61e(0x276)]=formatCurrency(_0x18f374);if(_0x3cfb8c)_0x3cfb8c['textContent']=formatCurrency(_0x3559e2);if(_0x3cfb8c){_0x3cfb8c[_0x25d61e(0x233)][_0x25d61e(0x329)](_0x25d61e(0x35b),_0x25d61e(0x23c),_0x25d61e(0x344));if(_0x3559e2>0x0)_0x3cfb8c[_0x25d61e(0x233)][_0x25d61e(0x289)](_0x25d61e(0x35b));else{if(_0x3559e2<0x0)_0x3cfb8c[_0x25d61e(0x233)][_0x25d61e(0x289)]('text-red-600');else _0x3cfb8c[_0x25d61e(0x233)][_0x25d61e(0x289)](_0x25d61e(0x344));}}}async function refreshAllMonthlyUI(){const _0x3794d2=a0_0x5bf2c6;await Promise[_0x3794d2(0x288)]([refreshCategoriesUI(),refreshBudgetsUI(),refreshTransactionsUI(),refreshChartsUI()]),await updateMonthlyTotals();}const originalInitializeApp=initializeApp;initializeApp=async function(){await originalInitializeApp(),await refreshAllMonthlyUI();};async function initializeApp(){const _0x52b441=a0_0x5bf2c6;console['log'](_0x52b441(0x28c));try{const _0x510c94=localStorage['getItem'](_0x52b441(0x350));if(!_0x510c94){console[_0x52b441(0x2f4)](_0x52b441(0x258)),window[_0x52b441(0x2ec)][_0x52b441(0x28f)]('/');return;}console['log'](_0x52b441(0x314)),currentUser=await getCurrentUser();const _0xd4e815=document['getElementById'](_0x52b441(0x357)),_0x1bab41=document[_0x52b441(0x2f1)](_0x52b441(0x33f)),_0x41e7f9=document[_0x52b441(0x2f1)](_0x52b441(0x221));if(_0x1bab41){let _0x4b244e=currentUser[_0x52b441(0x206)]||'';_0x4b244e?_0x1bab41[_0x52b441(0x276)]=_0x52b441(0x260)+_0x4b244e:_0x1bab41[_0x52b441(0x276)]=_0x52b441(0x260)+currentUser[_0x52b441(0x275)];}if(_0x41e7f9)renderAvatar(currentUser);populateYearSelector();const _0x33e331=document[_0x52b441(0x2f1)]('current-month-display');if(_0x33e331)_0x33e331[_0x52b441(0x276)]=displayMonth(new Date(currentYear,currentMonth));console[_0x52b441(0x2f4)](_0x52b441(0x2a9)),await Promise[_0x52b441(0x288)]([refreshCategoriesUI(),refreshTransactionsUI(),refreshBudgetsUI(),refreshChartsUI()]),console['log'](_0x52b441(0x2c0)),setupEventListeners();const _0x20bc72=document[_0x52b441(0x2f1)](_0x52b441(0x2f5));if(_0x20bc72)_0x20bc72['style'][_0x52b441(0x2c8)]=_0x52b441(0x30f);console[_0x52b441(0x2f4)](_0x52b441(0x28e));}catch(_0x553b7f){console[_0x52b441(0x335)]('❌\x20Error\x20al\x20inicializar\x20la\x20aplicación:',_0x553b7f),showNotification(_0x52b441(0x270),_0x52b441(0x335));}}function setupEventListeners(){const _0x36d3ce=a0_0x5bf2c6;console[_0x36d3ce(0x2f4)](_0x36d3ce(0x2c0));const _0x34e712=document['getElementById'](_0x36d3ce(0x32f));_0x34e712?(console[_0x36d3ce(0x2f4)]('✅\x20Formulario\x20de\x20transacciones\x20encontrado'),_0x34e712[_0x36d3ce(0x214)]('submit',async _0x5ab753=>{const _0x4725d0=_0x36d3ce;_0x5ab753[_0x4725d0(0x28b)]();const _0x3217c7=document[_0x4725d0(0x2f1)]('description')['value'][_0x4725d0(0x31f)](),_0x5ebc27=parseFloat(document['getElementById'](_0x4725d0(0x1f9))['value']),_0x8bdc43=document[_0x4725d0(0x242)](_0x4725d0(0x333))[_0x4725d0(0x287)],_0xfe664c=document[_0x4725d0(0x2f1)](_0x4725d0(0x355))['value'],_0x43f5b8=document[_0x4725d0(0x2f1)](_0x4725d0(0x2b9))['value'][_0x4725d0(0x31f)](),_0x1f1db0=new Date(),_0x36631b=_0x1f1db0[_0x4725d0(0x262)]()[_0x4725d0(0x290)]('T')[0x0],_0x19ae47=currentYear+'-'+String(currentMonth+0x1)[_0x4725d0(0x247)](0x2,'0');if(!_0x3217c7||!_0x5ebc27||_0x5ebc27<=0x0||!_0x8bdc43||!_0x36631b||!_0x19ae47||_0x8bdc43==='expense'&&!_0xfe664c){showNotification('Por\x20favor\x20completa\x20todos\x20los\x20campos\x20requeridos','error');return;}const _0xeb731d={'description':_0x3217c7,'amount':_0x5ebc27,'type':_0x8bdc43,'date':_0x36631b,'month':_0x19ae47,'comments':_0x43f5b8};_0xeb731d[_0x4725d0(0x27c)]=_0xfe664c||null;try{await addTransaction(_0xeb731d),_0x34e712[_0x4725d0(0x2e5)]();}catch(_0x3d5754){console[_0x4725d0(0x335)](_0x4725d0(0x280),_0x3d5754);}})):console['log']('❌\x20Formulario\x20de\x20transacciones\x20no\x20encontrado');const _0x475985=document[_0x36d3ce(0x2f1)]('logout-btn');_0x475985?(console['log'](_0x36d3ce(0x2f0)),_0x475985[_0x36d3ce(0x214)](_0x36d3ce(0x2d9),()=>{logout();})):console['log']('❌\x20Botón\x20de\x20logout\x20no\x20encontrado');const _0x48e71e=document[_0x36d3ce(0x2f1)]('manage-categories-btn');_0x48e71e?(console['log']('✅\x20Botón\x20de\x20gestión\x20de\x20categorías\x20encontrado'),_0x48e71e['addEventListener'](_0x36d3ce(0x2d9),()=>{showCategoryModal();})):console[_0x36d3ce(0x2f4)](_0x36d3ce(0x223)),console[_0x36d3ce(0x2f4)](_0x36d3ce(0x2a6));}function updateMonthDisplay(){const _0x33b05a=a0_0x5bf2c6,_0x43f905=document[_0x33b05a(0x2f1)](_0x33b05a(0x30e));_0x43f905&&(_0x43f905['textContent']=displayMonth(new Date(currentYear,currentMonth)));}async function getAnnualData(_0x462e1a){const _0x5e4058=a0_0x5bf2c6;try{const _0x6ac0fd=localStorage[_0x5e4058(0x236)](_0x5e4058(0x350));if(!_0x6ac0fd)throw new Error('No\x20hay\x20sesión\x20activa');const _0x3a3299=await fetch(_0x5e4058(0x26b),{'headers':{'Authorization':'Bearer\x20'+_0x6ac0fd}});if(!_0x3a3299['ok'])throw new Error('Error\x20al\x20obtener\x20presupuestos');const _0x2cc4e7=await _0x3a3299[_0x5e4058(0x360)](),_0x5bccf9=await fetch(_0x5e4058(0x2e4),{'headers':{'Authorization':_0x5e4058(0x215)+_0x6ac0fd}});if(!_0x5bccf9['ok'])throw new Error(_0x5e4058(0x2ca));const _0x3fdc6b=await _0x5bccf9['json'](),_0x594679=_0x2cc4e7[_0x5e4058(0x2b2)](_0x3ec159=>_0x3ec159['month'][_0x5e4058(0x310)](_0x462e1a)),_0x757cac=_0x3fdc6b[_0x5e4058(0x2b2)](_0x30acb5=>_0x30acb5[_0x5e4058(0x338)]['startsWith'](_0x462e1a)),_0x634b5b=Array(0xc)[_0x5e4058(0x23b)](0x0),_0x450add=Array(0xc)[_0x5e4058(0x23b)](0x0),_0x1e13e3=Array(0xc)[_0x5e4058(0x23b)](0x0);return _0x594679[_0x5e4058(0x353)](_0x1350aa=>{const _0x2a99ee=_0x5e4058,_0xbb4fc2=parseInt(_0x1350aa[_0x2a99ee(0x338)][_0x2a99ee(0x290)]('-')[0x1],0xa)-0x1;_0x1e13e3[_0xbb4fc2]=Number(_0x1350aa[_0x2a99ee(0x1f9)])||0x0;}),_0x757cac['forEach'](_0x225141=>{const _0x15735e=_0x5e4058,_0x30781a=parseInt(_0x225141[_0x15735e(0x338)][_0x15735e(0x290)]('-')[0x1],0xa)-0x1,_0xd2f527=Number(_0x225141[_0x15735e(0x1f9)])||0x0;if(_0x225141[_0x15735e(0x273)]===_0x15735e(0x22a))_0x634b5b[_0x30781a]+=_0xd2f527;else _0x225141[_0x15735e(0x273)]==='income'&&(_0x450add[_0x30781a]+=_0xd2f527);}),{'gastosPorMes':_0x634b5b,'ingresosPorMes':_0x450add,'presupuestosPorMes':_0x1e13e3};}catch(_0x5599ad){return console[_0x5e4058(0x335)](_0x5e4058(0x2bf),_0x5599ad),{'gastosPorMes':Array(0xc)['fill'](0x0),'ingresosPorMes':Array(0xc)[_0x5e4058(0x23b)](0x0),'presupuestosPorMes':Array(0xc)[_0x5e4058(0x23b)](0x0)};}}let annualChartInstance=null;function renderAnnualChart({gastosPorMes:_0x3ce0ba,ingresosPorMes:_0x4db20d,presupuestosPorMes:_0x2279b0},_0x371afb){const _0x335a2e=a0_0x5bf2c6,_0x40ed9c=document['getElementById'](_0x335a2e(0x2ef));if(!_0x40ed9c)return;annualChartInstance&&annualChartInstance['destroy']();const _0x4172b3=['Enero',_0x335a2e(0x210),_0x335a2e(0x22f),'Abril',_0x335a2e(0x1ea),_0x335a2e(0x2b3),_0x335a2e(0x2d0),_0x335a2e(0x31d),_0x335a2e(0x2d5),_0x335a2e(0x330),_0x335a2e(0x226),_0x335a2e(0x265)],_0x502fab=_0x4db20d[_0x335a2e(0x257)]((_0x156dfb,_0x59015b)=>(Number(_0x156dfb)||0x0)-(Number(_0x3ce0ba[_0x59015b])||0x0));annualChartInstance=new Chart(_0x40ed9c,{'type':'bar','data':{'labels':_0x4172b3,'datasets':[{'label':_0x335a2e(0x35a),'data':_0x502fab,'backgroundColor':'rgba(16,185,129,0.7)','borderRadius':0x6,'maxBarThickness':0x20},{'label':_0x335a2e(0x319),'data':_0x2279b0,'type':_0x335a2e(0x235),'borderColor':_0x335a2e(0x267),'backgroundColor':'rgba(37,99,235,0.1)','borderWidth':0x3,'pointRadius':0x4,'pointBackgroundColor':'#2563eb','fill':![],'tension':0.3}]},'options':{'responsive':!![],'maintainAspectRatio':![],'plugins':{'legend':{'position':_0x335a2e(0x30a)},'title':{'display':!![],'text':_0x335a2e(0x25e)+_0x371afb}},'scales':{'y':{'beginAtZero':!![],'ticks':{'callback':function(_0x5a64fa){const _0x4cde1c=_0x335a2e;return'$'+_0x5a64fa['toLocaleString'](_0x4cde1c(0x1e9));}}}}}});}async function refreshAnnualChartUI(){const _0x6a045e=a0_0x5bf2c6,_0x8a0243=document[_0x6a045e(0x2f1)]('year-selector'),_0x496abc=_0x8a0243?_0x8a0243['value']:new Date()[_0x6a045e(0x334)](),_0x7ab6e1=await getAnnualData(_0x496abc);renderAnnualChart(_0x7ab6e1,_0x496abc);}const navAnnual=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x340));function a0_0x2a45(_0x36448b,_0x269ddc){const _0x55b7fe=a0_0x55b7();return a0_0x2a45=function(_0x2a45a1,_0x264bf0){_0x2a45a1=_0x2a45a1-0x1e9;let _0x443454=_0x55b7fe[_0x2a45a1];return _0x443454;},a0_0x2a45(_0x36448b,_0x269ddc);}navAnnual&&navAnnual[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x2d9),()=>{refreshAnnualChartUI();});const yearSelector=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x346));yearSelector&&yearSelector[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x249),async()=>{const _0x58962d=a0_0x5bf2c6;currentYear=parseInt(yearSelector[_0x58962d(0x287)],0xa);const _0x3eb2ab=document['getElementById'](_0x58962d(0x325));_0x3eb2ab&&!_0x3eb2ab[_0x58962d(0x233)][_0x58962d(0x343)](_0x58962d(0x1f1))&&await refreshAnnualChartUI(),await refreshAllMonthlyUI();});const editAnnualBudgetsBtn=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x25a)),editAnnualBudgetsModal=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x279)),editAnnualBudgetsForm=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x29d)),closeEditAnnualBudgetsBtn=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x2d3)),saveAnnualBudgetsBtn=document[a0_0x5bf2c6(0x2f1)]('save-annual-budgets-btn'),editAnnualYear=document['getElementById'](a0_0x5bf2c6(0x2af));editAnnualBudgetsBtn&&editAnnualBudgetsModal&&editAnnualBudgetsForm&&editAnnualBudgetsBtn[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x2d9),async()=>{const _0x308e19=a0_0x5bf2c6,_0x20d472=document['getElementById'](_0x308e19(0x346)),_0x487b4e=_0x20d472?_0x20d472['value']:new Date()['getFullYear']();editAnnualYear[_0x308e19(0x276)]=_0x487b4e,editAnnualBudgetsModal[_0x308e19(0x233)][_0x308e19(0x329)](_0x308e19(0x1f1));const _0x5a3b08=await fetch('/api/budgets',{'headers':{'Authorization':'Bearer\x20'+localStorage[_0x308e19(0x236)]('jwt_token')}});if(!_0x5a3b08['ok'])throw new Error(_0x308e19(0x23f)+_0x5a3b08[_0x308e19(0x25d)]);const _0x101981=await _0x5a3b08[_0x308e19(0x360)](),_0x2c120d=[_0x308e19(0x2de),'Febrero',_0x308e19(0x22f),_0x308e19(0x337),_0x308e19(0x1ea),'Junio',_0x308e19(0x2d0),_0x308e19(0x31d),_0x308e19(0x2d5),_0x308e19(0x330),_0x308e19(0x226),_0x308e19(0x265)];editAnnualBudgetsForm[_0x308e19(0x266)]='';for(let _0x3c869e=0x0;_0x3c869e<0xc;_0x3c869e++){const _0x2a07e0=_0x487b4e+'-'+String(_0x3c869e+0x1)[_0x308e19(0x247)](0x2,'0'),_0x4e093f=_0x101981['find'](_0x56f0ac=>_0x56f0ac[_0x308e19(0x338)]===_0x2a07e0)?.[_0x308e19(0x1f9)]??0x0,_0x4cc0a5='$'+parseInt(_0x4e093f,0xa)['toLocaleString'](_0x308e19(0x1e9));editAnnualBudgetsForm[_0x308e19(0x266)]+=_0x308e19(0x253)+_0x2c120d[_0x3c869e]+'</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22text\x22\x20min=\x220\x22\x20name=\x22'+_0x2a07e0+_0x308e19(0x2f8)+_0x4cc0a5+_0x308e19(0x2b5);}setTimeout(()=>{const _0x3bbfd3=_0x308e19;document[_0x3bbfd3(0x27f)](_0x3bbfd3(0x22b))[_0x3bbfd3(0x353)](_0x5997ab=>{const _0x251ff7=_0x3bbfd3;_0x5997ab[_0x251ff7(0x214)](_0x251ff7(0x27e),_0x4d5cc8=>{const _0x30dacc=_0x251ff7;let _0x3abd0b=_0x4d5cc8[_0x30dacc(0x256)][_0x30dacc(0x287)]['replace'](/[^\d]/g,'');if(!_0x3abd0b){_0x4d5cc8[_0x30dacc(0x256)][_0x30dacc(0x287)]='';return;}_0x3abd0b=parseInt(_0x3abd0b,0xa)['toLocaleString'](_0x30dacc(0x1e9)),_0x4d5cc8['target'][_0x30dacc(0x287)]='$'+_0x3abd0b;}),_0x5997ab[_0x251ff7(0x214)](_0x251ff7(0x2cf),_0x5c8908=>{setTimeout(()=>{const _0x2509e1=a0_0x2a45;_0x5c8908['target']['setSelectionRange'](_0x5c8908[_0x2509e1(0x256)][_0x2509e1(0x287)][_0x2509e1(0x351)],_0x5c8908['target'][_0x2509e1(0x287)]['length']);},0x0);});});},0x64),setupModalCloseEvents(_0x308e19(0x279),()=>{const _0x1eeb8e=_0x308e19;editAnnualBudgetsModal[_0x1eeb8e(0x233)][_0x1eeb8e(0x289)](_0x1eeb8e(0x1f1));});});closeEditAnnualBudgetsBtn&&editAnnualBudgetsModal&&closeEditAnnualBudgetsBtn[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x2d9),()=>{const _0x59be1f=a0_0x5bf2c6;editAnnualBudgetsModal[_0x59be1f(0x233)][_0x59be1f(0x289)](_0x59be1f(0x1f1));});editAnnualBudgetsForm&&editAnnualBudgetsForm[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x281),async _0x4f3da2=>{const _0x52fe9f=a0_0x5bf2c6;_0x4f3da2['preventDefault'](),saveAnnualBudgetsBtn[_0x52fe9f(0x2c6)]=!![];const _0x3ecac3=new FormData(editAnnualBudgetsForm),_0x194597=[];for(let [_0x4a8268,_0x157e47]of _0x3ecac3[_0x52fe9f(0x212)]()){let _0x35f4cd=String(_0x157e47)[_0x52fe9f(0x28f)](/[^\d]/g,'');_0x194597[_0x52fe9f(0x230)]({'month':_0x4a8268,'amount':parseInt(_0x35f4cd,0xa)});}const _0x26fdc7=localStorage['getItem'](_0x52fe9f(0x350));if(!_0x26fdc7){showNotification(_0x52fe9f(0x269),_0x52fe9f(0x335));return;}try{const _0x43e1e8=await fetch(_0x52fe9f(0x26b),{'method':_0x52fe9f(0x2e2),'headers':{'Authorization':_0x52fe9f(0x215)+_0x26fdc7,'Content-Type':'application/json'},'body':JSON[_0x52fe9f(0x209)](_0x194597)});if(!_0x43e1e8['ok'])throw new Error(_0x52fe9f(0x23f)+_0x43e1e8[_0x52fe9f(0x25d)]);showNotification('Presupuestos\x20actualizados','success'),editAnnualBudgetsModal[_0x52fe9f(0x233)][_0x52fe9f(0x289)](_0x52fe9f(0x1f1)),refreshAnnualChartUI();}catch(_0x3738ff){showNotification(_0x52fe9f(0x2b1),'error');}finally{saveAnnualBudgetsBtn[_0x52fe9f(0x2c6)]=![];}});document[a0_0x5bf2c6(0x2f1)]('app-container')&&(initializeApp(),initializeMonthYearSelectors(),setupMonthYearListeners());window[a0_0x5bf2c6(0x342)]=deleteTransaction,window['editTransaction']=editTransaction,window[a0_0x5bf2c6(0x237)]=deleteCategory;function calcularTotalesPorCategoria(_0x2e2d82,_0x324675){const _0x3c6b1d={};return _0x2e2d82['forEach'](_0x23ca22=>{const _0xe849c3=a0_0x2a45;if(_0x23ca22[_0xe849c3(0x273)]!==_0x324675)return;const _0x5cc9a4=_0x23ca22[_0xe849c3(0x229)]||_0xe849c3(0x27a),_0x46a7c9=Number(_0x23ca22[_0xe849c3(0x1f9)])||0x0;if(!_0x3c6b1d[_0x5cc9a4])_0x3c6b1d[_0x5cc9a4]=0x0;_0x3c6b1d[_0x5cc9a4]+=_0x46a7c9;}),_0x3c6b1d;}function setupMonthYearListeners(){const _0x4440fd=a0_0x5bf2c6,_0x528af9=document[_0x4440fd(0x2f1)]('prev-month-btn'),_0x10aa84=document[_0x4440fd(0x2f1)](_0x4440fd(0x234)),_0x1da842=document[_0x4440fd(0x2f1)](_0x4440fd(0x346));_0x528af9&&_0x528af9[_0x4440fd(0x214)]('click',async()=>{currentMonth===0x0?(currentMonth=0xb,currentYear--):currentMonth--,updateMonthDisplay(),await refreshAllMonthlyUI();}),_0x10aa84&&_0x10aa84[_0x4440fd(0x214)](_0x4440fd(0x2d9),async()=>{currentMonth===0xb?(currentMonth=0x0,currentYear++):currentMonth++,updateMonthDisplay(),await refreshAllMonthlyUI();}),_0x1da842&&_0x1da842[_0x4440fd(0x214)](_0x4440fd(0x249),async()=>{const _0x14e034=_0x4440fd;currentYear=parseInt(_0x1da842[_0x14e034(0x287)],0xa),updateMonthDisplay(),await refreshAllMonthlyUI();});}function initializeMonthYearSelectors(){const _0x191757=a0_0x5bf2c6,_0x124e43=document['getElementById']('month-selector'),_0x59d257=document[_0x191757(0x2f1)](_0x191757(0x346)),_0x38a2d6=new Date();currentMonth=_0x38a2d6['getMonth'](),currentYear=_0x38a2d6[_0x191757(0x334)]();if(_0x124e43)_0x124e43[_0x191757(0x287)]=currentMonth;if(_0x59d257)_0x59d257[_0x191757(0x287)]=currentYear;_0x124e43&&_0x124e43[_0x191757(0x214)](_0x191757(0x249),async()=>{const _0xca8ec7=_0x191757;currentMonth=parseInt(_0x124e43[_0xca8ec7(0x287)],0xa),updateMonthDisplay(),await refreshAllMonthlyUI();}),_0x59d257&&_0x59d257[_0x191757(0x214)]('change',async()=>{currentYear=parseInt(_0x59d257['value'],0xa),updateMonthDisplay(),await refreshAllMonthlyUI();});}function showMonthlyView(){toggleMonthSelector(!![]);}function showAnnualView(){toggleMonthSelector(![]);}function renderAvatar(_0x3eb0b9){const _0x134a89=a0_0x5bf2c6,_0x26f14b=document['getElementById'](_0x134a89(0x221));if(!_0x26f14b)return;const _0x28b1f8=_0x3eb0b9[_0x134a89(0x206)]?_0x3eb0b9[_0x134a89(0x206)]['normalize'](_0x134a89(0x298))[0x0][_0x134a89(0x322)]():'',_0x4d7a3d=_0x3eb0b9[_0x134a89(0x2a5)]?_0x3eb0b9[_0x134a89(0x2a5)][_0x134a89(0x307)](_0x134a89(0x298))[0x0][_0x134a89(0x322)]():'';if(_0x28b1f8||_0x4d7a3d)_0x26f14b[_0x134a89(0x276)]=_0x28b1f8+_0x4d7a3d;else _0x3eb0b9[_0x134a89(0x275)]?_0x26f14b['textContent']=_0x3eb0b9[_0x134a89(0x275)][0x0]['toUpperCase']():_0x26f14b[_0x134a89(0x276)]='';}const avatar=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x221));avatar&&avatar[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x2d9),async()=>{const _0x783258=a0_0x5bf2c6,_0x3b18c7=document[_0x783258(0x2f1)](_0x783258(0x239));if(!_0x3b18c7)return;const _0x5dd788=await getCurrentUser();document[_0x783258(0x2f1)](_0x783258(0x296))['value']=_0x5dd788?.[_0x783258(0x275)]||'',document[_0x783258(0x2f1)](_0x783258(0x20c))[_0x783258(0x287)]=_0x5dd788?.['first_name']||'',document[_0x783258(0x2f1)](_0x783258(0x32a))[_0x783258(0x287)]=_0x5dd788?.[_0x783258(0x2a5)]||'',document['getElementById'](_0x783258(0x1fe))[_0x783258(0x287)]='',_0x3b18c7['classList'][_0x783258(0x329)](_0x783258(0x1f1)),setupModalCloseEvents('profile-modal',()=>{const _0x3b6e0f=_0x783258;_0x3b18c7[_0x3b6e0f(0x233)][_0x3b6e0f(0x289)]('hidden');});});const profileForm=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x2a0));profileForm&&profileForm[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x281),async _0x2126a7=>{const _0x24a9d1=a0_0x5bf2c6;_0x2126a7[_0x24a9d1(0x28b)]();const _0x2caf52=document['getElementById']('profile-firstname')[_0x24a9d1(0x287)][_0x24a9d1(0x31f)](),_0x4c8f84=document[_0x24a9d1(0x2f1)](_0x24a9d1(0x32a))['value'][_0x24a9d1(0x31f)](),_0x44cc61=document[_0x24a9d1(0x2f1)](_0x24a9d1(0x1fe))[_0x24a9d1(0x287)],_0x37fdb5=document[_0x24a9d1(0x2f1)](_0x24a9d1(0x2c2))[_0x24a9d1(0x287)];if(_0x44cc61&&_0x44cc61!==_0x37fdb5){showNotification(_0x24a9d1(0x240),_0x24a9d1(0x335));return;}const _0x2d01e5=localStorage['getItem'](_0x24a9d1(0x350));if(!_0x2d01e5)return;const _0x5e0e7c=JSON[_0x24a9d1(0x2e9)](atob(_0x2d01e5[_0x24a9d1(0x290)]('.')[0x1])),_0x1a9a6e={'firstName':_0x2caf52,'lastName':_0x4c8f84};if(_0x44cc61)_0x1a9a6e[_0x24a9d1(0x30b)]=_0x44cc61;const _0x4d5a55=_0x5e0e7c[_0x24a9d1(0x216)]==='admin',_0x17731c=_0x4d5a55?_0x24a9d1(0x33e)+_0x5e0e7c[_0x24a9d1(0x29e)]:_0x24a9d1(0x1f0);try{const _0x130c4c=await fetch(_0x17731c,{'method':_0x24a9d1(0x326),'headers':{'Authorization':'Bearer\x20'+_0x2d01e5,'Content-Type':'application/json'},'body':JSON[_0x24a9d1(0x209)](_0x1a9a6e)});if(!_0x130c4c['ok'])throw new Error(_0x24a9d1(0x2ce));showNotification(_0x24a9d1(0x33a),_0x24a9d1(0x2e3)),document['getElementById'](_0x24a9d1(0x239))['classList'][_0x24a9d1(0x289)](_0x24a9d1(0x1f1)),renderAvatar({'first_name':_0x2caf52[_0x24a9d1(0x307)](_0x24a9d1(0x298)),'last_name':_0x4c8f84[_0x24a9d1(0x307)]('NFC')});const _0x4d8027=document['getElementById']('user-greeting');if(_0x4d8027)_0x4d8027[_0x24a9d1(0x276)]=_0x24a9d1(0x260)+_0x2caf52[_0x24a9d1(0x307)]('NFC');const _0x51d540=await _0x130c4c['json']();if(_0x51d540['token'])localStorage[_0x24a9d1(0x2a4)](_0x24a9d1(0x350),_0x51d540[_0x24a9d1(0x299)]);else{const _0xa26be5=localStorage[_0x24a9d1(0x236)](_0x24a9d1(0x350));if(_0xa26be5){const _0x4d86cf=_0xa26be5[_0x24a9d1(0x290)]('.');if(_0x4d86cf['length']===0x3){let _0x5c5f7f=JSON[_0x24a9d1(0x2e9)](atob(_0x4d86cf[0x1]));_0x5c5f7f[_0x24a9d1(0x206)]=_0x2caf52[_0x24a9d1(0x307)](_0x24a9d1(0x298)),_0x5c5f7f[_0x24a9d1(0x2a5)]=_0x4c8f84[_0x24a9d1(0x307)](_0x24a9d1(0x298));const _0x7cdca3=btoa(JSON[_0x24a9d1(0x209)](_0x5c5f7f))['replace'](/=+$/,'');localStorage[_0x24a9d1(0x2a4)]('jwt_token',_0x4d86cf[0x0]+'.'+_0x7cdca3+'.'+_0x4d86cf[0x2]);}}}}catch(_0x337da8){showNotification(_0x24a9d1(0x2ce),_0x24a9d1(0x335));}});const closeProfileModalBtn=document[a0_0x5bf2c6(0x2f1)](a0_0x5bf2c6(0x205));closeProfileModalBtn&&closeProfileModalBtn[a0_0x5bf2c6(0x214)](a0_0x5bf2c6(0x2d9),()=>{const _0x1d358a=a0_0x5bf2c6;document[_0x1d358a(0x2f1)]('profile-modal')[_0x1d358a(0x233)][_0x1d358a(0x289)](_0x1d358a(0x1f1));});async function showAdminMenuIfNeeded(){const _0xc0bac8=a0_0x5bf2c6,_0x292592=await getCurrentUser();let _0x4b3785=document[_0xc0bac8(0x2f1)](_0xc0bac8(0x208));if(!_0x4b3785){const _0xeaf05f=document['getElementById'](_0xc0bac8(0x2a2));_0xeaf05f&&(_0x4b3785=document[_0xc0bac8(0x313)]('li'),_0x4b3785['id']=_0xc0bac8(0x208),_0x4b3785['style'][_0xc0bac8(0x2c8)]=_0xc0bac8(0x30f),_0x4b3785[_0xc0bac8(0x266)]='<a\x20href=\x22admin.html\x22\x20title=\x22Administración\x20de\x20usuarios\x22\x20class=\x22sidebar-icon\x20p-3\x20rounded-lg\x22><i\x20class=\x22bi\x20bi-gear\x20text-2xl\x22></i></a>',_0xeaf05f[_0xc0bac8(0x2f9)](_0x4b3785));}if(!_0x4b3785)return;_0x292592&&_0x292592[_0xc0bac8(0x216)]&&_0x292592['role']['toLowerCase']()===_0xc0bac8(0x20d)?(_0x4b3785[_0xc0bac8(0x201)][_0xc0bac8(0x2c8)]=_0xc0bac8(0x2fb),console[_0xc0bac8(0x2f4)](_0xc0bac8(0x294))):(_0x4b3785[_0xc0bac8(0x201)]['display']=_0xc0bac8(0x30f),console[_0xc0bac8(0x2f4)]('🔒\x20Menú\x20admin\x20oculto\x20(no\x20admin)'));}showAdminMenuIfNeeded();function showConfirmModal({title:title=a0_0x5bf2c6(0x2d4),message:message='',onConfirm:_0x14b7de}){const _0x160554=a0_0x5bf2c6,_0x1b89aa=document[_0x160554(0x2f1)](_0x160554(0x23e));document[_0x160554(0x2f1)]('confirm-modal-title')[_0x160554(0x276)]=title,document[_0x160554(0x2f1)]('confirm-modal-message')[_0x160554(0x276)]=message,_0x1b89aa[_0x160554(0x233)]['remove'](_0x160554(0x1f1));const _0x601f0=document[_0x160554(0x2f1)](_0x160554(0x34f)),_0x38f578=document[_0x160554(0x2f1)](_0x160554(0x1f4)),_0x33d0a3=()=>{const _0x592ef7=_0x160554;_0x1b89aa[_0x592ef7(0x233)][_0x592ef7(0x289)](_0x592ef7(0x1f1)),_0x601f0[_0x592ef7(0x20a)](_0x592ef7(0x2d9),_0x42a5d0),_0x38f578[_0x592ef7(0x20a)](_0x592ef7(0x2d9),_0x8b7f50);};function _0x42a5d0(){const _0x403ade=_0x160554;_0x33d0a3();if(typeof _0x14b7de===_0x403ade(0x317))_0x14b7de();}function _0x8b7f50(){_0x33d0a3();}_0x601f0[_0x160554(0x214)](_0x160554(0x2d9),_0x42a5d0),_0x38f578['addEventListener'](_0x160554(0x2d9),_0x8b7f50);}window['showConfirmModal']=showConfirmModal;